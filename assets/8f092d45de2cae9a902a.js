"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["87624"],{63243:function(e,t,n){e.exports=n.p+"b2fad2364372ac883853.png"},244488:function(e,t,n){e.exports=n.p+"f0b741b24bffce0dd3cf.png"},15888:function(e,t,n){e.exports=n.p+"b2e8f732590705176d23.png"},16724:function(e,t,n){e.exports=n.p+"42805d6e8621df404add.png"},774694:function(e,t,n){e.exports=n.p+"499681d7cba7c4250d56.png"},402344:function(e,t,n){e.exports=n.p+"63eba15c08ff69f7aec3.png"},289901:function(e,t,n){e.exports=n.p+"4439a1724f27ea200e40.png"},709393:function(e,t,n){e.exports=n.p+"dd701c1d70c1d51d00ac.png"},432170:function(e,t,n){e.exports=n.p+"aaf60661aaad266e505c.png"},448509:function(e,t,n){e.exports=n.p+"a9d51096f8a0d4296a87.png"},799718:function(e,t,n){e.exports=n.p+"eaba1e8b5a274a8e7b6d.png"},241371:function(e,t,n){e.exports=n.p+"c2da3e35e8af9401dbea.png"},292006:function(e,t,n){e.exports=n.p+"6cfa9a628fa2ff658fc0.png"},441506:function(e,t,n){e.exports=n.p+"3d3f2551422bdf6b1413.png"},304088:function(e,t,n){e.exports=n.p+"38f2e2d5427ed8728d9e.png"},647387:function(e,t,n){e.exports=n.p+"9295fa8b7ed6875453cf.png"},646584:function(e,t,n){e.exports=n.p+"3db2f9c4e006e063dc22.png"},764707:function(e,t,n){n(47120);var a=n(979590),r=n.n(a),o=n(399606),l=n(607070),i=n(168631);let s=(e,t)=>{let n=e.toRgb(),a=t.toRgb(),[o,l,s]=(0,i.J2)([n.r,n.g,n.b],[a.r,a.g,a.b],50);return r()({r:o,g:l,b:s})},c=(e,t)=>0===t.length?void 0:1===t.length?{primary:t[0],secondary:t[0],border:t[0].setAlpha(.4),label:t[0].isLight()?e.dark:e.light}:{primary:t[0],secondary:t[1],border:s(t[0],t[1]).setAlpha(.4),label:s(t[0],t[1]).isLight()?e.dark:e.light},d=(e,t)=>0===t.length?void 0:1===t.length?{primary:t[0],secondary:t[0],text:t[0].isLight()?e.dark:e.light}:{primary:t[0],secondary:t[1],text:s(t[0],t[1]).isLight()?e.dark:e.light},u=(e,t)=>{let{h:n,s:a,l:o}=e.toHsl();return r()({h:n,s:a*t,l:o})};t.Z=e=>t=>{let n=(0,o.e7)([l.Z],()=>l.Z.saturation);if(null==t)return{};let a={backgroundColors:c(e,t.backgroundColors),buttonColors:d(e,t.buttonColors),confettiColors:t.confettiColors};return 1===n?{...a}:{backgroundColors:null!=a.backgroundColors?{primary:u(a.backgroundColors.primary,n),secondary:u(a.backgroundColors.secondary,n),border:u(a.backgroundColors.border,n),label:u(a.backgroundColors.label,n)}:void 0,buttonColors:null!=a.buttonColors?{primary:u(a.buttonColors.primary,n),secondary:u(a.buttonColors.secondary,n),text:u(a.buttonColors.text,n)}:void 0,confettiColors:a.confettiColors.map(e=>u(e,n))}}},266386:function(e,t,n){n.d(t,{c:function(){return r}});let a=(0,n(818083).B)({kind:"user",id:"2024-05_collectibles_hover_preview",label:"Collectibles Hover Preview Experiment",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Collectibles card with avatar deco hover preview",config:{enabled:!0}}]}),r=e=>a.useExperiment({location:e}).enabled},318028:function(e,t,n){n.d(t,{l:function(){return l}}),n(47120);var a=n(399606),r=n(597688),o=n(267097);function l(e){(0,o.Z)();let[t,n]=(0,a.Wu)([r.Z],()=>[r.Z.isFetchingCategories,r.Z.getCategoryForProduct(e)]);return{isFetching:t,category:n}}},635552:function(e,t,n){n.d(t,{W:function(){return i}}),n(47120);var a=n(470079),r=n(809206),o=n(350327),l=n(328456);let i=e=>{let{product:t,onSuccess:n,onError:i}=e,[s,c]=a.useState(!1),{firstAvatarDecoration:d,firstProfileEffect:u}=(0,l.R)(t);return{handleUseNow:a.useCallback(async()=>{c(!0);try{if(null!=d&&await (0,r.Mn)({avatarDecoration:d}),null!=u){let e={profile_effect_id:u.id};await (0,o.Z)(e)}n()}catch(e){i(e)}finally{c(!1)}},[d,u,n,i]),isApplying:s}}},328456:function(e,t,n){n.d(t,{R:function(){return l},b:function(){return o}}),n(724458),n(653041),n(47120);var a=n(470079),r=n(979554);class o{get firstAvatarDecoration(){return this.getFirstItemByType(r.Z.AVATAR_DECORATION)}get firstProfileEffect(){return this.getFirstItemByType(r.Z.PROFILE_EFFECT)}getFirstItemByType(e){var t;let n=(null!==(t=this.itemsByTypes.get(e))&&void 0!==t?t:[])[0];if(null!=n)return n}sortByTypes(e){return e.reduce((e,t)=>{let n=e.get(t.type);return null!=n?n.push(t):e.set(t.type,[t]),e},new Map)}constructor(e){var t,n,a;t=this,a=void 0,(n="itemsByTypes")in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,this.itemsByTypes=this.sortByTypes(e)}}let l=e=>{let{firstProfileEffect:t,firstAvatarDecoration:n}=a.useMemo(()=>new o(e.items),[e]);return{firstProfileEffect:t,firstAvatarDecoration:n}}},624377:function(e,t,n){var a=n(979590),r=n.n(a),o=n(692547),l=n(764707);let i=r()(o.Z.unsafe_rawColors.WHITE_500.resolve({saturation:1}).hex()),s=r()(o.Z.unsafe_rawColors.BLACK_500.resolve({saturation:1}).hex()),c=(0,l.Z)({dark:s,light:i});t.Z=c},141011:function(e,t,n){var a=n(735250),r=n(470079),o=n(120356),l=n.n(o),i=n(399606),s=n(376345),c=n(607070),d=n(302221),u=n(884697),f=n(372654),p=n(50812);t.Z=e=>{let{asset:t,size:n=f.yV,addGradient:o=!1,className:g,style:v,children:C,blur:E=!1}=e,h=(0,i.e7)([c.Z],()=>c.Z.saturation),b=r.useMemo(()=>{if(null==t)return v;let e=(0,u.uV)(t,{size:n,format:"jpg"}),a=E?{filter:"blur(2px)",transform:"scale(1.02)"}:{};if(1===h)return{...v,backgroundImage:o?"url(".concat(e,"), linear-gradient(180deg, rgba(0, 71, 94, 0.6) 5%, rgba(9, 33, 65, 0.6) 95%)"):"url(".concat(e,")"),backgroundBlendMode:"multiply",backgroundSize:"cover",...a};let r=(0,d.aD)(s.ZP.unsafe_rawColors.BLACK_500,1-h);return{...v,backgroundImage:"linear-gradient(".concat(r,", ").concat(r,"), url(").concat(e,")"),backgroundBlendMode:"saturation",backgroundSize:"cover",...a}},[t,n,h,v,E,o]);return(0,a.jsx)("div",{className:l()(p.banner,g),style:b,children:C})}},331042:function(e,t,n){n.r(t),n.d(t,{CollectiblesCollectedModalInner:function(){return P}}),n(47120),n(627341);var a=n(735250),r=n(470079),o=n(887024),l=n(512722),i=n.n(l),s=n(278074),c=n(979554),d=n(399606),u=n(481060),f=n(37234),p=n(607070),g=n(100527),v=n(906732),C=n(1585),E=n(125988),h=n(300284),b=n(876917),m=n(642619),T=n(594174),y=n(884697),A=n(617452),x=n(318028),L=n(635552),I=n(328456),Z=n(624377),N=n(530618),_=n(141011),S=n(372654),O=n(216541),R=n(302800),k=n(215023),M=n(689938),B=n(432015),j=n(660097);let P=e=>{var t,n;let{product:o,onClose:l,confettiTarget:R,confettiCanvas:P,hideConfetti:w=!1,analyticsLocations:D}=e,{confettiColors:F}=(0,Z.Z)(o.styles),H=(0,d.e7)([T.default],()=>{let e=T.default.getCurrentUser();return i()(null!=e,"User cannot be undefined"),e}),z=(0,d.e7)([p.Z],()=>p.Z.useReducedMotion),U=(0,A.J)("CollectiblesCollectedModal"),[V]=o.items,{avatarDecorationSrc:W}=(0,E.Z)({user:H,avatarDecorationOverride:(null==V?void 0:V.type)===c.Z.AVATAR_DECORATION?V:null,size:(0,C.y9)(u.AvatarSizes.SIZE_120)}),G=r.useRef(null),{analyticsLocations:K}=(0,v.ZP)([...D,g.Z.COLLECTIBLES_COLLECTED_MODAL]),Y=(0,h.Z)({analyticsLocations:K}),J=r.useCallback(()=>{if(l(),(0,f.xf)(),Y(),o.type===c.Z.AVATAR_DECORATION){i()(V.type===c.Z.AVATAR_DECORATION,"product type and item type are the same"),(0,C.ps)({initialSelectedDecoration:V,analyticsLocations:K});return}o.type===c.Z.PROFILE_EFFECT&&(0,m.H)({initialSelectedEffectId:V.id,analyticsLocations:K})},[l,Y,o.type,V,K]),Q=r.useCallback(()=>{U&&(0,u.showToast)((0,u.createToast)(M.Z.Messages.COLLECTIBLES_PROFILE_UPDATE_NOTIFICATION,u.ToastType.MESSAGE,{duration:6e3,position:u.ToastPosition.TOP}))},[U]),{handleUseNow:q}=(0,L.W)({product:o,onSuccess:()=>{Q(),l()},onError:l}),{firstAvatarDecoration:X,firstProfileEffect:$}=(0,I.R)(o),ee=null!=X&&null!=$,{category:et,isFetching:en}=(0,x.l)(o.skuId),ea=null!==(n=null==et?void 0:et.successModalBg)&&void 0!==n?n:o.banner;return(0,a.jsxs)(v.Gt,{value:K,children:[(0,a.jsxs)("div",{className:B.modalInner,ref:G,children:[(0,a.jsxs)("div",{className:B.bannerContainer,children:[(0,a.jsx)(_.Z,{asset:en?void 0:ea,addGradient:null===(t=k.Ve[o.categorySkuId])||void 0===t?void 0:t.addGradient,size:(0,S.ML)(880),className:B.decorationBanner,blur:!0}),(0,s.EQ)(o.type).with(c.Z.PROFILE_EFFECT,()=>(0,a.jsx)("div",{className:B.profileEffectShopPreview,children:(0,a.jsx)(b.Z,{forCollectedModal:!0,profileEffectId:V.id})})).with(c.Z.AVATAR_DECORATION,()=>(i()(V.type===c.Z.AVATAR_DECORATION,"ts-match already checked the type"),(0,a.jsx)(u.Avatar,{size:u.AvatarSizes.SIZE_120,src:j,avatarDecoration:W,className:B.avatarDecoration,"aria-label":o.name}))).with(c.Z.BUNDLE,()=>(0,a.jsx)("div",{className:B.bundlePreview,children:(0,a.jsx)(O.d,{product:o,user:H,isPurchased:!1,isHighlighted:!0,profileEffectClassName:B.bundleProfileEffectCard})})).otherwise(()=>null)]}),(0,a.jsxs)("div",{className:B.collectedInfoContainer,children:[(0,a.jsxs)("div",{className:B.collectedTextContainer,children:[(0,a.jsx)(u.Heading,{variant:"heading-lg/bold",children:M.Z.Messages.COLLECTIBLES_YOU_COLLECTED.format({itemName:o.name})}),(0,a.jsx)(u.Text,{variant:"text-sm/normal",children:(0,s.EQ)(null==o?void 0:o.type).with(c.Z.BUNDLE,()=>M.Z.Messages.COLLECTIBLES_PERMANENT_COLLECTION_BUNDLE).with(c.Z.PROFILE_EFFECT,()=>M.Z.Messages.COLLECTIBLES_PROFILE_EFFECT_PERMANENT_COLLECTION).otherwise(()=>M.Z.Messages.COLLECTIBLES_PERMANENT_COLLECTION)})]}),(0,y.x6)(o)?(0,a.jsxs)("div",{className:B.buttons,children:[(0,a.jsx)(u.Button,{color:ee?u.ButtonColors.PRIMARY:u.ButtonColors.BRAND,onClick:J,children:M.Z.Messages.USER_SETTINGS_EDIT_USER_PROFILE}),ee?(0,a.jsx)(u.Button,{onClick:q,children:M.Z.Messages.COLLECTIBLES_USE_NOW}):null]}):(0,a.jsx)(u.Button,{onClick:J,children:M.Z.Messages.COLLECTIBLES_USE_NOW})]}),(0,a.jsx)(u.ModalCloseButton,{onClick:l,className:B.modalCloseButton,withCircleBackground:!0})]}),!w&&!z&&(0,a.jsx)(N.Z,{confettiTarget:null!=R?R:G.current,confettiCanvas:P,sprites:(0,S.vK)(o.categorySkuId),colors:null==F?void 0:F.map(e=>e.toHexString())})]})};t.default=e=>{let{transitionState:t,product:n,onClose:l,analyticsLocations:i}=e,s=r.useRef(new o.qA),[c,d]=r.useState(null),f=(0,R.UY)(n.skuId);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.O_,{ref:d,className:B.confettiCanvas,environment:s.current}),(0,a.jsxs)(u.ModalRoot,{hideShadow:!0,transitionState:t,size:u.ModalSize.DYNAMIC,className:B.modalRoot,children:[null!=f&&(0,a.jsx)("img",{src:f.confettiAssetSrc,className:B.customConfetti,style:f.style,alt:"","aria-hidden":"true"}),(0,a.jsx)(u.ModalContent,{className:B.modalContent,children:(0,a.jsx)(P,{product:n,onClose:l,confettiCanvas:c,hideConfetti:null!=f,analyticsLocations:i})})]})]})}},372654:function(e,t,n){n.d(t,{ML:function(){return l},nH:function(){return i},vK:function(){return d},yV:function(){return o}});var a=n(180650),r=n(921948);let o=1060,l=e=>e*(0,r.Z)(),i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:180,{primary:n,secondary:a}=e;return"linear-gradient(".concat(t,"deg, ").concat(n.toHslString(),", ").concat(a.toHslString(),")")},s=[n(241371),n(448509)],c={["".concat(a.T.FANTASY)]:[n(709393),n(646584)],["".concat(a.T.ANIME)]:[n(647387),n(448509)],["".concat(a.T.BREAKFAST)]:[n(289901),n(402344)],["".concat(a.T.HALLOWEEN)]:[n(292006),n(799718)],["".concat(a.T.FALL)]:[n(432170),n(15888)],["".concat(a.T.WINTER)]:[n(304088),n(774694)],["".concat(a.T.MONSTERS)]:[n(16724),n(441506)]},d=e=>{var t;return null==e?s:null!==(t=c[e])&&void 0!==t?t:s}},616066:function(e,t,n){n.d(t,{R:function(){return v}});var a=n(735250);n(470079);var r=n(120356),o=n.n(r),l=n(979554),i=n(481060),s=n(1585),c=n(125988),d=n(998502),u=n(266386),f=n(689938),p=n(514174);let g=d.ZP.getEnableHardwareAcceleration()?i.AnimatedAvatar:i.Avatar,v=e=>{let{item:t,user:n,isHighlighted:r=!1,isPurchased:d=!1,avatarSize:v=i.AvatarSizes.SIZE_152,avatarPlaceholderSrc:C}=e,E=(0,s.y9)(v),h=(0,u.c)("AvatarDecorationPreview"),{avatarDecorationSrc:b,eventHandlers:m,avatarPlaceholderSrc:T}=(0,c.Z)({user:n,avatarDecorationOverride:(null==t?void 0:t.type)===l.Z.AVATAR_DECORATION?t:void 0,size:E,onlyAnimateOnHover:!r});return(0,a.jsx)(g,{...m,avatarDecoration:b,src:h&&r?null==n?void 0:n.getAvatarURL(void 0,152,!0):null!=C?C:T,imageClassName:h&&r?p.fadeInAvatarImg:void 0,className:o()(p.avatar,{[p.avatarPurchased]:d}),size:v,"aria-label":f.Z.Messages.USER_SETTINGS_AVATAR})}},216541:function(e,t,n){n.d(t,{d:function(){return v}});var a=n(735250);n(470079);var r=n(120356),o=n.n(r),l=n(780384),i=n(481060),s=n(410030),c=n(876917),d=n(328456),u=n(616066),f=n(937341),p=n(63243),g=n(244488);let v=e=>{let{product:t,isPurchased:n,isHighlighted:r,user:v,forCollectedModal:C,profileEffectClassName:E}=e,{firstProfileEffect:h,firstAvatarDecoration:b}=(0,d.R)(t),m=(0,s.ZP)(),T=(0,l.ap)(m);return(0,a.jsxs)("div",{className:f.container,children:[null!=h?(0,a.jsx)("div",{className:o()(f.profileEffectShopPreview,E),children:(0,a.jsx)(c.Z,{isHovering:r,profileEffectId:h.id,isPurchased:n,forCollectedModal:C,removeSetHeight:!0})}):null,null!=b?(0,a.jsx)("div",{className:f.avatarDecorationPreview,children:(0,a.jsx)(u.R,{item:b,user:v,avatarSize:i.AvatarSizes.SIZE_120,isPurchased:n,isHighlighted:r,avatarPlaceholderSrc:T?g:p})}):null]})}},642619:function(e,t,n){n.d(t,{H:function(){return o}});var a=n(735250);n(470079);var r=n(481060);let o=e=>{let{analyticsLocations:t,initialSelectedEffectId:o,guild:l}=e;(0,r.openModalLazy)(async()=>{let{default:e}=await n.e("55183").then(n.bind(n,191564));return n=>(0,a.jsx)(e,{...n,guild:l,initialSelectedEffectId:o,analyticsLocations:t})},{})}}}]);
//# sourceMappingURL=8f092d45de2cae9a902a.js.map