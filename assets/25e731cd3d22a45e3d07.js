"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["33053"],{503089:function(e,t,n){n.d(t,{$x:function(){return C},d7:function(){return T},w6:function(){return E}}),n(653041),n(390547),n(47120);var i=n(735250),s=n(470079),l=n(990547),r=n(692547),o=n(481060),a=n(213609),c=n(252618),u=n(243778),d=n(495065),h=n(126848),m=n(207874),p=n(585483),f=n(960048),b=n(410575),S=n(493544),v=n(981631),x=n(689938),g=n(44812);function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let j=Object.freeze({shouldPreventNavigation:!1,onPreventNavigation:null,sidebarOpen:!0}),C=1.4,E=15,T=2;function R(e){var t,n;let{section:s,setPreventNavigation:r,scrollerRef:o}=e;(0,a.Z)({type:l.ImpressionTypes.PANE,name:null==s?void 0:s.impressionName,properties:null==s?void 0:s.impressionProperties});let c=null!==(t=null==s?void 0:s.element)&&void 0!==t?t:v.VqG,u=null!==(n=null==s?void 0:s.elementProps)&&void 0!==n?n:{};return(0,i.jsx)(b.Z,{section:s.section,children:(0,i.jsx)(c,{...u,setPreventNavigation:r,refToScroller:o})})}class P extends s.PureComponent{componentDidMount(){this.getPredicateSections().forEach(e=>{let{notice:t}=e;if(null==t)return;let{stores:n}=t;null!=n&&n.forEach(e=>{e.addChangeListener(this.handleNoticeStoreUpdate),this._subscribedStores.push(e)})})}componentDidUpdate(e){let{section:t}=e;t!==this.props.section&&(this._intensity=C)}componentWillUnmount(){this._unmounted=!0,this._subscribedStores.forEach(e=>e.removeChangeListener(this.handleNoticeStoreUpdate)),this.props.sections.forEach(e=>{var t;return null===(t=e.onSettingsClose)||void 0===t?void 0:t.call(e)})}getPredicateSections(){return this.props.sections.filter(e=>null==e.predicate||e.predicate())}validNavigation(){var e;let{section:t}=this.props,{notice:n}=null!==(e=this.getPredicateSections().find(e=>t===e.section))&&void 0!==e?e:{};return null!=n&&n.stores.some(e=>e.showNotice()&&!(null!=e.canCloseEarly&&e.canCloseEarly()))?(p.S.dispatch(v.CkL.SHAKE_APP,{duration:300,intensity:this._intensity}),this._intensity=Math.min(this._intensity+T,E),p.S.dispatch(v.CkL.EMPHASIZE_NOTICE),!1):(this._intensity=C,!0)}renderSidebar(e){let{section:t,title:n,isUserSettingsSearchEnabled:s}=this.props,l=e.flatMap(e=>e.newIndicatorDismissibleContentTypes).filter(e=>null!=e),r=null!=t?t:e[0].section;return(0,i.jsx)(u.Z,{contentTypes:l,children:t=>{let{visibleContent:l}=t;return(0,i.jsxs)(o.TabBar,{selectedItem:r,onItemSelect:this.handleSetSection,orientation:"vertical","aria-label":n,children:[s?(0,i.jsx)(m.Z,{style:g.searchBar}):null,e.map((e,t)=>{if(null!=e.tabPredicate&&!e.tabPredicate())return null;switch(e.section){case S.ID.HEADER:return(0,i.jsx)(o.TabBar.Header,{children:e.label},t);case S.ID.DIVIDER:return(0,i.jsx)(o.TabBar.Separator,{},t);case S.ID.CUSTOM:var n;let s=null!==(n=e.element)&&void 0!==n?n:v.VqG;return(0,i.jsx)(s,{},t);default:return this.renderSettingsSectionTabBarItem(e,r===e.section,l)}})]})}})}renderNotice(e){let{theme:t}=this.props;if(null==e||null==e.notice)return null;let{stores:n,element:s}=e.notice;return null==n||n.some(e=>e.showNotice())?(0,i.jsx)(s,{theme:t}):null}render(){var e;let{sidebarTheme:t,section:n,title:s,onClose:l,hideSidebar:r}=this.props,o=this.getPredicateSections(),a=o.find(e=>e.section===n);if(null==a||null==n)return null;let u=null!==(e="string"==typeof a.label?a.label:a.ariaLabel)&&void 0!==e?e:s;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.yY,{location:s,subsection:u}),(0,i.jsx)(S.ZP,{sidebarTheme:t,scrollerRef:this.scrollerRef,section:n,sidebar:this.renderSidebar(o),content:(0,i.jsx)(R,{section:a,setPreventNavigation:this.setPreventNavigation,scrollerRef:this.scrollerRef}),mobileSidebarOpen:this.state.sidebarOpen,hideSidebar:r,toggleSidebar:()=>this.setState({sidebarOpen:!0}),contentType:a.type,notice:this.renderNotice(a),closeAction:null!=l?this.handleClose:void 0})]})}constructor(...e){super(...e),N(this,"_unmounted",!1),N(this,"_intensity",C),N(this,"_subscribedStores",[]),N(this,"scrollerRef",s.createRef()),N(this,"state",{...j,sidebarOpen:this.props.section!==v.oAB.SUBSCRIPTIONS&&this.props.section!==v.oAB.PROFILE_CUSTOMIZATION}),N(this,"setPreventNavigation",(e,t)=>{this.setState({shouldPreventNavigation:e,onPreventNavigation:t})}),N(this,"handleSetSection",e=>{let{onSetSection:t,sections:n}=this.props,{shouldPreventNavigation:i,onPreventNavigation:s}=this.state,l=()=>{var i;null==t||t(e);let{notice:s}=null!==(i=n.find(t=>e===t.section))&&void 0!==i?i:{},l=null!=s?s.stores:null;null!=l&&l.forEach(e=>{!this._subscribedStores.includes(e)&&(e.addChangeListener(this.handleNoticeStoreUpdate),this._subscribedStores.push(e))}),this.setState({...j,sidebarOpen:!1})};this.validNavigation()&&!i&&(l(),f.Z.addBreadcrumb({category:"settings",message:"Set section: ".concat(e)})),i&&null!=s&&s(l)}),N(this,"handleClose",()=>{if(this.validNavigation()){let{onClose:e}=this.props;null==e||e()}}),N(this,"handleNoticeStoreUpdate",()=>{if(!this._unmounted)this._intensity=C,this.forceUpdate()}),N(this,"renderSettingsSectionTabBarItem",(e,t,n)=>{let{section:s,label:l=null,ariaLabel:a,onClick:c,color:u,icon:m,className:p,newIndicator:f,newIndicatorDismissibleContentTypes:b,badgeCount:S,searchFilterCount:N}=e,j=null;null!=N&&N>0?j=(0,i.jsx)(o.NumberBadge,{count:N,disableColor:!0,className:g.searchFilterCount}):s===v.oAB.ACCOUNT&&this.props.isEligibleForPomelo?j=(0,i.jsx)(o.CircleExclamationPointIcon,{size:"custom",width:20,height:20,color:r.Z.colors.STATUS_WARNING.css}):s===v.oAB.INVENTORY&&null!=this.props.questsForBadge&&this.props.questsForBadge.length>0?j=(0,i.jsx)(d.R,{quests:this.props.questsForBadge}):null!=e.decoration?j=(0,i.jsx)(o.Text,{variant:"text-md/normal",color:"text-muted",children:e.decoration}):null!=n&&(null==b?void 0:b.includes(n))&&!t?j=null!=f?f:(0,i.jsx)(o.TextBadge,{text:x.Z.Messages.NEW}):null!=m?j=m:null!=S&&S>0&&(j=(0,i.jsx)(o.NumberBadge,{count:S}));let C=s===v.oAB.PREMIUM?(0,i.jsx)(h.Z,{label:l,isSelected:t,decoration:j}):null==j?l:(0,i.jsxs)("div",{className:g.tabBarItemContainer,children:[l,j]});return(0,i.jsx)(o.TabBar.Item,{color:u,id:s,onClick:c,className:p,"aria-label":a,children:C},s)})}}t.ZP=P},493544:function(e,t,n){n.d(t,{ID:function(){return C},NM:function(){return R},Xi:function(){return T},bT:function(){return a}});var i,s,l,r,o,a,c=n(735250),u=n(470079),d=n(120356),h=n.n(d),m=n(920906),p=n(608863),f=n(873546),b=n(215569),S=n(481060),v=n(110924),x=n(358085),g=n(792125),N=n(425493),j=n(576107);let C={HEADER:"HEADER",DIVIDER:"DIVIDER",CUSTOM:"CUSTOM"},E=u.createContext(null);class T extends(o=u.PureComponent){renderContent(){let{scrollerRef:e,...t}=this.props;return(0,c.jsx)("div",{className:j.customContainer,children:(0,c.jsx)(S.ListAuto,{...t,className:h()(j.customScroller,j.contentRegionScroller),ref:e})})}render(){return(0,c.jsx)("div",{className:j.customColumn,children:this.renderContent()})}}function R(e){let{children:t}=e;return(0,c.jsx)("div",{className:j.customColumn,children:(0,c.jsx)("div",{className:j.customContainer,children:(0,c.jsx)(S.ScrollerAuto,{className:h()(j.customScroller,j.contentRegionScroller),children:t})})})}l={paddingTop:60,paddingBottom:60},(s="defaultProps")in(i=T)?Object.defineProperty(i,s,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[s]=l,(r=a||(a={})).MINIMAL="minimal",r.CUSTOM="custom",r.DEFAULT="default",r.WIDE="wide";let P=Object.freeze({minimal:"contentColumnMinimal",custom:"contentColumnCustom",default:"contentColumnDefault",wide:"contentColumnWide"});function y(e){let{isMobile:t,mobileSidebarOpen:n,closeAction:i}=e,s=u.useRef(null);return null==i?null:(0,c.jsx)("div",{className:h()(j.toolsContainer,{[j.mobileToolsContainer]:t,[j.mobileSidebarTools]:t,[j.closeIconOnly]:!n,[j.isMobileAndroid]:!n&&!0===(0,x.isAndroidWeb)()}),ref:s,children:(0,c.jsx)(S.FocusRingScope,{containerRef:s,children:(0,c.jsx)("div",{className:j.tools,children:(0,c.jsx)(N.Z,{className:h()({[j.mobileToolsCloseIcon]:t}),closeAction:i,keybind:"ESC"})})})})}t.ZP=function(e){let{sidebar:t,content:n,notice:i,section:s,closeAction:l,sidebarTheme:r,contentType:o,scrollerRef:a,mobileSidebarOpen:d,toggleSidebar:x,hideSidebar:N=!1}=e,C=u.useRef(null),T=u.useRef(null),R=(0,v.Z)(s),I=(0,m.useTransition)(N,{from:{position:"absolute",opacity:0},enter:{opacity:1},reverse:N,config:m.config.stiff}),A=u.useCallback(e=>{C.current=e,null!=a&&(a.current=e)},[a]);u.useLayoutEffect(()=>{null!=C.current&&R!==s&&C.current.scrollTo({to:0})},[s,R,C]);let B=(0,c.jsx)(y,{isMobile:f.tq,mobileSidebarOpen:d,closeAction:l});function Z(){return null==i?null:(0,c.jsx)(S.SlideIn,{className:h()(j.noticeRegion,{[j.noticeRegionHiddenSidebar]:N}),children:i},s)}return(0,c.jsx)(c.Fragment,{children:I((e,i)=>(0,c.jsxs)(m.animated.div,{style:e,className:j.standardSidebarView,children:[!i&&(null==t?null:(0,c.jsx)("div",{className:h()(j.sidebarRegion,(0,g.Q)(r),{[j.flexFullWidth]:f.tq,[j.hidden]:f.tq&&!1===d}),children:(0,c.jsx)(S.AdvancedScrollerThin,{className:j.sidebarRegionScroller,fade:!0,children:(0,c.jsxs)("nav",{className:h()(j.sidebar,{[j.mobileSidebar]:f.tq}),children:[f.tq&&(0,c.jsx)("div",{className:j.mobileSidebarHeader,children:B}),t]})})})),function(){let e=null!=x&&null!=l&&d,t=f.tq&&(0,c.jsxs)("div",{className:h()(j.mobileContentHeader,{[j.hideHamburger]:!e}),children:[e&&(0,c.jsx)(p.r,{onClick:x}),B]});if("custom"===o)return(0,c.jsxs)(b.W,{component:"div",className:j.contentRegion,children:[t,n,!f.tq&&B,Z()]});let i=P[null!=o?o:"default"];return(0,c.jsxs)(b.W,{component:"div",className:h()(j.contentRegion,{[j.hidden]:f.tq&&!0===d}),children:[(0,c.jsxs)("div",{className:j.contentTransitionWrap,children:[t,(0,c.jsxs)(S.AdvancedScrollerAuto,{className:h()(j.contentRegionScroller,N?j.contentRegionHiddenSidebar:j.contentRegionShownSidebar),ref:A,children:[(0,c.jsx)(E.Provider,{value:C.current,children:(0,c.jsx)(S.TabBar.Panel,{id:s,className:h()(j.contentColumn,j[i],{[j.mobileContent]:f.tq}),ref:T,style:f.tq?{maxWidth:window.innerWidth}:void 0,children:N?n:(0,c.jsx)(S.FocusRingScope,{containerRef:T,children:n})})}),!f.tq&&B]})]}),Z()]})}()]}))})}},495065:function(e,t,n){n.d(t,{R:function(){return a}});var i=n(735250);n(470079);var s=n(481060),l=n(497505),r=n(602667),o=n(689938);function a(e){return(0,i.jsx)(r.A,{questOrQuests:e.quests,questContent:l.jn.GIFT_INVENTORY_SETTINGS_BADGE,children:e=>(0,i.jsx)("span",{ref:e,children:(0,i.jsx)(s.TextBadge,{text:o.Z.Messages.NEW})})})}},128277:function(e,t,n){n.d(t,{QH:function(){return l},Z7:function(){return r},yN:function(){return s}});let i=(0,n(652874).Z)(()=>({query:"",isActive:!1,selected:null}));function s(e){i.setState({query:e})}function l(e){i.setState({isActive:e})}function r(){return i().query}},126848:function(e,t,n){n.d(t,{Z:function(){return v}});var i=n(735250);n(470079);var s=n(120356),l=n.n(s),r=n(442837),o=n(650032),a=n(104494),c=n(639119),u=n(655525),d=n(52188),h=n(248042),m=n(924540),p=n(351402),f=n(170671),b=n(474936),S=n(751008);function v(e){let t,{decoration:n,label:s,isSelected:v}=e,x=(0,c.N)(),g=(0,a.Ng)(),N=(0,h.Vi)(),j=(0,r.e7)([p.Z],()=>p.Z.isLocalizedPromoEnabled)&&null==x&&null==n,{enabled:C}=o._.useExperiment({location:"UserSettingsPremiumLabel"},{autoTrackExposure:!1}),E=C&&(null==x?void 0:x.trial_id)===b.a7;return t=N?(0,i.jsx)(u.Z,{}):null!=g?(0,i.jsx)(m.GN,{isTabSelected:v,userDiscount:g,includesAmountOff:!1}):null==x||E?null!=n?n:j?(0,i.jsx)(d.k,{entryPoint:d.U.SettingsMenu}):(0,i.jsx)(f.Z,{isSelected:v}):(0,i.jsx)(m.$H,{isTabSelected:v,trialOffer:x}),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:l()(S.premiumLabel,{[S.selected]:(v||j)&&!N}),children:[s,t]}),(0,i.jsx)("div",{className:l()(S.background,{[S.auPromo]:j&&!v,[S.auPromoSelected]:j&&v,[S.selectedBackground]:!j&&!N&&v})})]})}},207874:function(e,t,n){n.d(t,{Z:function(){return c}});var i=n(735250),s=n(470079),l=n(461745),r=n(5967),o=n(128277),a=n(689938);function c(e){let{style:t}=e,n=(0,o.Z7)(),c=s.useCallback((e,t)=>{t.stopPropagation(),t.preventDefault(),(0,o.QH)(e)},[]),u=s.useCallback(()=>{(0,o.QH)(!1),(0,o.yN)("")},[]),d=s.useRef(null);return s.useEffect(()=>{let e=e=>{var t;let n=d.current,i=null===(t=(0,r.uB)(e))||void 0===t?void 0:t.activeElement;!(i!==d.current&&(0,r.VG)(i))&&(null==n||n.focus())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]),(0,i.jsx)("div",{style:{marginBottom:"8px"},children:(0,i.jsx)(l.ZP,{ref:d,size:l.ZP.Sizes.MEDIUM,query:n,onClear:u,onQueryChange:o.yN,placeholder:a.Z.Messages.SEARCH,className:t,inputProps:{"aria-label":a.Z.Messages.USER_SETTINGS_SEARCH_BAR,"aria-expanded":!0,onFocus:e=>c(!0,e),onBlur:e=>c(!1,e)}})})}}}]);
//# sourceMappingURL=25e731cd3d22a45e3d07.js.map