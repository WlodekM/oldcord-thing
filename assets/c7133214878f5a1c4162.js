"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["47939"],{332148:function(e,n,s){var t=s(544891),l=s(570140),i=s(346479),a=s(624453),r=s(668781),o=s(981631),d=s(689938);let u={async pinMessage(e,n){let{id:s,name:l}=e;await i.Z.unarchiveThreadIfNecessary(e.id),t.tn.put({url:o.ANM.PIN(s,n),oldFormErrors:!0}).catch(()=>{let n;n=e.isPrivate()?d.Z.Messages.PIN_MESSAGE_TOO_MANY_BODY_PRIVATE_CHANNEL.format({maxPins:o.tG9}):d.Z.Messages.PIN_MESSAGE_TOO_MANY_BODY.format({maxPins:o.tG9,channelName:l}),r.Z.show({title:d.Z.Messages.PIN_MESSAGE_TOO_MANY_TITLE,body:n,confirmText:d.Z.Messages.OKAY})})},async unpinMessage(e,n){await i.Z.unarchiveThreadIfNecessary(e.id),t.tn.del({url:o.ANM.PIN(e.id,n),oldFormErrors:!0}).catch(()=>r.Z.show({title:d.Z.Messages.UNPIN_MESSAGE_FAILED_TITLE,body:d.Z.Messages.UNPIN_MESSAGE_FAILED_BODY,confirmText:d.Z.Messages.TRY_AGAIN,cancelText:d.Z.Messages.CANCEL,onConfirm:u.unpinMessage.bind(u,e,n)}))},ackPins(e){l.Z.dispatch({type:"CHANNEL_PINS_ACK",channelId:e})},fetchPins(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=a.Z.getPinnedMessages(e);if(!!n||null==s||!s.loaded&&!s.loading)l.Z.dispatch({type:"LOAD_PINNED_MESSAGES",channelId:e}),t.tn.get({url:o.ANM.PINS(e),retries:2,oldFormErrors:!0}).then(n=>{l.Z.dispatch({type:"LOAD_PINNED_MESSAGES_SUCCESS",messages:n.body,channelId:e})},()=>{l.Z.dispatch({type:"LOAD_PINNED_MESSAGES_FAILURE",channelId:e})})}};n.Z=u},257559:function(e,n,s){s(789020),s(47120);var t=s(735250),l=s(470079),i=s(120356),a=s.n(i),r=s(481060),o=s(332148),d=s(904245),u=s(933557),c=s(372900),E=s(726521),g=s(294218),m=s(699516),M=s(594174),f=s(387204),_=s(630388),N=s(970257),h=s(981631),I=s(689938),Z=s(924707);function A(e,n,s){return n in e?Object.defineProperty(e,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[n]=s,e}class p extends l.PureComponent{render(){let e,n;let{report:s}=this.state,{channel:l,message:i,showContextMenuHint:a,...o}=this.props,d=l.type===h.d4z.GUILD_ANNOUNCEMENT&&(0,_.yE)(i.flags,h.iLy.CROSSPOSTED);return a&&(e=(0,t.jsx)(f.Z,{className:Z.spacingTop,children:I.Z.Messages.DELETE_MESSAGE_CONTEXT_MENU_HINT.format()})),(0,N.vc)(i)&&(n=(0,t.jsx)(r.FormSwitch,{value:s,onChange:this.handleToggleReport,hideBorder:!0,className:Z.spacingTop,children:I.Z.Messages.DELETE_MESSAGE_REPORT})),(0,t.jsx)(c.Z.Provider,{value:l.guild_id,children:(0,t.jsxs)(r.ConfirmModal,{header:d?I.Z.Messages.MODIFY_FOLLOWED_NEWS_HEADER:I.Z.Messages.DELETE_MESSAGE_TITLE,confirmText:I.Z.Messages.DELETE,cancelText:I.Z.Messages.CANCEL,onConfirm:this.handleDelete,...o,children:[(0,t.jsx)(r.Text,{variant:"text-md/normal",className:Z.spacing,children:d?I.Z.Messages.DELETE_FOLLOWED_NEWS_BODY:I.Z.Messages.DELETE_MESSAGE_BODY}),(0,t.jsx)("div",{className:Z.message,children:(0,t.jsx)(g.Z,{channel:l,message:i,disableInteraction:!0})}),n,e]})})}constructor(...e){super(...e),A(this,"state",{report:!1}),A(this,"handleDelete",()=>{let{report:e}=this.state,{channel:n,message:s}=this.props;e?(0,E.ak)(s,"message_delete_alert",()=>d.Z.deleteMessage(n.id,s.id)):d.Z.deleteMessage(n.id,s.id)}),A(this,"handleToggleReport",e=>{this.setState({report:e})})}}n.Z={confirmPin:function(e,n){(0,r.openModal)(s=>{let l;let i=(0,u.F6)(e,M.default,m.Z);return l=e.isPrivate()?I.Z.Messages.PIN_MESSAGE_BODY_PRIVATE_CHANNEL:I.Z.Messages.PIN_MESSAGE_BODY.format({channelName:i}),(0,t.jsx)(c.Z.Provider,{value:e.guild_id,children:(0,t.jsxs)(r.ConfirmModal,{header:I.Z.Messages.PIN_MESSAGE_TITLE,confirmText:I.Z.Messages.PIN_CONFIRM,cancelText:I.Z.Messages.CANCEL,confirmButtonColor:r.Button.Colors.BRAND,onConfirm:()=>o.Z.pinMessage(e,n.id),...s,children:[(0,t.jsx)(r.Text,{variant:"text-md/normal",className:Z.spacing,children:l}),(0,t.jsx)("div",{className:Z.message,children:(0,t.jsx)(g.Z,{channel:e,message:n,animateAvatar:!1,disableInteraction:!0})})]})})})},confirmUnpin:function(e,n){(0,r.openModal)(s=>(0,t.jsx)(c.Z.Provider,{value:e.guild_id,children:(0,t.jsxs)(r.ConfirmModal,{header:I.Z.Messages.UNPIN_MESSAGE_TITLE,confirmText:I.Z.Messages.UNPIN_CONFIRM,cancelText:I.Z.Messages.CANCEL,onConfirm:()=>o.Z.unpinMessage(e,n.id),...s,children:[(0,t.jsx)(r.Text,{variant:"text-md/normal",className:Z.spacing,children:I.Z.Messages.UNPIN_MESSAGE_BODY}),(0,t.jsx)("div",{className:a()(Z.message,Z.spacing),children:(0,t.jsx)(g.Z,{channel:e,message:n,disableInteraction:!0})}),(0,t.jsx)(f.Z,{children:I.Z.Messages.UNPIN_MESSAGE_CONTEXT_MENU_HINT.format()})]})}))},confirmDelete:function(e,n){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,r.openModal)(l=>(0,t.jsx)(p,{channel:e,message:n,showContextMenuHint:s,...l}))},confirmEdit:function(e,n,s){(0,r.openModal)(l=>(0,t.jsx)(r.ConfirmModal,{header:I.Z.Messages.MODIFY_FOLLOWED_NEWS_HEADER,confirmText:I.Z.Messages.CONFIRM,cancelText:I.Z.Messages.CANCEL,confirmButtonColor:r.Button.Colors.BRAND,onConfirm:()=>d.Z.editMessage(e,n,{content:s}),...l,children:(0,t.jsx)(r.Text,{variant:"text-md/normal",className:Z.spacing,children:I.Z.Messages.EDIT_FOLLOWED_NEWS_BODY})}))}}},17165:function(e,n,s){var t=s(735250);s(470079);var l=s(481060),i=s(208186);n.Z=()=>(0,t.jsx)("div",{className:i.loadingWrapper,children:(0,t.jsx)(l.Dots,{dotRadius:4,themed:!0})})},276022:function(e,n,s){s.d(n,{Z:function(){return M}}),s(653041);var t=s(735250),l=s(470079),i=s(442837),a=s(481060),r=s(139387),o=s(230711),d=s(213459),u=s(434404),c=s(430824),E=s(496675),g=s(981631),m=s(689938);function M(e){let{user:n,guildId:s,channel:M,context:f}=e,_=c.Z.getGuild(s),N=(0,i.e7)([E.Z],()=>null!=_?E.Z.can(g.Plq.MANAGE_GUILD,_):null),h=(0,d.em)(M,!0,!0),I=(0,d.PL)(!0,!0),{isUserApp:Z,isGuildApp:A}=l.useMemo(()=>{var e,s,t,l;if((null==n?void 0:n.id)==null)return{isGuildApp:!1,isUserApp:!1};let i=Object.values(null!==(t=null===(e=h.result)||void 0===e?void 0:e.sections)&&void 0!==t?t:{}),a=Object.values(null!==(l=null===(s=I.result)||void 0===s?void 0:s.sections)&&void 0!==l?l:{});return{isGuildApp:i.some(e=>{var s;return(null===(s=e.descriptor.application)||void 0===s?void 0:s.id)===(null==n?void 0:n.id)}),isUserApp:a.some(e=>{var s;return(null===(s=e.descriptor.application)||void 0===s?void 0:s.id)===(null==n?void 0:n.id)})}},[h,I,null==n?void 0:n.id]),p=l.useCallback(()=>{if((null==_?void 0:_.id)!=null)u.Z.open(_.id,g.pNK.INTEGRATIONS),r.Z.setSection(g.b4C.APPLICATION,null==n?void 0:n.id)},[null==n?void 0:n.id,null==_?void 0:_.id]),S=l.useCallback(()=>{o.Z.open(g.oAB.AUTHORIZED_APPS)},[]),v=f===g.IlC.POPOUT;if(!(null==n?void 0:n.bot)||!N||v||!A&&!Z)return null;let C=[];return A&&C.push((0,t.jsx)(a.MenuItem,{id:"manage-integration",label:m.Z.Messages.MANAGE_INTEGRATION,action:p},"manage-integration")),Z&&C.push((0,t.jsx)(a.MenuItem,{id:"manage-authorized-app",label:m.Z.Messages.MANAGE_AUTHORIZED_APP,action:S},"manage-authorized-app")),C}},449751:function(e,n,s){s.d(n,{Z:function(){return u}});var t=s(735250);s(470079);var l=s(852229),i=s(481060),a=s(626135),r=s(572004),o=s(981631),d=s(689938);function u(e,n){return r.wS&&e.type!==o.uaV.GUILD_INVITE_REMINDER?(0,t.jsx)(i.MenuItem,{id:"copy-link",label:d.Z.Messages.COPY_MESSAGE_LINK,icon:i.LinkIcon,action:()=>{(0,l.J)("".concat(location.protocol,"//").concat(location.host).concat(o.Z5c.CHANNEL(n.guild_id,n.id,e.id))),a.default.track(o.rMx.MESSAGE_LINK_COPIED,{message_id:e.id,channel:e.channel_id})}}):null}},601184:function(e,n,s){s.d(n,{Z:function(){return g}});var t=s(735250);s(470079);var l=s(442837),i=s(481060),a=s(904245),r=s(257559),o=s(665906),d=s(496675),u=s(594174),c=s(981631),E=s(689938);function g(e,n){let s=(0,l.e7)([u.default],()=>u.default.getCurrentUser()),g=(0,o.$R)(n),m=(0,l.e7)([d.Z],()=>d.Z.can(c.Plq.MANAGE_MESSAGES,n),[n]),M=m||null!=s&&e.canDeleteOwnMessage(s.id);return e.state===c.yb.SENDING||!M||c.V$x.UNDELETABLE.has(e.type)||!g?null:(0,t.jsx)(i.MenuItem,{id:"delete",label:E.Z.Messages.DELETE_MESSAGE,action:function(s){e.state===c.yb.SEND_FAILED?a.Z.deleteMessage(n.id,e.id,!0):s.shiftKey?a.Z.deleteMessage(n.id,e.id):r.Z.confirmDelete(n,e,!0)},color:"danger",icon:i.TrashIcon})}},168405:function(e,n,s){s.d(n,{Z:function(){return o}});var t=s(735250);s(470079);var l=s(481060),i=s(665906),a=s(50284),r=s(689938);function o(e,n){return(0,i.$R)(n)?(0,t.jsx)(l.MenuItem,{id:"mark-unread",label:r.Z.Messages.MARK_UNREAD,action:()=>(0,a.Z)(n.id,e.id),icon:l.ChatMarkUnreadIcon}):null}},36998:function(e,n,s){s.d(n,{v:function(){return i}});var t=s(944486),l=s(176505);function i(){var e;let n=null!==(e=t.Z.getCurrentlySelectedChannelId())&&void 0!==e?e:void 0;return null!=n&&(0,l.AB)(n)?{channel_static_route:n}:{channel_id:n}}},26737:function(e,n,s){s.d(n,{Z:function(){return o}});var t=s(735250);s(470079);var l=s(481060),i=s(358085),a=s(998502),r=s(689938);function o(e,n){return i.isPlatformEmbedded&&(null==e?void 0:e.length)!==0?(0,t.jsx)(l.MenuItem,{id:"copy",label:r.Z.Messages.COPY,hint:(0,i.isMac)()?"âŒ˜C":"Ctrl+C",action:()=>{a.ZP.copy(e),null==n||n.focus()}}):null}},905041:function(e,n,s){s.d(n,{Z:function(){return f}});var t=s(735250);s(470079);var l=s(481060),i=s(829883),a=s(976853),r=s(378233),o=s(902676),d=s(626135),u=s(49012),c=s(358085),E=s(998502),g=s(36998),m=s(981631),M=s(689938);function f(e,n,s,f){let _=(0,a.Z)(null==s?void 0:s.getChannelId());if(!c.isPlatformEmbedded||null==e||""===e||_||(null==f?void 0:f.shouldHideMediaOptions)===!0||null!=e&&null!=(0,r.B0)(e)||null!=e&&(0,i.zt)(e))return null;let N=(0,o.F)(e),h=s=>{d.default.track(m.rMx.CONTEXT_MENU_LINK_OPENED,{hostname:N,...(0,g.v)()}),(0,u.q)({href:e,trusted:(0,u.r)(e,n),shouldConfirm:!0},s)};return[(0,t.jsx)(l.MenuItem,{id:"copy-native-link",label:M.Z.Messages.COPY_LINK,action:()=>{d.default.track(m.rMx.CONTEXT_MENU_LINK_COPIED,{hostname:N,...(0,g.v)()}),E.ZP.copy(e)}},"copy-native-link"),(0,t.jsx)(l.MenuItem,{id:"open-native-link",label:M.Z.Messages.OPEN_LINK,action:e=>h(e)},"open-native-link")]}},89013:function(e,n,s){s.d(n,{Z:function(){return E}});var t=s(735250),l=s(470079),i=s(512722),a=s.n(i),r=s(481060),o=s(626135),d=s(358085),u=s(981631),c=s(689938);function E(e){let n=l.useCallback(()=>{a()(null!=e,"text cannot be null"),o.default.track(u.rMx.MESSAGE_MENU_GOOGLE_SEARCHED),window.open("https://www.google.com/search?q=".concat(encodeURIComponent(e)),"_blank")},[e]);return d.isPlatformEmbedded&&null!=e&&(null==e?void 0:e.length)!==0?[(0,t.jsx)(r.MenuItem,{id:"search-google",label:c.Z.Messages.SEARCH_WITH_GOOGLE,action:n},"search-google")]:null}},570870:function(e,n,s){var t=s(735250),l=s(470079),i=s(512722),a=s.n(i),r=s(442837),o=s(481060),d=s(10718),u=s(667204),c=s(826298),E=s(17165),g=s(276022),m=s(430824),M=s(594174),f=s(689079),_=s(689938),N=s(878859);n.Z=e=>{let n,{commandType:s,commandTargetId:i,channel:h,guildId:I,onHeightUpdate:Z,context:A}=e,p=(0,r.e7)([m.Z],()=>m.Z.getGuild(null!=I?I:h.guild_id)),S=(0,r.e7)([M.default],()=>M.default.getUser(i)),v=(0,g.Z)({user:S,guildId:null==p?void 0:p.id,channel:h,context:A}),{commands:C,sectionDescriptors:T,loading:O}=d.wi(h,{commandType:s},{limit:f.lr}),{sections:P}=l.useMemo(()=>{let e={};return T.forEach(n=>{e[n.id]=n}),{sections:e}},[T]),x=l.useRef(O.current);l.useEffect(()=>{O.current!==x.current&&(x.current=O.current,null==Z||Z())},[O,Z]);let D=l.useCallback(e=>{a()(null!=h,"menu item should not show if channel is null");let n=P[e.applicationId],s=null!=n?(0,c.ky)(n):void 0;return(0,t.jsx)(o.MenuItem,{id:e.id,label:e.displayName,showIconFirst:!0,icon:()=>null!=s?(0,t.jsx)(s,{channel:h,section:n,width:18,height:18,selectable:!1}):null,action:()=>{(0,u.Z)({command:e,optionValues:{},context:{channel:h,guild:p},commandTargetId:i})}},e.id)},[h,p,i,P]);return O.current?n=(0,t.jsx)(o.MenuItem,{id:"menu-commands-placeholder",render:()=>(0,t.jsx)(E.Z,{}),disabled:!0},"menu-commands-placeholder"):(n=0===C.length?(0,t.jsx)(o.MenuItem,{id:"menu-commands-empty",label:_.Z.Messages.APPLICATION_COMMAND_NO_COMMANDS,disabled:!0},"menu-commands-empty"):C.map(D),null!=v&&(n=(0,t.jsxs)(t.Fragment,{children:[n,(0,t.jsx)(o.MenuSeparator,{},"separator"),v]}))),(0,t.jsx)(o.MenuItem,{id:"apps",label:_.Z.Messages.APPS,listClassName:N.list,children:n})}},624453:function(e,n,s){s(733860);var t,l,i,a,r=s(392711),o=s.n(r),d=s(442837),u=s(570140),c=s(163268),E=s(786761),g=s(706454),m=s(592125),M=s(271383),f=s(430824),_=s(375954),N=s(699516),h=s(594174);let I={};function Z(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],t=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=m.Z.getChannel(e),i=null!=l?l.getGuildId():null;return{id:e,messages:n.map(e=>(0,E.e5)(e)),guildId:i,loaded:s,loading:t}}function A(e){let{channel:n}=e;delete I[n.id]}function p(){o().forEach(I,e=>{e.messages=e.messages.map(e=>e.set("blocked",N.Z.isBlockedForMessage(e)))})}class S extends(t=d.ZP.Store){initialize(){this.waitFor(m.Z,f.Z,M.ZP,_.Z,h.default,g.default)}getPinnedMessages(e){var n;return null!==(n=I[e])&&void 0!==n?n:void 0}loaded(e){return null!=I[e]&&I[e].loaded}}a="ChannelPinsStore",(i="displayName")in(l=S)?Object.defineProperty(l,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):l[i]=a,n.Z=new S(u.Z,{CONNECTION_OPEN:function(){I={}},GUILD_DELETE:function(e){let{guild:n}=e;I=o()(I).filter(e=>e.guildId!==n.id).keyBy("id").value()},MESSAGE_UPDATE:function(e){let n=e.message.id,s=e.message.channel_id;if(null==s)return!1;let t=I[s];if(null==t&&!e.message.pinned)return!1;if(null==e.message.author){if(null!=t){let l=o().findIndex(t.messages,e=>e.id===n);if(l>=0){let n=t.messages[l],i=(0,E.wi)(n,e.message);if(i!==n){let e=t.messages.slice();e[l]=i,I[s].messages=e}}}return}if(e.message.pinned){if(null==t){t=Z(s,[e.message],!1),I[s]=t;return}t.messages=t.messages.slice();let l=o().findIndex(t.messages,e=>e.id===n);-1===l?t.messages.unshift((0,E.e5)(e.message)):t.messages[l]=(0,E.wi)(t.messages[l],e.message),I[s]=t}else{if(null==t)return;let e=o().findIndex(t.messages,e=>e.id===n);if(-1===e)return;t.messages=t.messages.slice(),t.messages.splice(e,1),I[s]=t}},MESSAGE_DELETE:function(e){let{id:n,channelId:s}=e,t=I[s];if(null==t||0===o().remove(t.messages,e=>e.id===n).length)return!1;t.messages=t.messages.slice(),I[s]=t},MESSAGE_DELETE_BULK:function(e){let{ids:n,channelId:s}=e,t=I[s];if(null!=t)t.messages=t.messages.filter(e=>-1===n.indexOf(e.id))},LOAD_PINNED_MESSAGES:function(e){let{channelId:n}=e;I[n]=Z(n,[],!1,!0)},LOAD_PINNED_MESSAGES_SUCCESS:function(e){let{channelId:n,messages:s}=e;I[n]=Z(n,s,!0)},LOAD_PINNED_MESSAGES_FAILURE:function(e){let{channelId:n}=e;delete I[n]},CHANNEL_DELETE:A,THREAD_DELETE:A,RELATIONSHIP_ADD:p,RELATIONSHIP_REMOVE:p,MESSAGE_EXPLICIT_CONTENT_SCAN_TIMEOUT:function(e){let{messageId:n,channelId:s}=e,t=I[s];if(null==t)return;let l=o().findIndex(t.messages,e=>e.id===n);if(-1!==l)t.messages=t.messages.slice(),t.messages[l]=(0,c.Cm)(t.messages[l]),I[s]=t}})},970257:function(e,n,s){s.d(n,{a4:function(){return o},vc:function(){return d}});var t=s(592125),l=s(650774),i=s(496675),a=s(594174),r=s(981631);function o(e){return null!=e&&function(e){if(null==e)return!1;let n=e.id,s=a.default.getCurrentUser();return null!=s&&s.id!==n&&!0!==e.system&&!0}(e.author)}function d(e){return null!=e&&o(e)&&function(e){let n=t.Z.getChannel(e);if(null==n)return!1;if(n.type===r.d4z.DM||n.type===r.d4z.GROUP_DM)return!0;if(i.Z.canWithPartialContext(r.Plq.MANAGE_MESSAGES,{channelId:e})){let e=l.Z.getMemberCount(n.getGuildId());return null!=e&&e>=50}return!1}(e.getChannelId())}}}]);
//# sourceMappingURL=c7133214878f5a1c4162.js.map