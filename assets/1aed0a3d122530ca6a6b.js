"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["3741"],{177475:function(e,n,t){e.exports=t.p+"a64ea373b47e9a224206.svg"},339340:function(e,n,t){t.r(n),t.d(n,{VOICE_CHANNEL_STATUS_MODAL_KEY:function(){return C},default:function(){return S}}),t(47120),t(757143);var l=t(735250),u=t(470079),i=t(399606),r=t(343817),a=t(481060),o=t(787014),s=t(12498),d=t(541716),c=t(752305),E=t(893718),N=t(19780),_=t(285952),f=t(626135),Z=t(981631),I=t(689938),T=t(685782);let C="VoiceChannelStatusModal";function S(e){let{channel:n,transitionState:t,onClose:S}=e,A=(0,i.e7)([s.Z],()=>s.Z.getChannelStatus(n)),g=(0,i.e7)([N.Z],()=>N.Z.getMediaSessionId()),[h,O]=u.useState(null!=A?A:""),[m,L]=u.useState(!1),[v,M]=u.useState(null),P=h.length>500;u.useEffect(()=>{f.default.track(Z.rMx.OPEN_MODAL,{type:"Voice Channel Topic Modal",guild_id:n.guild_id})},[n.guild_id]);let p=e=>{M(new r.Hx(e,e.status).getAnyErrorMessage())},V=async e=>{h===A&&S(),null==e||e.preventDefault(),M(null),L(!0);let t=h.length,l=h.replace(/<(a)?:[^:]+:[0-9]+>/g,"--").length;try{let e=await o.ZP.updateVoiceChannelStatus(n.id,h);204===e.status?(f.default.track(Z.rMx.VOICE_CHANNEL_TOPIC_SET,{guild_id:n.guild_id,channel_id:n.id,media_session_id:g,raw_length:t,text_length:l}),S()):p(e)}catch(e){p(e)}L(!1)},[D,G]=u.useState((0,c.JM)(h)),y=async()=>(!P&&!m&&await V(),Promise.resolve({shouldClear:!1,shouldRefocus:!0}));return(0,l.jsx)("form",{onSubmit:V,className:T.form,children:(0,l.jsxs)(a.ModalRoot,{transitionState:t,size:a.ModalSize.SMALL,children:[(0,l.jsxs)(a.ModalContent,{children:[(0,l.jsxs)(a.ModalHeader,{direction:_.Z.Direction.VERTICAL,className:T.modalHeader,separator:!1,children:[(0,l.jsx)(a.ModalCloseButton,{className:T.closeButton,onClick:S}),(0,l.jsx)("div",{className:T.headerImage}),(0,l.jsx)(a.FormTitle,{tag:"h1",className:T.title,children:I.Z.Messages.VOICE_CHANNEL_STATUS_MODAL_TITLE}),(0,l.jsx)(a.Text,{color:"header-secondary",variant:"text-sm/normal",children:I.Z.Messages.VOICE_CHANNEL_STATUS_MODAL_SUBTITLE})]}),(0,l.jsxs)(a.FormSection,{className:T.inputSection,title:I.Z.Messages.VOICE_CHANNEL_STATUS,children:[(0,l.jsx)(E.Z,{innerClassName:T.textArea,textValue:h,richValue:D,placeholder:I.Z.Messages.VOICE_CHANNEL_STATUS_MODAL_PREFILL_CHANNEL.format({channelName:n.name}),focused:!0,channel:n,onChange:(e,n,t)=>{O(n),G(t)},onSubmit:y,type:d.I.VOICE_CHANNEL_STATUS,canMentionRoles:!1,canMentionChannels:!1,allowNewLines:!1,parentModalKey:C,maxCharacterCount:500,showRemainingCharsAfterCount:250,emojiPickerCloseOnModalOuterClick:!0}),null!=v?(0,l.jsx)(a.FormErrorBlock,{className:T.error,children:v}):null]})]}),(0,l.jsxs)(a.ModalFooter,{justify:_.Z.Justify.BETWEEN,direction:_.Z.Direction.HORIZONTAL,children:[(0,l.jsx)(a.Button,{color:a.Button.Colors.PRIMARY,onClick:S,children:I.Z.Messages.CANCEL}),(0,l.jsx)(a.Button,{onClick:V,submitting:m,className:T.button,disabled:P,children:I.Z.Messages.VOICE_CHANNEL_STATUS_MODAL_SET_STATUS})]})]})})}},916069:function(e,n,t){t.d(n,{Z:function(){return r}});var l=t(442837),u=t(914010),i=t(981631);function r(){return(0,l.e7)([u.Z],()=>u.Z.getGuildId())===i.I_8}},951206:function(e,n,t){t.d(n,{F:function(){return d}});var l=t(512722),u=t.n(l),i=t(846027),r=t(287734),a=t(131951),o=t(254238),s=t(893387);function d(e,n){var t;let l=null!==(t=e.sessionId)&&void 0!==t?t:"";(0,o._)(l),(0,o.s6)();let d=null!=n?n:e.channelId;u()(null!=d,"attempted to transfer to unknown channel"),e.selfMute!==a.Z.isSelfMute()&&i.Z.toggleSelfMute(),e.selfDeaf!==a.Z.isSelfDeaf()&&i.Z.toggleSelfDeaf(),(0,s.Z)(d,"discord_client",l),r.default.selectVoiceChannel(d,!1)}},446226:function(e,n,t){t.d(n,{Z:function(){return a}});var l=t(442837),u=t(314897),i=t(979651),r=t(258609);function a(){let e=(0,l.e7)([u.default],()=>u.default.getId()),n=(0,l.e7)([r.Z],()=>r.Z.getRemoteSessionId());return(0,l.e7)([i.Z],()=>{var t;return null!==(t=i.Z.getVoiceStateForSession(e,n))&&void 0!==t?t:void 0})}},937393:function(e,n,t){t.d(n,{Z:function(){return a}});var l=t(442837),u=t(553795),i=t(823379),r=t(981631);function a(){return(0,l.Wu)([u.Z],()=>[u.Z.getAccount(null,r.ABu.XBOX),u.Z.getAccount(null,r.ABu.PLAYSTATION),u.Z.getAccount(null,r.ABu.PLAYSTATION_STAGING)].filter(i.lm))}},721351:function(e,n,t){t.d(n,{Z:function(){return a}});var l=t(481060),u=t(374129),i=t(639351),r=t(927923);function a(e){return null!=e?(0,l.makeIconCompat)(e===r.YE.XBOX?i.Z:u.Z):l.MobilePhoneControllerIcon}},420529:function(e,n,t){t.d(n,{Z:function(){return Z}});var l=t(735250);t(470079);var u=t(399606),i=t(481060),r=t(231757),a=t(397639),o=t(19780),s=t(979651),d=t(951206),c=t(446226),E=t(937393),N=t(721351),_=t(981631),f=t(689938);function Z(e){let n=(0,u.e7)([o.Z],()=>o.Z.getChannelId()===e.id),Z=(0,c.Z)(),I=(null==Z?void 0:Z.channelId)===e.id,T=(0,a.V)(e)&&!e.isPrivate(),C=(0,a.Z)(e),S=!(0,u.e7)([s.Z],()=>s.Z.isInChannel(e.id))&&C||T,A=(0,E.Z)();if(!I&&0===A.length)return null;let g=n=>{if(!n.twoWayLink||n.revoked){(0,r.Z)({platformType:n.type,location:"Console Transfer Item"});return}n.type===_.ABu.XBOX?(0,i.openModalLazy)(async()=>{let{default:n}=await Promise.all([t.e("49368"),t.e("522")]).then(t.bind(t,200623));return t=>(0,l.jsx)(n,{...t,channel:e})}):(n.type===_.ABu.PLAYSTATION||n.type===_.ABu.PLAYSTATION_STAGING)&&(0,i.openModalLazy)(async()=>{let{default:u}=await t.e("638").then(t.bind(t,543974));return t=>(0,l.jsx)(u,{...t,platform:n.type,channel:e})})};return(0,l.jsx)(l.Fragment,{children:I?(0,l.jsx)(i.MenuItem,{label:f.Z.Messages.TRANSFER_VOICE_TO_DEVICE,id:"handoff",action:()=>{(0,d.F)(Z)},icon:(0,N.Z)(void 0),disabled:S}):A.map(e=>(0,l.jsx)(i.MenuItem,{id:"transfer-".concat(e.type,"-").concat(e.id),label:function(e,n){if(e===_.ABu.XBOX)return n?f.Z.Messages.TRANSFER_VOICE_TO_XBOX:f.Z.Messages.JOIN_ON_XBOX;if(e===_.ABu.PLAYSTATION)return n?f.Z.Messages.CONSOLE_PLAYSTATION_TRANSFER_VOICE:f.Z.Messages.CONSOLE_PLAYSTATION_JOIN_VOICE;if(e===_.ABu.PLAYSTATION_STAGING)return n?f.Z.Messages.CONSOLE_PLAYSTATION_STAGING_TRANSFER_VOICE:f.Z.Messages.CONSOLE_PLAYSTATION_STAGING_JOIN_VOICE}(e.type,n),action:()=>g(e),icon:(0,N.Z)(e.type),disabled:S},e.id))})}},658041:function(e,n,t){t.d(n,{M:function(){return a}});var l=t(913527),u=t.n(l),i=t(709054),r=t(765305);function a(e,n,t,l){let a=u()(),o=new Date(e.scheduled_start_time).getTime(),s={start:o-r.VF,end:o};if(a.isBetween(s.start,s.end)){if(null!=n){let e=u()(n),t=e.isBetween(s.start,s.end),i=e.isBetween(u()(o).subtract(r.zV,"days"),o);return t||i&&!l?void 0:r.X_.EVENT_STARTING_SOON}return r.X_.EVENT_STARTING_SOON}let d=i.default.extractTimestamp(e.id),c=Math.min((null!=t?t:d)+r.Fc,o);if(a.isBetween(d,c)&&null==n&&!l)return r.X_.NEW_EVENT}},835184:function(e,n,t){var l,u=t(442837),i=t(570140),r=t(314897),a=t(924301),o=t(658041),s=t(765305);function d(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}let c={},E={};function N(e){let n={...c};delete n[e],c=n;let t={...E};delete t[e],E=t}class _ extends(l=u.ZP.PersistedStore){initialize(e){if(null!=e){var n,t;c=null!==(n=e.upcomingEventDismissals)&&void 0!==n?n:{},E=null!==(t=e.upcomingEventSeenTimestamps)&&void 0!==t?t:{}}}getGuildEventNoticeDismissalTime(e){return c[e]}getAllEventDismissals(){return c}getUpcomingNoticeSeenTime(e){return E[e]}getAllUpcomingNoticeSeenTimes(){return E}getState(){return{upcomingEventDismissals:c,upcomingEventSeenTimestamps:E}}}d(_,"displayName","UpcomingEventNoticesStore"),d(_,"persistKey","UpcomingEventNotices"),n.Z=new _(i.Z,{UPCOMING_GUILD_EVENT_NOTICE_HIDE:function(e){let{eventId:n}=e,t={...c};t[n]=Date.now(),c=t},GUILD_SCHEDULED_EVENT_UPDATE:function(e){let{guildScheduledEvent:n}=e;(n.status===s.p1.CANCELED||n.status===s.p1.COMPLETED)&&N(n.id)},GUILD_SCHEDULED_EVENT_DELETE:function(e){let{guildScheduledEvent:n}=e;N(n.id)},GUILD_SCHEDULED_EVENT_USER_ADD:function(e){let{userId:n,guildEventId:t}=e;if(n!==r.default.getId())return;let l=a.ZP.getGuildScheduledEvent(t);if(null==l||l.status!==s.p1.SCHEDULED||null!=c[t])return;let u=E[t];if((0,o.M)(l,void 0,u,!1)===s.X_.NEW_EVENT){let e={...c};e[t]=Date.now(),c=e}},UPCOMING_GUILD_EVENT_NOTICE_SEEN:function(e){let{guildEventId:n}=e,t={...E};t[n]=Date.now(),E=t}})},554747:function(e,n,t){t.d(n,{Vm:function(){return O},ZP:function(){return A},eF:function(){return v},gM:function(){return h},k5:function(){return m},qY:function(){return g},sz:function(){return M},u1:function(){return L}}),t(47120),t(724458);var l=t(470079),u=t(442837),i=t(241155),r=t(592125),a=t(984933),o=t(430824),s=t(496675),d=t(70956),c=t(823379),E=t(924301),N=t(658041),_=t(835184),f=t(79874),Z=t(854698),I=t(765305),T=t(981631);let C=[],S=15*d.Z.Millis.MINUTE;function A(e,n){return(0,u.Wu)([o.Z,i.Z,E.ZP,s.Z,r.Z,a.ZP],()=>{let t=o.Z.getGuild(e);if(null==t)return C;if(t.hasFeature(T.oNc.HUB)){var l,u;let e=null===(l=a.ZP.getDefaultChannel(t.id))||void 0===l?void 0:l.id;return(null!==(u=i.Z.getEventDirectoryEntries(e))&&void 0!==u?u:[]).map(e=>{let n=e.scheduledEventId,t=E.ZP.getGuildScheduledEvent(n);return null!=t?t:i.Z.getCachedGuildScheduledEventById(n)}).filter(c.lm)}return E.ZP.getGuildScheduledEventsByIndex(null!=n?n:E.bN.GUILD_EVENT_UPCOMING(t.id)).filter(e=>{let n=e.channel_id;if(null==n)return!0;let t=r.Z.getChannel(n);return s.Z.can(T.Plq.VIEW_CHANNEL,t)})},[n,e])}function g(e){return(0,u.e7)([E.ZP,r.Z,s.Z],()=>{let n=r.Z.getChannel(e);if(!s.Z.can(T.Plq.VIEW_CHANNEL,n)||null==(null==n?void 0:n.guild_id))return null;let t=E.ZP.getGuildScheduledEventsByIndex(E.bN.CHANNEL_EVENT_ACTIVE(e));return t.length>0?t[0]:null},[e])}function h(e){let n=(0,u.Wu)([E.ZP],()=>E.ZP.getGuildScheduledEventsForGuild(e),[e]);return l.useMemo(()=>{let e=new Map;return n.forEach(n=>{let t=n.channel_id;null!=t&&e.set(t,n)}),e},[n])}function O(e){var n,t;let l=(n=e,(0,u.Wu)([E.ZP,r.Z,s.Z],()=>E.ZP.getGuildScheduledEventsByIndex(E.bN.GUILD_EVENT_UPCOMING(n)).filter(e=>{if(e.entity_type===I.WX.NONE||e.status!==I.p1.SCHEDULED)return!1;if(null==e.channel_id)return!0;let n=r.Z.getChannel(e.channel_id);return s.Z.can(T.Plq.VIEW_CHANNEL,n)}),[n])),i=(0,u.cj)([_.Z],()=>_.Z.getAllEventDismissals()),a=(0,u.cj)([_.Z],()=>_.Z.getAllUpcomingNoticeSeenTimes()),d=(0,u.cj)([E.ZP],()=>null==l?{}:l.reduce((e,n)=>{let t=(0,Z.DK)(n);return{...e,[n.id]:E.ZP.isInterestedInEventRecurrence(n.id,t)}},{}),[l]),c=(0,u.e7)([o.Z],()=>o.Z.getGuild(e)),f=null!=c&&!c.hasFeature(T.oNc.COMMUNITY)&&c.hasFeature(T.oNc.INTERNAL_EMPLOYEE_ONLY);if(null!=l&&null!=d&&f)for(let e=0;e<l.length;e++){;let n=l[e],u=i[n.id],r=a[n.id],o=null!==(t=d[n.id])&&void 0!==t&&t,s=(0,N.M)(n,u,r,o);if(null!=s)return{upcomingEvent:n,noticeType:s}}}function m(e){return(0,u.e7)([E.ZP,r.Z,s.Z],()=>E.ZP.getGuildScheduledEventsByIndex(E.bN.GUILD_EVENT_ACTIVE(e)).find(e=>{if(e.entity_type===I.WX.NONE||!(0,E.xt)(e))return!1;if(null==e.channel_id)return!0;let n=r.Z.getChannel(e.channel_id);return s.Z.can(T.Plq.VIEW_CHANNEL,n)}),[e])}function L(e){return(0,u.e7)([E.ZP],()=>E.ZP.getGuildScheduledEventsByIndex(E.bN.CHANNEL_EVENT_UPCOMING(e)),[e])}function v(e){return(0,u.e7)([r.Z,E.ZP],()=>{let n=E.ZP.getGuildScheduledEventsByIndex(E.bN.GUILD_EVENT_ACTIVE(e)).find(e=>null!=r.Z.getChannel(e.channel_id));return r.Z.getChannel(null==n?void 0:n.channel_id)},[e])}function M(e){let[n,t]=l.useState(()=>Date.now());l.useEffect(()=>{let e=setInterval(()=>{t(Date.now())},S);return()=>clearInterval(e)},[]);let i=(0,u.e7)([E.ZP],()=>null==e?[]:E.ZP.getGuildScheduledEventsByIndex(E.bN.CHANNEL_EVENT_UPCOMING(e)),[e,n]);return l.useMemo(()=>i.filter(e=>{let{startTime:n,endTime:t}=(0,f.Kq)(e),{withinStartWindow:l,diffMinutes:u}=(0,Z.ub)(n.toISOString(),null==t?void 0:t.toISOString());return e.status!==I.p1.ACTIVE&&l&&u<15}),[i])}},159300:function(e,n,t){t.d(n,{b:function(){return u}});var l=t(981631);function u(e,n,t,u){let i=null!=t?t:n;return null!=i&&e.can(l.Plq.CREATE_INSTANT_INVITE,i)||null!=n&&null!=n.vanityURLCode||(null==u?void 0:u.invite_code)!=null}},397639:function(e,n,t){t.d(n,{V:function(){return s},Z:function(){return d}});var l=t(442837),u=t(430824),i=t(496675),r=t(979651),a=t(934415),o=t(231338);function s(e){return(0,l.e7)([i.Z],()=>null==e||!i.Z.can(o.Pl.CONNECT,e),[e])}function d(e){return(0,l.e7)([r.Z,u.Z],()=>(0,a.rY)(e,r.Z,u.Z))}}}]);
//# sourceMappingURL=1aed0a3d122530ca6a6b.js.map