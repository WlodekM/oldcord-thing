"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["39227"],{863942:function(e,t,n){var r=n(22092);(0,n(192291).exportTypedArrayStaticMethod)("from",n(12367),r)},515695:function(e,t,n){e.exports=n.p+"450a761db3bfe89ca9b9.png"},2984:function(e,t,n){e.exports=n.p+"0e5029fd9cd4812b6712.svg"},575703:function(e,t,n){e.exports=n.p+"b9995525a52dc58aecf5.svg"},320830:function(e,t,n){n(47120);var r=n(735250),s=n(470079),i=n(954955),a=n.n(i),o=n(748780),l=n(873546),c=n(477690),u=n(481060),d=n(624138),h=n(983155);function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let p=(0,d.Mg)(c.Z.WAVE_SPLASH_RESPONSIVE_WIDTH_MOBILE),f={START:0,END:1},g={friction:10,tension:130};t.Z=function(e){return class extends s.Component{componentDidMount(){!l.tq&&(window.addEventListener("resize",this.handleResizeDebounced),this.handleResize())}componentWillUnmount(){clearTimeout(this.timeout),window.removeEventListener("resize",this.handleResizeDebounced)}componentWillAppear(e){this.state.shouldAnimate?this.animateTo(f.END,e):e()}componentWillEnter(e){this.state.shouldAnimate?(clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.animateTo(f.END,e),40)):e()}componentWillLeave(e){this.state.shouldAnimate?this.animateTo(f.START,e):e()}animateTo(e,t){o.Z.spring(this.anim,{toValue:e,...g}).start(t)}getAnimatedStyle(e){return this.state.shouldAnimate?{opacity:this.anim,transform:e?void 0:[{scale:this.anim.interpolate({inputRange:[0,1],outputRange:[1.05,1]})},{translateY:this.anim.interpolate({inputRange:[0,1],outputRange:["-70px","0px"]})},{translateZ:0}]}:null}render(){return(0,r.jsx)("div",{className:h.wrapper,children:(0,r.jsx)(u.AccessibilityPreferencesContext.Consumer,{children:t=>{let{reducedMotion:n}=t;return(0,r.jsx)(o.Z.div,{style:this.getAnimatedStyle(n.enabled),children:(0,r.jsx)(e,{...this.props})})}})})}constructor(...e){super(...e),_(this,"timeout",void 0),_(this,"anim",new o.Z.Value(f.START)),_(this,"state",{shouldAnimate:!l.tq}),_(this,"handleResize",()=>{let e=window.innerWidth>p;!this.state.shouldAnimate&&e&&this.anim.setValue(f.END),this.setState({shouldAnimate:e})}),_(this,"handleResizeDebounced",a()(this.handleResize,60))}}}},721751:function(e,t,n){let r;n(47120);var s=n(735250),i=n(470079),a=n(120356),o=n.n(a),l=n(873546),c=n(442837),u=n(481060),d=n(980591),h=n(605782),_=n(133853),p=n(568154),f=n(353926),g=n(703656),E=n(981631),m=n(453931);let I=n(575703),A=n(2984),N=[E.Z5c.LOGIN,E.Z5c.LOGIN_HANDOFF,E.Z5c.REGISTER,E.Z5c.INVITE(""),E.Z5c.GIFT_CODE(""),E.Z5c.GUILD_TEMPLATE_LOGIN(""),E.Z5c.GUILD_TEMPLATE(""),E.Z5c.DISABLE_EMAIL_NOTIFICATIONS,E.Z5c.DISABLE_SERVER_HIGHLIGHT_NOTIFICATIONS,E.Z5c.BILLING_PREMIUM_SUBSCRIBE,E.Z5c.BILLING_PAYMENT_SOURCES_CREATE,E.Z5c.BILLING_PAYMENTS,E.Z5c.BILLING_PREMIUM_SWITCH_PLAN,E.Z5c.BILLING_GUILD_SUBSCRIPTIONS_PURCHASE,E.Z5c.VERIFY,E.Z5c.VERIFY_HUB_EMAIL,E.Z5c.REJECT_IP,E.Z5c.REJECT_MFA,E.Z5c.AUTHORIZE_IP,E.Z5c.AUTHORIZE_PAYMENT,E.Z5c.RESET,E.Z5c.HANDOFF,E.Z5c.REPORT,E.Z5c.REPORT_SECOND_LOOK];function C(e){return N.some(t=>e.startsWith(t))}let T=e=>(r=e,e);function R(e){let{children:t}=e;switch(function(){let[e,t]=i.useState(!1),[n,s]=i.useState(true),a=function(){return null}(),o=(0,c.e7)([f.Z],()=>f.Z.hasLoadedExperiments);return((0,d.Z)(()=>{},300),void 0!==r)?r:!n&&o?(!e&&t(!0),T(function(e){return"default"}(a))):n?T("default"):"loading"}()){case"default":return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("img",{className:m.artwork,src:I,alt:""}),(0,s.jsx)("img",{className:m.logoWithText,src:A,alt:""}),t]});case"experimental":case"loading":return null}}class x extends i.Component{componentDidMount(){window.addEventListener("resize",this.handleResize)}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}mobileTransitionTo(e,t){if(C(e))(0,g.uL)(e,t);else{let n=null!=t&&null!=t.search?t.search:null;window.location=null==n?e:"".concat(e,"?").concat(n)}}mobileReplaceWith(e){C(e)?(0,g.dL)(e):window.location=e}renderDefault(){let{splash:e}=this.props,t=(0,s.jsx)(h.Z,{component:i.Fragment,children:i.Children.map(this.props.children,e=>i.cloneElement(e,{transitionTo:g.uL,replaceWith:g.dL}))});return(0,s.jsx)("div",{className:m.characterBackground,children:(0,s.jsx)(u.HeadingLevel,{forceLevel:1,children:null!=e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(_.Z,{show:!0,className:o()(m.logo)}),(0,s.jsx)(p.h,{splash:e,children:t})]}):(0,s.jsx)(R,{children:t})})})}renderMobile(){return(0,s.jsx)(h.Z,{component:i.Fragment,children:i.Children.map(this.props.children,e=>i.cloneElement(e,{transitionTo:this.mobileTransitionTo,replaceWith:this.mobileReplaceWith}))})}render(){let{isMobileWidth:e}=this.state,t=navigator.userAgent.includes("GameLauncher");return e||l.tq||l.Em||t?this.renderMobile():this.renderDefault()}constructor(e){var t,n,r;super(e),t=this,n="handleResize",r=()=>{this.setState({isMobileWidth:window.innerWidth<=485})},n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,this.state={isMobileWidth:window.innerWidth<=485}}}t.Z=x},481153:function(e,t,n){var r=n(735250),s=n(470079),i=n(120356),a=n.n(i),o=n(442837),l=n(481060),c=n(812206),u=n(388905),d=n(479446),h=n(981632),_=n(594174),p=n(509545),f=n(55563),g=n(366695),E=n(296848),m=n(981631),I=n(474936),A=n(689938),N=n(293377),C=n(83922),T=n(331651);t.Z=o.ZP.connectStores([f.Z,c.Z,p.Z,_.default],e=>{let{giftCode:t}=e,n=f.Z.get(t.skuId),{subscriptionPlanId:r}=t;return{sku:n,subscriptionPlan:null!=r?(0,E.oE)(r):null,application:c.Z.getApplication(n.applicationId),gifter:_.default.getUser(t.userId)}})(e=>{let{error:t,giftCode:n,gifter:i,sku:o,application:c,subscriptionPlan:_}=e,p=null==i?A.Z.Messages.GIFT_CODE_AUTH_GIFTED:A.Z.Messages.GIFT_CODE_AUTH_GIFTED_BY.format({username:i.username}),f=o.name;return null!=_&&(f=(_.interval===I.rV.MONTH?A.Z.Messages.GIFT_CODE_AUTH_GIFTED_SUBSCRIPTION_MONTHLY:A.Z.Messages.GIFT_CODE_AUTH_GIFTED_SUBSCRIPTION_YEARLY).format({skuName:o.name,intervalCount:_.intervalCount})),(0,r.jsxs)(s.Fragment,{children:[null!=n.giftStyle?(0,r.jsx)(h.Z,{defaultAnimationState:d.S.LOOP,giftStyle:n.giftStyle,className:N.seasonalIcon}):(0,r.jsx)(u.qE,{src:null!=i?i.getAvatarURL(void 0,100):null,size:l.AvatarSizes.DEPRECATED_SIZE_100,className:T.marginBottom20}),null!=t?(0,r.jsxs)(s.Fragment,{children:[(0,r.jsx)(u.DK,{children:A.Z.Messages.INVITE_MODAL_ERROR_TITLE}),(0,r.jsx)(u.Dx,{children:t})]}):(0,r.jsxs)(s.Fragment,{children:[(0,r.jsx)(u.DK,{children:p}),(0,r.jsxs)(u.Dx,{className:a()(T.marginTop8,C.flexCenter),children:[o.productLine!==m.POd.COLLECTIBLES&&(0,r.jsx)(g.Z,{size:g.Z.Sizes.MEDIUM,className:N.applicationIcon,game:c,skuId:o.id}),f]})]})]})})},781428:function(e,t,n){n.d(t,{q:function(){return Y}});var r,s=n(735250),i=n(470079),a=n(615231),o=n(120356),l=n.n(o),c=n(593473),u=n(873546),d=n(442837),h=n(481060),_=n(570140),p=n(893776),f=n(899742),g=n(579806),E=n(743142),m=n(388905),I=n(379760),A=n(100159),N=n(473855),C=n(124860),T=n(86779),R=n(726745),x=n(913583),S=n(144114),b=n(541692),v=n(952802),O=n(108427),L=n(365007),Z=n(314897),M=n(117240),y=n(896797),D=n(285952),w=n(626135),P=n(585483),j=n(358085),k=n(481153),U=n(588705),G=n(494526),F=n(163671),B=n(981631),H=n(58346),z=n(689938),W=n(686557),K=n(331651);function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y(){return(0,s.jsx)(m.ZP,{children:(0,s.jsx)(h.Spinner,{})})}class q extends(r=i.PureComponent){static getDerivedStateFromProps(e){let{handoffAvailable:t,authenticated:n}=e;return t||n?null:{checkingHandoff:!1}}componentDidMount(){let{handoffAvailable:e,authenticated:t,giftCodeSKU:n,invite:r,location:s}=this.props;e&&!t?(0,f.is)():t&&this.loginOrSSO(t,s,!0),w.default.track(B.rMx.LOGIN_VIEWED,{location:null!=r?"Invite Login Page":"Non-Invite Login Page",login_source:this.loginSource,authenticated:t,...null!=n?(0,A.Z)(n,!1,!1):{}},{flush:!0}),null==g.Z&&null!=window.PublicKeyCredential&&null!=PublicKeyCredential.isConditionalMediationAvailable&&PublicKeyCredential.isConditionalMediationAvailable().then(e=>{e&&(0,L.us)().then(e=>{let{challenge:t,ticket:n}=e,r=(0,a.wz)(JSON.parse(t));return r.signal=this.state.conditionalMediationAbortController.signal,(0,a.U2)(r).then(e=>(_.Z.dispatch({type:"PASSWORDLESS_START"}),p.Z.loginWebAuthn({ticket:n,credential:JSON.stringify(e),source:this.loginSource,giftCodeSKUId:this.giftCodeSKUId}))).catch(e=>{if("AbortError"!==e.name)throw e})}).catch(()=>{})}),p.Z.getLocationMetadata(),(0,O.e)("login")}componentDidUpdate(e){let{authenticated:t,location:n}=this.props,{checkingHandoff:r}=this.state;if(t&&!e.authenticated&&!r&&(this.state.conditionalMediationAbortController.abort(),this.loginOrSSO(t,n)),e.errors!==this.props.errors){var s,i,a;this.hasError("password")?null===(s=this.passwordRef)||void 0===s||s.focus():this.hasError("email")||this.hasError("login")?null===(i=this.loginRef)||void 0===i||i.focus():this.hasError("code")&&(null===(a=this.codeRef)||void 0===a||a.focus())}}get loginSource(){let{giftCode:e,guildTemplate:t,invite:n,loginSource:r,redirectTo:s}=this.props;if(null!=r)return r;if(null!=e)return"gift";if(null!=t)return"guild_template";else if(null!=n){if(null!=n.guild)return"guild_invite";if(null!=n.channel)return"dm_invite";else if(null!=n.inviter)return"friend_invite"}return null!=s?(0,E.L)(s):null}get giftCodeSKUId(){let{giftCode:e}=this.props;return null!=e?e.skuId:null}get canShowChooseAccount(){return this.props.hasLoggedInAccounts}loginOrSSO(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!!e&&null!=t)this.setState({redirecting:!0}),n?p.Z.verifySSOToken().then(()=>this.transitionSSO(t)):this.transitionSSO(t)}transitionSSO(e){let{transitionTo:t,redirectTo:n,replaceWith:r}=this.props,s=null!=e?(0,c.parse)(e.search):{};if(delete s.redirect_to,null!=n)null!=r?r(n):t(n);else if(null==s.service)t(B.Z5c.APP);else{let e=window.location.protocol+window.GLOBAL_ENV.API_ENDPOINT+B.ANM.SSO,t={...s,token:Z.default.getToken()};window.location="".concat(e,"?").concat((0,c.stringify)(t))}}hasError(e){return null!=this.props.errors[e]}renderHandOffAvailable(){let{authBoxClassName:e}=this.props;return(0,s.jsxs)(m.ZP,{className:e,children:[(0,s.jsx)(m.Hh,{}),(0,s.jsx)(m.Dx,{className:K.marginBottom8,children:z.Z.Messages.BROWSER_HANDOFF_DETECTING_TITLE}),(0,s.jsx)(m.DK,{children:z.Z.Messages.AUTH_BROWSER_HANDOFF_DETECTING_DESCRIPTION})]})}renderHandOffContinue(){let{user:e,transitionTo:t,authBoxClassName:n}=this.props;return null==e?null:(0,s.jsxs)(m.ZP,{className:n,children:[(0,s.jsx)(m.qE,{src:e.getAvatarURL(void 0,100),size:h.AvatarSizes.DEPRECATED_SIZE_100,className:K.marginBottom20}),(0,s.jsx)(m.Dx,{className:K.marginBottom8,children:z.Z.Messages.BROWSER_HANDOFF_SUCCESS_TITLE.format({name:e.toString()})}),(0,s.jsx)(m.DK,{className:K.marginBottom40,children:z.Z.Messages._BROWSER_HANDOFF_SUCCESS_BODY}),(0,s.jsxs)(m.gO,{children:[(0,s.jsx)(m.zx,{onClick:()=>t(B.Z5c.APP),className:K.marginBottom8,children:z.Z.Messages.BROWSER_HANDOFF_SUCCESS_ACTION.format({name:e.toString()})}),(0,s.jsx)(m.zx,{look:m.zx.Looks.LINK,color:m.zx.Colors.LINK,onClick:this.handleReset,children:z.Z.Messages.BROWSER_HANDOFF_SUCCESS_CANCEL})]})]})}renderDisabledAccount(){let{authBoxClassName:e}=this.props,t=this.props.loginStatus===B.u34.ACCOUNT_DISABLED,n=t?z.Z.Messages.ACCOUNT_DISABLED_TITLE:z.Z.Messages.ACCOUNT_SCHEDULED_FOR_DELETION_TITLE,r=t?z.Z.Messages.ACCOUNT_DISABLED_DESCRIPTION:z.Z.Messages.ACCOUNT_SCHEDULED_FOR_DELETION_DESCRIPTION;return(0,s.jsx)(m.ZP,{tag:"form",onSubmit:this.handleReset,className:e,children:(0,s.jsxs)(h.HeadingLevel,{component:(0,s.jsx)(m.Dx,{className:K.marginBottom8,children:n}),children:[(0,s.jsx)(m.DK,{className:K.marginBottom20,children:r}),(0,s.jsxs)(m.gO,{children:[(0,s.jsx)(m.zx,{color:m.zx.Colors.BRAND,type:"submit",children:z.Z.Messages._RETURN_TO_LOGIN}),(0,s.jsx)("div",{className:l()(K.marginTop8,W.needAccount),children:z.Z.Messages.ACCOUNT_SCHEDULED_FOR_DELETION_CANCEL.format({onClick:this.handleCancelAccountDeletion})})]})]})})}renderResolving(){let{authBoxClassName:e,country:t}=this.props;return(0,s.jsxs)(m.ZP,{className:e,children:[(0,s.jsx)(U.R,{}),(0,s.jsxs)(m.gO,{className:K.marginTop20,children:[(0,s.jsx)(v.Z,{className:K.marginBottom20,alpha2:t.alpha2,countryCode:t.code.split(" ")[0],label:z.Z.Messages.FORM_LABEL_EMAIL_OR_PHONE_NUMBER,onChange:(e,t)=>this.setState({login:e,loginPrefix:t}),setRef:this.setLoginRef,autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",spellCheck:"false",value:this.state.login,autoFocus:!0,required:!0}),(0,s.jsx)(m.II,{className:K.marginBottom20,label:z.Z.Messages.FORM_LABEL_PASSWORD,onChange:e=>this.setState({password:e}),type:"password",setRef:this.setPasswordRef,autoComplete:"off",spellCheck:"false",value:this.state.password,required:!0}),(0,s.jsx)(m.zx,{className:K.marginBottom8,type:"submit",disabled:!0,children:z.Z.Messages._LOGIN}),(0,s.jsx)(m.zx,{disabled:!0,look:m.zx.Looks.LINK,color:m.zx.Colors.LINK,children:z.Z.Messages.FORGOT_PASSWORD}),(0,s.jsx)(m.zx,{disabled:!0,className:K.marginTop4,look:m.zx.Looks.LINK,color:m.zx.Colors.LINK,children:z.Z.Messages.NEED_ACCOUNT})]})]})}renderDefaultForm(e){var t;let n;let{invite:r,giftCode:i,loginStatus:a,country:o,showMobileWebHandoff:c,disableAutofocusOnDefaultForm:u}=this.props,d=!this.hasError("email")&&this.hasError("password"),_=(null==r?void 0:r.stage_instance)!=null;return n=null==r||_?null!=i?(0,s.jsx)(k.Z,{giftCode:i}):(0,s.jsxs)("div",{className:W.header,children:[(0,s.jsx)(m.Dx,{className:K.marginBottom8,children:z.Z.Messages.LOGIN_TITLE},"title"),!1===(0,j.isAndroidWeb)()?(0,s.jsx)(m.DK,{children:z.Z.Messages.AUTH_LOGIN_BODY},"subtitle"):null]}):(0,s.jsx)(U.Z,{invite:r}),(0,s.jsxs)(D.Z,{direction:D.Z.Direction.HORIZONTAL,align:D.Z.Align.CENTER,children:[(0,s.jsxs)("div",{className:W.mainLoginContainer,children:[this.canShowChooseAccount&&this.state.dismissedChooseAccount&&(0,s.jsx)(m.zx,{onClick:()=>{this.setState(e=>({...e,dismissedChooseAccount:!1}))},look:m.zx.Looks.LINK,color:m.zx.Colors.PRIMARY,className:W.goBackButton,children:(0,s.jsxs)("div",{className:W.content,children:[(0,s.jsx)(h.ChevronSmallLeftIcon,{size:"xs",color:"currentColor",className:W.caret}),(0,s.jsx)(h.Text,{variant:"text-md/normal",children:z.Z.Messages.AGE_GATE_GO_BACK})]})}),n,(0,s.jsx)(h.HeadingLevel,{children:(0,s.jsxs)(m.gO,{className:K.marginTop20,children:[(0,s.jsx)(v.Z,{alpha2:o.alpha2,countryCode:o.code.split(" ")[0],className:K.marginBottom20,label:z.Z.Messages.FORM_LABEL_EMAIL_OR_PHONE_NUMBER,error:null!==(t=this.renderError("login"))&&void 0!==t?t:this.renderError("email"),onChange:(e,t)=>this.setState({login:e,loginPrefix:t}),setRef:this.setLoginRef,autoCapitalize:"none",autoComplete:"webauthn",autoCorrect:"off",spellCheck:"false",value:this.state.login,autoFocus:!d&&!c&&!u,required:!0}),(0,s.jsx)(m.II,{label:z.Z.Messages.FORM_LABEL_PASSWORD,error:this.renderError("password"),onChange:e=>this.setState({password:e}),name:"password",type:"password",setRef:this.setPasswordRef,autoComplete:"off",spellCheck:"false",autoFocus:d&&!c&&!u,value:this.state.password,required:!0}),(0,s.jsx)(m.zx,{onClick:this.handleForgotPassword,look:m.zx.Looks.LINK,color:m.zx.Colors.LINK,className:l()(K.marginBottom20,K.marginTop4),children:z.Z.Messages.FORGOT_PASSWORD}),(0,s.jsx)(m.zx,{type:"submit",submitting:a===B.u34.LOGGING_IN,color:_?m.zx.Colors.GREEN:m.zx.Colors.BRAND,className:K.marginBottom8,children:_?z.Z.Messages._LOGIN_STAGE:z.Z.Messages._LOGIN}),(0,s.jsxs)("div",{className:K.marginTop4,children:[(0,s.jsx)("span",{className:W.needAccount,children:z.Z.Messages.NEED_ACCOUNT}),(0,s.jsx)(m.zx,{onClick:this.handleGotoRegister,look:m.zx.Looks.LINK,color:m.zx.Colors.LINK,className:W.smallRegisterLink,children:z.Z.Messages.REGISTER})]})]})})]}),(0,s.jsx)(h.HeadingLevel,{children:e?(0,s.jsx)(G.Z,{authTokenCallback:this.handleAuthToken,conditionalMediationAbortController:this.state.conditionalMediationAbortController}):null})]},"form-wrapper")}renderDefault(){let{authBoxClassName:e,showMobileWebHandoff:t}=this.props;return(0,s.jsxs)("div",{className:W.__invalid_pageContainer,children:[(0,s.jsx)(m.ZP,{onSubmit:this.handleLogin,tag:"form",className:e,expanded:!0,children:this.renderDefaultForm(!0)}),t&&(0,s.jsx)(T.Z,{})]})}renderGuildTemplate(e){return(0,s.jsx)(F.Z,{onSubmit:this.handleLogin,tag:"form",className:l()(this.props.authBoxClassName,W.horizontalAuthBox),children:()=>[(0,s.jsx)(N.Z,{guildTemplate:e},"template"),this.renderDefaultForm(!1)]})}renderMFA(){let e={ticket:this.props.mfaTicket,methods:this.props.mfaMethods};return(0,s.jsx)(m.ZP,{style:{padding:0},children:(0,s.jsx)(C.Cd,{mfaFinish:this.handleTokenSubmitMFA,request:e,onEarlyClose:()=>{_.Z.dispatch({type:"LOGIN_RESET"})},width:480})})}renderIPAuthorization(){let{authBoxClassName:e}=this.props,{phoneVerifyError:t}=this.state;return(0,s.jsx)(m.ZP,{tag:"form",className:e,children:(0,s.jsx)(I.Z,{title:z.Z.Messages.PHONE_IP_AUTHORIZATION_TITLE,subtitle:z.Z.Messages.PHONE_IP_AUTHORIZATION_SUBTITLE_RESEND.format({onResendClick:this.handleResendCode}),error:t,onSubmit:this.handleIPAuthorize,onCancel:p.Z.loginReset})})}renderPasswordRecovery(){let{authBoxClassName:e}=this.props,{phoneVerifyError:t}=this.state;return(0,s.jsx)(m.ZP,{tag:"form",className:e,children:(0,s.jsx)(I.Z,{title:z.Z.Messages.PASSWORD_RECOVERY_VERIFY_PHONE_TITLE,subtitle:z.Z.Messages.PASSWORD_RECOVERY_VERIFY_PHONE_SUBTITLE_RESEND.format({onResendClick:this.handleResendCode}),error:t,onSubmit:this.handlePasswordReset,onCancel:p.Z.loginReset})})}renderChooseAccount(){return(0,s.jsx)(x.Z,{onDismiss:()=>{this.setState(e=>({...e,dismissedChooseAccount:!0}))}})}render(){let{authenticated:e,invite:t,guildTemplate:n,loginStatus:r,handoffAvailable:i}=this.props,{checkingHandoff:a,redirecting:o}=this.state;if(o||a)return(0,s.jsx)(Y,{});if(i)return this.renderHandOffAvailable();if(e&&a)return this.renderHandOffContinue();switch(r){case B.u34.LOGGING_IN_MFA_SMS:case B.u34.MFA_SMS_STEP:case B.u34.LOGGING_IN_MFA:case B.u34.MFA_STEP:return this.renderMFA();case B.u34.ACCOUNT_SCHEDULED_FOR_DELETION:case B.u34.ACCOUNT_DISABLED:return this.renderDisabledAccount();case B.u34.PHONE_IP_AUTHORIZATION:return this.renderIPAuthorization();case B.u34.PASSWORD_RECOVERY_PHONE_VERIFICATION:return this.renderPasswordRecovery();case B.u34.LOGGING_IN:case B.u34.NONE:default:if(null!=t&&t.state===B.r2o.RESOLVING)return this.renderResolving();if(null!=n){if(n.state===H.Rj.RESOLVING)return this.renderResolving();return this.renderGuildTemplate(n)}if(this.canShowChooseAccount&&!this.state.dismissedChooseAccount)return this.renderChooseAccount();return this.renderDefault()}}constructor(e){var t,n;super(e),V(this,"loginRef",void 0),V(this,"passwordRef",void 0),V(this,"codeRef",void 0),V(this,"handleAuthToken",async e=>{await p.Z.loginToken(e,!1),w.default.track(B.rMx.LOGIN_SUCCESSFUL,{source:B.uRl.QR_CODE,login_source:this.loginSource,gift_code_sku_id:this.giftCodeSKUId,is_new_user:!1})}),V(this,"setLoginRef",e=>{this.loginRef=e}),V(this,"setPasswordRef",e=>{this.passwordRef=e}),V(this,"setCodeRef",e=>{this.codeRef=e}),V(this,"getFullLogin",()=>{let{loginPrefix:e,login:t}=this.state;return e+t}),V(this,"renderError",e=>{let{errors:t}=this.props;if(this.hasError(e)){let n=t[e];return Array.isArray(n)?n[0]:n}return null}),V(this,"handleLogin",e=>{let{password:t,undelete:n}=this.state;null!=e&&e.preventDefault(),p.Z.login({login:this.getFullLogin(),password:t,undelete:n,source:this.loginSource,giftCodeSKUId:this.giftCodeSKUId,invite:this.props.invite}),P.S.dispatch(B.CkL.WAVE_EMPHASIZE)}),V(this,"handleIPAuthorize",async e=>{let{password:t,undelete:n}=this.state,r=this.getFullLogin();try{let{token:s}=await S.Z.verifyPhone(r,e,!1);await p.Z.authorizeIPAddress(s),p.Z.login({login:r,password:t,undelete:n,source:this.loginSource,giftCodeSKUId:this.giftCodeSKUId}),P.S.dispatch(B.CkL.WAVE_EMPHASIZE)}catch(e){null!=e.body&&null!=e.body.message&&this.setState({phoneVerifyError:e.body.message})}}),V(this,"handlePasswordReset",async e=>{let{transitionTo:t}=this.props;this.setState({phoneVerifyError:null});try{let{token:n}=await S.Z.verifyPhone(this.getFullLogin(),e,!1);t(B.Z5c.RESET,{search:(0,c.stringify)({token:n,from_login:"true"})})}catch(e){null!=e.body&&null!=e.body.message&&this.setState({phoneVerifyError:e.body.message})}}),V(this,"handleTokenSubmitMFA",e=>{let{mfaType:t,data:n,ticket:r}=e;return P.S.dispatch(B.CkL.WAVE_EMPHASIZE),p.Z.loginMFAv2({code:n,ticket:r,mfaType:t,source:this.loginSource,giftCodeSKUId:this.giftCodeSKUId})}),V(this,"handleForgotPassword",async e=>{null!=e&&e.preventDefault(),null!=this.loginRef&&this.loginRef.focus();let t=this.getFullLogin();try{P.S.dispatch(B.CkL.WAVE_EMPHASIZE),await p.Z.forgotPassword(t),(0,h.openModal)(e=>(0,s.jsx)(h.ConfirmModal,{header:z.Z.Messages.EMAIL_VERIFICATION_INSTRUCTIONS_HEADER,confirmText:z.Z.Messages.OKAY,confirmButtonColor:m.zx.Colors.BRAND,className:u.tq?W.mobile:"",...e,children:(0,s.jsx)(h.Text,{variant:"text-md/normal",children:z.Z.Messages.EMAIL_VERIFICATION_INSTRUCTIONS_BODY.format({email:t})})}))}catch{}}),V(this,"handleResendCode",()=>{S.Z.resendCode(this.getFullLogin())}),V(this,"handleReset",e=>{null!=e&&e.preventDefault(),p.Z.loginReset(),this.setState({password:"",loginPrefix:"",login:"",code:"",smsCode:"",undelete:!1,checkingHandoff:!1,redirecting:!1})}),V(this,"handleCancelAccountDeletion",()=>{this.setState({undelete:!0},this.handleLogin)}),V(this,"handleGotoRegister",()=>{let e;let{login:t}=this.state,{invite:n,giftCode:r,guildTemplate:s,location:i,transitionTo:a,redirectTo:o}=this.props,l=null!=i?(0,c.parse)(i.search):{};""!==t&&(l.email=t),null!=n?(l.mode="register",e=B.Z5c.INVITE(n.code)):null!=r?(l.mode="register",e=B.Z5c.GIFT_CODE(r.code)):null!=s?e=B.Z5c.GUILD_TEMPLATE(s.code):null!=o?(e=B.Z5c.REGISTER,l.redirect_to=o):e=B.Z5c.REGISTER,p.Z.loginReset(),a(e,{search:(0,c.stringify)(l)}),P.S.dispatch(B.CkL.WAVE_EMPHASIZE)});let r=null!=e.location?(0,c.parse)(e.location.search):{};this.state={redirecting:e.authenticated,checkingHandoff:e.handoffAvailable,loginPrefix:"",login:null!==(n=null!==(t=r.email)&&void 0!==t?t:r.login)&&void 0!==n?n:"",password:"",code:"",smsCode:"",undelete:!1,phoneVerifyError:null,dismissedChooseAccount:!1,conditionalMediationAbortController:new AbortController}}}V(q,"defaultProps",{transitionTo:e=>n.g.location.assign(e)});t.Z=function(e){let t=(0,d.cj)([M.Z,y.Z,Z.default,R.Z,b.Z],()=>({authenticated:Z.default.isAuthenticated(),handoffAvailable:M.Z.isHandoffAvailable(),user:M.Z.user,loginStatus:Z.default.getLoginStatus(),mfaTicket:Z.default.getMFATicket(),mfaSMS:Z.default.getMFASMS(),mfaMethods:Z.default.getMFAMethods(),maskedPhone:Z.default.getMaskedPhone(),errors:Z.default.getErrors(),defaultRoute:y.Z.defaultRoute,country:b.Z.getCountryCode(),hasLoggedInAccounts:R.Z.getHasLoggedInAccounts()}));return(0,s.jsx)(q,{...e,...t})}},209411:function(e,t,n){n.d(t,{Z:function(){return g}}),n(47120),n(773603);var r=n(735250),s=n(470079),i=n(593473),a=n(266067),o=n(442837),l=n(893776),c=n(899742),u=n(743142),d=n(703656),h=n(314897),_=n(781428),p=n(981631),f=n(176505);function g(e){let t=s.useCallback(t=>{if(function(e){var t;let n=(0,a.LX)(e,{path:p.Z5c.CHANNEL(":guildId",":channelId")});return(null==n?void 0:null===(t=n.params)||void 0===t?void 0:t.channelId)===f.oC.ROLE_SUBSCRIPTIONS||!1}(t))d.dL(t);else{var n;(null!==(n=e.transitionTo)&&void 0!==n?n:d.uL)(t)}},[e.transitionTo]),{isAuthenticated:n,loginStatus:g}=(0,o.cj)([h.default],()=>({isAuthenticated:h.default.isAuthenticated(),loginStatus:h.default.getLoginStatus()})),{location:E,redirectTo:m}=e,[I,A]=s.useState(n);function N(e){let{handoffKey:t,handoffToken:n,handoffSource:r}=e;(0,c.Yz)({handoffKey:t,handoffToken:n,handoffSource:r}),A(!1)}return(s.useEffect(()=>{if(null!=E){let{handoff_key:e,handoff_token:t}=(0,i.parse)(E.search);if(null!=e&&null!=t){let n=null!=m?(0,u.L)(m):void 0;I?l.Z.logout(null).finally(()=>{N({handoffKey:e,handoffToken:t,handoffSource:n})}):N({handoffKey:e,handoffToken:t,handoffSource:n})}}},[]),I||g===p.u34.LOGGING_IN)?(0,r.jsx)(_.q,{}):(0,r.jsx)(_.Z,{...e,transitionTo:t})}},494526:function(e,t,n){n.d(t,{Z:function(){return P}}),n(411104),n(47120);var r,s,i,a,o=n(735250),l=n(470079),c=n(615231),u=n(261470),d=n(399606),h=n(544891),_=n(481060),p=n(893776),f=n(99690),g=n(937154),E=n(388905),m=n(710845),I=n(314897),A=n(277390),N=n(585483),C=n(358085),T=n(172517),R=n(51144),x=n(998502),S=n(981631),b=n(231338),v=n(689938),O=n(397195),L=n(331651);(i=r||(r={}))[i.INITIALIZING=0]="INITIALIZING",i[i.PENDING_REMOTE_INIT=1]="PENDING_REMOTE_INIT",i[i.PENDING_FINISH=2]="PENDING_FINISH",i[i.PENDING_TICKET=3]="PENDING_TICKET",i[i.PENDING_LOGIN=4]="PENDING_LOGIN",i[i.FINISH=5]="FINISH",(a=s||(s={}))[a.QR_CODE=0]="QR_CODE",a[a.CONFIRM=1]="CONFIRM";let Z=n(515695),M=new m.Z("LoginQRSocket");function y(e){let{text:t=""}=e,[n,r]=l.useState(!1);return l.useEffect(()=>{let e=new Image;e.src=Z,e.onload=()=>r(!0),e.onerror=()=>r(!0)},[Z]),l.useEffect(()=>{n&&_.AccessibilityAnnouncer.announce(v.Z.Messages.LOGIN_WITH_QR_LOADING_FINISHED_LABEL)},[n]),(0,o.jsx)("div",{className:O.qrCodeContainer,children:""!==t&&n?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(A.ZP,{className:O.qrCode,size:160,text:t}),(0,o.jsx)("div",{className:O.qrCodeOverlay,children:(0,o.jsx)("img",{src:Z,alt:""})})]}):(0,o.jsx)("div",{className:O.qrCodeOverlay,"aria-label":v.Z.Messages.LOGIN_WITH_QR_LOADING_LABEL,"aria-busy":!0,children:(0,o.jsx)(_.Spinner,{className:O.qrCode,type:_.Spinner.Type.WANDERING_CUBES,"aria-hidden":!0})})})}let D=e=>{let{className:t,children:n}=e;return(0,o.jsx)(_.Text,{variant:"text-md/normal",color:"text-danger",className:t,children:n})};function w(e){let{state:t,cancel:n,errorMessage:r,conditionalMediationAbortController:s,isPasswordlessActive:i}=e;switch(t.step){case 0:case 1:return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(y,{text:1===t.step?"https://discord.com/ra/".concat(t.fingerprint):""}),(0,o.jsx)(E.Dx,{className:L.marginBottom8,children:v.Z.Messages.LOGIN_WITH_QR}),null!=r?(0,o.jsx)(D,{children:r}):(0,o.jsx)(E.DK,{children:v.Z.Messages.LOGIN_WITH_QR_DESCRIPTION.format()}),(0,o.jsx)(_.Button,{size:_.ButtonSizes.LARGE,look:_.ButtonLooks.LINK,color:_.ButtonColors.LINK,disabled:i,onClick:()=>(function(e){let t=C.isPlatformEmbedded&&x.ZP.supportsFeature(S.eRX.WEBAUTHN)?x.ZP.webAuthnAuthenticate:e=>{let t=(0,c.wz)(JSON.parse(e));return(0,c.U2)(t).then(e=>JSON.stringify(e))};p.Z.authenticatePasswordless({authenticateFunc:t,conditionalMediationAbortController:e}).catch(()=>{})})(s),children:v.Z.Messages.SIGN_IN_WITH_PASSKEY})]});case 3:case 2:{let{user:e}=t;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(f.Z,{className:O.qrAvatar,user:e,size:_.AvatarSizes.SIZE_120,isMobile:!0,status:b.Sk.ONLINE}),(0,o.jsx)(E.Dx,{className:L.marginBottom8,children:v.Z.Messages.CONFIRM_QR_CHECK_YOUR_PHONE}),(0,o.jsx)(E.DK,{children:v.Z.Messages.LOGIN_AS.format({username:"".concat(R.ZP.getUserTag(e))})}),(0,o.jsx)(_.Button,{look:_.Button.Looks.BLANK,color:_.Button.Colors.LINK,size:_.Button.Sizes.MIN,onClick:n,className:O.startOverButton,children:v.Z.Messages.QR_CODE_LOGIN_START_OVER})]})}case 4:case 5:return(0,o.jsx)(_.Spinner,{type:_.Spinner.Type.WANDERING_CUBES})}}function P(e){let{authTokenCallback:t,conditionalMediationAbortController:n}=e,r=(0,d.e7)([I.default],()=>I.default.getIsPasswordlessActive()),{state:s,rsaKeyPair:i,cancel:a,handleFailure:c}=function(e){let[t,n]=l.useState(0),[r,s]=l.useState(!1),[i,a]=l.useState({step:0}),[o,c]=l.useState(null),d=(0,g.Z)(),h=l.useMemo(()=>new u.Z(1500,3e4),[]),_=l.useRef();_.current=l.useCallback(()=>{a({step:0}),d?n(e=>e+1):(M.info("document is not visible, will defer reconnection when document becomes visible."),s(!0))},[d]);let p=l.useCallback(()=>{(function(e){let{current:t}=e;if(void 0===t)throw Error("tried to unwrap an undefined value.");return t})(_)()},[_]),f=l.useCallback(()=>{M.error("Could not complete QR code login, trying to restart with a new QR code."),a({step:0}),!h.pending&&h.fail(p)},[p,h]);return l.useEffect(()=>{d&&r&&0===i.step&&(M.info("reconnecting, now that document is visible"),s(!1),n(e=>e+1))},[i,d,r,s]),l.useEffect(()=>{let t=Date.now(),n=()=>"".concat(Date.now()-t,"ms"),r="wss:".concat(window.GLOBAL_ENV.REMOTE_AUTH_ENDPOINT,"/?v=2"),s=new WebSocket(r);M.info("[0ms] connecting to ".concat(r));let i=e=>M.info("[".concat(n(),"] ").concat(e)),o=null,l=null,u=null,d=null,_=!0;function g(){if(null!=o)return o;throw Error("No key pair set")}let E=()=>{_?(_=!1,s.send(JSON.stringify({op:"heartbeat"}))):(i("heartbeat timeout, reconnecting."),s.close(),f())};return s.onmessage=async t=>{let{data:n}=t,r=JSON.parse(n);switch(r.op){case"nonce_proof":{let e=r.encrypted_nonce,t=await (0,T.qd)(g(),e);i("computed nonce proof"),s.send(JSON.stringify({op:"nonce_proof",nonce:t}));return}case"pending_remote_init":{h.succeed(),N.S.dispatch(S.CkL.WAVE_EMPHASIZE);let e=await (0,T.Pk)(g());if(e!==r.fingerprint)throw Error("bad fingerprint ".concat(e," !== ").concat(r.fingerprint));i("handshake complete awaiting remote auth."),a({step:1,fingerprint:e});return}case"pending_login":{let e=r.ticket;null==e&&f(),a({step:4,ticket:e});return}case"pending_ticket":{N.S.dispatch(S.CkL.WAVE_EMPHASIZE),i("remote auth handshake started, awaiting ticket/cancel.");let e=r.encrypted_user_payload;a({step:3,user:await (0,T.Rq)(g(),e)});return}case"pending_finish":{N.S.dispatch(S.CkL.WAVE_EMPHASIZE),i("remote auth handshake started, awaiting finish/cancel.");let e=r.encrypted_user_payload;a({step:2,user:await (0,T.Rq)(g(),e)});return}case"finish":{N.S.dispatch(S.CkL.WAVE_EMPHASIZE),i("remote auth handshake finished.");let t=r.encrypted_token;a({step:5}),e(await (0,T.FW)(g(),t));return}case"cancel":i("remote auth handshake cancelled."),p();return;case"hello":{i("got hello, auth timeout=".concat(r.timeout_ms,"ms"));let e=r.heartbeat_interval;d=setTimeout(()=>{d=null,E(),u=setInterval(E,e)},Math.floor(e*Math.random()));return}case"heartbeat_ack":_=!0}},s.onopen=async()=>{o=await (0,T.W_)(),l=await (0,T.dK)(o);let e=await (0,T.Pk)(o);i("connected, handshaking with fingerprint: ".concat(e)),s.send(JSON.stringify({op:"init",encoded_public_key:l})),c(o)},s.onclose=e=>{i("disconnected, code: ".concat(e.code," ").concat(e.reason)),f()},s.onerror=e=>{i("disconnected, error: ".concat(JSON.stringify(e))),f()},()=>{i("cleaning up"),s.onopen=()=>null,s.onmessage=()=>null,s.onclose=()=>null,s.onerror=()=>null,s.close(1e3),h.cancel(),null!=d&&clearTimeout(d),null!=u&&clearInterval(u)}},[p,e,t,h,f]),{state:i,rsaKeyPair:o,cancel:p,handleFailure:f}}(t),p=function(e){switch(e){case 0:case 1:return 0;case 3:case 2:case 4:case 5:return 1}}(s.step);return l.useEffect(()=>{4===s.step&&null!=s.ticket&&h.tn.post({url:S.ANM.REMOTE_AUTH_LOGIN,body:{ticket:s.ticket},oldFormErrors:!0}).then(async e=>{if(null!=i)try{let n=await (0,T.FW)(i,e.body.encrypted_token);t(n)}catch(e){c()}else c()}).catch(()=>{c()})},[s,t,i,c]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:O.verticalSeparator}),(0,o.jsx)(_.Sequencer,{fillParent:!0,className:O.qrLogin,step:p,steps:[0,1],children:(0,o.jsx)("div",{className:O.qrLoginInner,children:(0,o.jsx)(w,{state:s,cancel:a,conditionalMediationAbortController:n,isPasswordlessActive:r})})})]})}},163671:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(735250);n(470079);var s=n(120356),i=n.n(s),a=n(388905),o=n(835234);function l(e){let{children:t,className:n,...s}=e,l=t();return(0,r.jsx)(a.ZP,{...s,className:i()(n,o.container),contentClassName:o.content,children:l.map((e,t)=>(0,r.jsx)("div",{className:o.column,style:{flexBasis:"".concat(100/l.length,"%")},children:e},t))})}},423527:function(e,t,n){n.d(t,{Z:function(){return el}}),n(757143),n(47120),n(627341);var r,s=n(735250),i=n(470079),a=n(120356),o=n.n(a),l=n(593473),c=n(278074),u=n(990547),d=n(442837),h=n(846519),_=n(481060),p=n(893776),f=n(899370),g=n(224841),E=n(13430),m=n(213609),I=n(882037),A=n(201207),N=n(481230),C=n(388905),T=n(853268),R=n(639946),x=n(616952),S=n(792766),b=n(692483),v=n(100159),O=n(473855),L=n(726745),Z=n(929809),M=n(541692),y=n(986197),D=n(135200),w=n(219496),P=n(794099),j=n(807369),k=n(180529),U=n(108427),G=n(314897),F=n(480294),B=n(896797),H=n(626135),z=n(585483),W=n(70956),K=n(624138),V=n(481153),Y=n(588705),q=n(163671),Q=n(981631),X=n(355142),J=n(188785),$=n(701476),ee=n(801461),et=n(689938),en=n(182428),er=n(331651);function es(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}d.ZP.initialize();let ei=/\.$/,ea=e=>Array.isArray(e)?e.map(e=>e.replace(ei,"")).join(". ").trim():e;class eo extends(r=i.PureComponent){get registrationSource(){let{giftCode:e,guildTemplate:t,invite:n}=this.props;if(null!=e)return"gift";if(null!=t)return"guild_template";if(null!=n){if(null!=n.guild)return"guild_invite";if(null!=n.channel)return"dm_invite";else if(null!=n.inviter)return"friend_invite"}return null}hasConsent(){let{consentRequired:e}=this.props,{consent:t}=this.state;return null!=e&&t}componentDidMount(){this.redirectIfAuthenticated(),A.Z.trackExposure({location:"0ba758_1"});let{giftCodeSKU:e,invite:t}=this.props;H.default.track(Q.rMx.REGISTER_VIEWED,{location:null!=t?"Invite Register Page":"Non-Invite Register Page",registration_source:this.registrationSource,...null!=e?(0,v.Z)(e,!1,!1):{}},{flush:!0}),null==this.props.consentRequired&&p.Z.getLocationMetadata(),(0,U.e)("register")}componentWillUnmount(){this._retryTimer.stop()}static getDerivedStateFromProps(e,t){let{consentRequired:n}=e,{consentRequiredProp:r}=t;return null==r&&null!=n?{consent:!n,consentRequiredProp:n}:{consentRequiredProp:n}}componentDidUpdate(e,t){let{apiErrors:n,authenticated:r,isUnderage:s,invite:i,onChangeStep:a}=this.props,{parsedDateOfBirth:o}=this.state;(e.apiErrors!==n||t.parsedDateOfBirth!==o)&&(this.hasError("email")||this.hasError("phone")?null!=this.emailRef&&this.emailRef.focus():this.hasError("username")?null!=this.usernameRef&&this.usernameRef.focus():this.hasError("global_name")?null!=this.globalNameRef&&this.globalNameRef.focus():this.hasError("password")?null!=this.passwordRef&&this.passwordRef.focus():null==this.state.parsedDateOfBirth?null!=this.dateOfBirthRef.current&&this.dateOfBirthRef.current.focus():this.hasError("retry_after")&&"number"==typeof this.props.apiErrors.retry_after&&(this.setState({isRateLimited:!0}),this._retryTimer.start(this.props.apiErrors.retry_after*W.Z.Millis.SECOND,()=>{this.setState({isRateLimited:!1})}))),r&&!e.authenticated&&((0,Z.c)($.M5.ORGANIC_REGISTERED),this.redirectIfAuthenticated());let l=X.E.FULL;s||this.hasError("date_of_birth")?l=X.E.AGE_GATE:null!=i&&(null!=i.guild||null!=i.channel)&&(l=X.E.INVITE),a(l)}redirectIfAuthenticated(){let{authenticated:e,transitionTo:t,redirectTo:n}=this.props;if(!!e)t(null!=n?n:B.Z.defaultRoute)}async handleRegister(){let{email:e,username:t,globalName:n,password:r,consent:s,parsedDateOfBirth:i}=this.state,{invite:a,guildTemplate:o,giftCode:l,onRegister:c,usernameSuggestion:u,isMobileWebInviteRegistration:d}=this.props,h=null!=a?a.code:null,_=null!=l?l.skuId:null,p=I.MD.getState(),f=(0,K.Ew)(u)?null:t===u,g=J.a?await (0,b.K)(t):t,E=J.a?await (0,b.K)(n):n;z.S.dispatch(Q.CkL.WAVE_EMPHASIZE);try{d||null==a?await (0,N.R$)({email:e,username:g,globalName:E,consent:s,password:r,invite:h,usedUsernameSuggestion:f,guildTemplateCode:null==o?void 0:o.code,giftCodeSKUId:_,birthday:i,promoEmailConsent:p.required?p:null}):await (0,N.ZP)({consent:s,invite:h,giftCodeSKUId:_,usedUsernameSuggestion:f,globalName:E}),null==c||c()}catch(e){}}hasError(e){return null!=this.props.apiErrors[e]}renderConsentComponents(){let{consent:e}=this.state,{consentRequired:t,registrationCopyExperimentConfig:{enableNewCopy:n,hasProminentCopy:r}}=this.props,i=null,a=null;return t?a=(0,s.jsx)(T.Z,{value:e,onChange:e=>this.setState({consent:e}),subText:et.Z.Messages.TERMS_PRIVACY_OPT_IN.format({termsURL:Q.EYA.TERMS,privacyURL:Q.EYA.PRIVACY})}):i=(0,s.jsx)(C.i_,{isProminent:!!r,className:er.marginTop8,children:n?et.Z.Messages.TERMS_PRIVACY_ON_REGISTER.format({buttonText:et.Z.Messages.CONTINUE,termsURL:Q.EYA.TERMS,privacyURL:Q.EYA.PRIVACY}):et.Z.Messages.TERMS_PRIVACY.format({termsURL:Q.EYA.TERMS,privacyURL:Q.EYA.PRIVACY})}),{subText:i,consentText:a}}renderInviteResolving(){let{authBoxClassName:e}=this.props,t=e=>{this.setState({globalName:e})},n=this.state.globalName;return(0,s.jsxs)(C.ZP,{className:e,children:[(0,s.jsx)(Y.R,{}),(0,s.jsxs)(C.gO,{className:er.marginTop40,children:[(0,s.jsx)(_.FormTitle,{children:et.Z.Messages.FORM_LABEL_USERNAME}),(0,s.jsx)(_.Tooltip,{text:et.Z.Messages.AUTH_USERNAME_TOOLTIP,position:"right",color:_.Tooltip.Colors.BRAND,children:e=>{let{onMouseEnter:r,onMouseLeave:i}=e;return(0,s.jsx)(C.II,{autoFocus:!0,className:er.marginBottom8,name:"username",value:n,placeholder:et.Z.Messages.FORM_PLACEHOLDER_USERNAME,onChange:t,onMouseEnter:r,onMouseLeave:i})}}),(0,s.jsx)(C.zx,{className:er.marginTop20,disabled:!0,children:et.Z.Messages.CONTINUE}),(0,s.jsx)(C.i_,{disabled:!0,className:er.marginTop8,children:et.Z.Messages.TERMS_PRIVACY.format({termsURL:Q.EYA.TERMS,privacyURL:Q.EYA.PRIVACY})}),J.a?null:(0,s.jsx)(C.zx,{look:C.zx.Looks.LINK,color:C.zx.Colors.LINK,disabled:!0,className:er.marginTop20,children:et.Z.Messages.ALREADY_HAVE_ACCOUNT})]})]})}renderInviteHeader(){let{invite:e}=this.props;return(null==e?void 0:e.stage_instance)!=null&&null!=e.guild?(0,s.jsx)(S.Z,{stageInstance:e.stage_instance,guild:e.guild}):(null==e?void 0:e.guild_scheduled_event)!=null?(0,s.jsx)(R.r,{channel:e.channel,guildScheduledEvent:e.guild_scheduled_event}):(0,s.jsx)(Y.Z,{invite:e})}renderInviteButton(){let{invite:e,registering:t,consentRequired:n}=this.props,{consent:r}=this.state,i=C.zx.Colors.BRAND,a=et.Z.Messages.CONTINUE;return(null==e?void 0:e.stage_instance)!=null&&(i=C.zx.Colors.GREEN,a=et.Z.Messages.INSTANT_INVITE_ACCEPT_STAGE),(0,s.jsx)(_.Tooltip,{text:!r&&n?et.Z.Messages.TERMS_PRIVACY_OPT_IN_TOOLTIP:null,children:e=>(0,s.jsx)("div",{className:er.marginTop20,...e,children:(0,s.jsx)(C.zx,{type:"submit",submitting:t,disabled:!this.hasConsent(),color:i,children:a})})})}renderInvite(){let{invite:e,authBoxClassName:t,apiErrors:{username:n,global_name:r}}=this.props,{subText:i,consentText:a}=this.renderConsentComponents(),o=(null==e?void 0:e.stage_instance)!=null||(null==e?void 0:e.guild_scheduled_event)!=null,l=e=>{this.setState({globalName:e})},c=this.state.globalName;return(0,s.jsxs)("div",{children:[(0,s.jsxs)(C.ZP,{onSubmit:this.handleSubmit,tag:"form",className:t,children:[this.renderInviteHeader(),o?(0,s.jsx)("div",{className:en.divider}):null,(0,s.jsxs)(C.gO,{className:o?void 0:er.marginTop40,children:[(0,s.jsx)(_.FormTitle,{error:ea(null!=r?r:n),children:et.Z.Messages.DISPLAY_NAME}),(0,s.jsx)(_.Tooltip,{text:et.Z.Messages.AUTH_USERNAME_TOOLTIP,position:"right",color:_.Tooltip.Colors.BRAND,children:e=>{let{onMouseEnter:t,onMouseLeave:i}=e;return(0,s.jsx)(C.II,{autoFocus:!0,className:er.marginBottom8,name:"global_name",value:c,placeholder:et.Z.Messages.FORM_PLACEHOLDER_USERNAME,onChange:l,error:null!=n||null!=r?"":null,onMouseEnter:t,onMouseLeave:i})}}),(0,s.jsx)(_.Text,{variant:"text-sm/normal",color:"header-secondary",children:et.Z.Messages.UU_REGISTER_DISPLAY_NAME_HINT_2}),this.renderInviteButton(),i,a,J.a?null:(0,s.jsx)(C.zx,{look:C.zx.Looks.LINK,color:C.zx.Colors.LINK,onClick:this.handleGotoLogin,className:er.marginTop20,children:et.Z.Messages.ALREADY_HAVE_ACCOUNT})]})]}),null!=e&&o?(0,s.jsx)(C.ZP,{className:er.marginTop20,children:(0,s.jsx)(S.y,{guild:e.guild,onlineCount:e.approximate_presence_count})}):null]})}renderErrorMessage(){let{apiErrors:{message:e}}=this.props;return"string"!=typeof e?null:(0,s.jsx)(C.i_,{className:o()(er.marginTop20,en.errorMessage),children:e})}renderFull(e,t){let{email:n,username:r,globalName:a,password:l,consent:c,parsedDateOfBirth:u,globalNameFocused:d,emailClientError:h,usernameClientError:p,passwordClientError:f,dateOfBirthClientError:g}=this.state,{registering:m,consentRequired:I,isMobileWebInviteRegistration:A,uniqueUsernameRegistrationConfig:{suggestions:N},authBoxClassName:T,apiErrors:{email:R,username:S,global_name:b,password:v,date_of_birth:O}={},hasLoggedInAccounts:L,registrationCopyExperimentConfig:{hasCopyAboveButton:Z}}=this.props,{subText:M,consentText:w}=this.renderConsentComponents(),P=this.renderErrorMessage(),j=(0,s.jsx)(_.Tooltip,{text:!c&&I?et.Z.Messages.TERMS_PRIVACY_OPT_IN_TOOLTIP:null,children:e=>(0,s.jsx)("div",{className:er.marginTop20,...e,children:(0,s.jsx)(C.zx,{type:"submit",submitting:m,disabled:!this.hasConsent()||this.state.isRateLimited,children:et.Z.Messages.CONTINUE})})}),U=async()=>{this.setState({usernameFocused:!0}),N&&a.length>0&&!D.Z.wasRegistrationSuggestionFetched(a)&&await y.Z.fetchSuggestionsRegistration(a)},G=null!=e?(0,s.jsx)(i.Fragment,{children:e()},"custom-header"):(0,s.jsx)(C.Dx,{children:et.Z.Messages.REGISTER_TITLE},"title"),F=(0,s.jsxs)(C.gO,{className:er.marginTop20,children:[(0,s.jsx)(C.II,{autoFocus:!0,className:er.marginBottom20,label:et.Z.Messages.FORM_LABEL_EMAIL,name:"email",value:n,onChange:e=>this.setState({email:e,emailClientError:0===e.length?et.Z.Messages.REQUIRED:null}),error:null!=h?h:ea(R),type:"email",setRef:e=>{this.emailRef=e},required:!0}),(0,s.jsx)(C.II,{label:et.Z.Messages.DISPLAY_NAME,className:er.marginBottom20,name:"global_name",value:a,onChange:e=>this.setState({globalName:e}),error:ea(b),maxLength:ee.hy,setRef:e=>{this.globalNameRef=e},onFocus:()=>this.setState({globalNameFocused:!0}),onBlur:()=>this.setState({globalNameFocused:!1})}),(0,s.jsx)(k.Z,{show:d,top:-12,bottom:20,children:(0,s.jsx)(_.Text,{variant:"text-sm/normal",color:"text-normal",children:et.Z.Messages.UU_REGISTER_DISPLAY_NAME_HINT_2})}),(0,s.jsxs)("div",{onBlur:()=>this.setState({usernameFocused:!1}),onFocus:U,tabIndex:-1,children:[(0,s.jsx)(C.II,{label:et.Z.Messages.FORM_LABEL_USERNAME,className:er.marginBottom20,name:"username",value:r,onChange:e=>{this.setState({username:e.toLocaleLowerCase(),usernameClientError:0===e.length?et.Z.Messages.REQUIRED:null})},error:null!=p?p:ea(S),setRef:e=>{this.usernameRef=e},required:!0}),this.renderUsernameValidation()]}),(0,s.jsx)(C.II,{label:et.Z.Messages.FORM_LABEL_PASSWORD,name:"password",value:l,onChange:e=>this.setState({password:e,passwordClientError:0===e.length?et.Z.Messages.REQUIRED:null}),error:null!=f?f:ea(v),type:"password",setRef:e=>{this.passwordRef=e},required:!0}),(0,s.jsx)(E.Z,{label:et.Z.Messages.AGE_GATE_YOUR_BIRTHDAY,wrapperClassName:er.marginTop20,name:"date_of_birth",onChange:this.handleBirthdayChange,ref:this.dateOfBirthRef,error:null!=g?g:ea(O),value:u,required:!0}),Z&&M,(0,s.jsx)(x.Z,{}),j,P,w,!Z&&M,J.a?null:(0,s.jsx)(C.zx,{look:A?C.zx.Looks.FILLED:C.zx.Looks.LINK,color:A?C.zx.Colors.PRIMARY:C.zx.Colors.LINK,onClick:this.handleGotoLogin,className:er.marginTop20,children:et.Z.Messages.ALREADY_HAVE_ACCOUNT})]});return t?(0,s.jsx)(q.Z,{onSubmit:this.handleSubmit,tag:"form",className:o()(T,en.horizontalAuthBox),children:()=>[G,(0,s.jsxs)("div",{className:en.flex,children:[(0,s.jsx)(C.Dx,{className:en.createAccountTemplateHeader,children:et.Z.Messages.REGISTER_TITLE}),F]},"register-title")]}):(0,s.jsxs)(C.ZP,{onSubmit:this.handleSubmit,tag:"form",className:T,children:[L&&!A?(0,s.jsx)(C.zx,{onClick:this.handleGotoLogin,look:C.zx.Looks.LINK,color:C.zx.Colors.PRIMARY,className:en.goBackButton,children:(0,s.jsxs)("div",{className:en.content,children:[(0,s.jsx)(_.ChevronSmallLeftIcon,{size:"xs",color:"currentColor",className:en.caret}),(0,s.jsx)(_.Text,{variant:"text-md/normal",children:et.Z.Messages.AGE_GATE_GO_BACK})]})}):null,G,F]})}render(){let{isUnderage:e,isMobileWebInviteRegistration:t}=this.props;if(e||this.hasError("date_of_birth"))return(0,s.jsx)(g.Z,{});let{invite:n,giftCode:r,guildTemplate:i}=this.props,a=null!=n&&null==n.guild&&null==n.channel&&null!=n.inviter;return null==n||a||t?null!=i?this.renderFull(()=>(0,s.jsx)(O.Z,{guildTemplate:i}),!0):null!=r?this.renderFull(()=>(0,s.jsx)(V.Z,{giftCode:r})):null!=n&&a&&n.state===Q.r2o.RESOLVED&&!t?this.renderFull(()=>(0,s.jsx)(Y.Z,{invite:n,isRegister:!0})):this.renderFull():n.state===Q.r2o.RESOLVING?this.renderInviteResolving():this.renderInvite()}constructor(e){var t;super(e),es(this,"emailRef",void 0),es(this,"usernameRef",void 0),es(this,"globalNameRef",void 0),es(this,"passwordRef",void 0),es(this,"dateOfBirthRef",i.createRef()),es(this,"_retryTimer",new h.V7),es(this,"handleGotoLogin",e=>{let t;let{email:n}=this.state,{giftCode:r,guildTemplate:s,invite:i,location:a,onLoginStart:o,redirectTo:c,transitionTo:u,isMobileWebInviteRegistration:d}=this.props;if(d){null==o||o(e);return}let h=null!=a?(0,l.parse)(a.search):{};null!=i?t=Q.Z5c.INVITE_LOGIN(i.code):null!=r?t=Q.Z5c.GIFT_CODE_LOGIN(r.code):null!=s?t=Q.Z5c.GUILD_TEMPLATE_LOGIN(s.code):null!=c?(t=Q.Z5c.LOGIN,h.redirect_to=c):(t=Q.Z5c.LOGIN,""!==n&&(h={email:n})),p.Z.loginReset(),u(t,{search:(0,l.stringify)(h)}),null==o||o(e),z.S.dispatch(Q.CkL.WAVE_EMPHASIZE)}),es(this,"handleSubmit",e=>{null==e||e.preventDefault();let{email:t,username:n,password:r,parsedDateOfBirth:s}=this.state,{invite:i,consentRequired:a}=this.props;if(null!==a){if(null==i){let e=!1;if(0===t.length&&(this.setState({emailClientError:et.Z.Messages.REQUIRED}),e=!0),0===n.length&&(this.setState({usernameClientError:et.Z.Messages.REQUIRED}),e=!0),0===r.length&&(this.setState({passwordClientError:et.Z.Messages.REQUIRED}),e=!0),null==s&&(this.setState({dateOfBirthClientError:et.Z.Messages.REQUIRED}),e=!0),e)return}this.handleRegister()}}),es(this,"handleBirthdayChange",e=>{this.setState({parsedDateOfBirth:e}),null!=e&&this.setState({dateOfBirthClientError:null})}),es(this,"renderUsernameValidation",()=>{let{username:e,globalName:t,usernameFocused:n}=this.state,{usernameSuggestion:r,uniqueUsernameRegistrationConfig:{livecheckEnabled:i}}=this.props;return(0,s.jsx)(ec,{username:e,suggestion:r,livecheckEnabled:i,globalName:t,isUsernameFocused:n,onClickSuggestion:()=>{null!=this.usernameRef&&this.usernameRef.focus(),null!=r&&r.length>0&&this.setState({username:r})}})});let n=null!=e.location?(0,l.parse)(e.location.search):{};this.state={email:null!==(t=n.email)&&void 0!==t?t:"",username:"",globalName:"",password:"",parsedDateOfBirth:null,emailClientError:null,usernameClientError:null,passwordClientError:null,dateOfBirthClientError:null,consent:!e.consentRequired,consentRequiredProp:e.consentRequired,isRateLimited:!1,globalNameFocused:!1,usernameFocused:!1}}}function el(e){let t=(0,d.cj)([F.Z,G.default,f.Z,M.Z,L.Z],()=>({consentRequired:F.Z.getAuthenticationConsentRequired(),registering:G.default.getRegisterStatus()===Q.$ib.REGISTERING,apiErrors:G.default.getErrors(),authenticated:G.default.isAuthenticated(),isUnderage:f.Z.isUnderageAnonymous(),country:M.Z.getCountryCode(),hasLoggedInAccounts:L.Z.getHasLoggedInAccounts()})),n=(0,P.F4)(),r=(0,d.e7)([D.Z],()=>D.Z.registrationUsernameSuggestion()),[a,o]=i.useState(X.E.FULL);return(0,m.Z)({type:u.ImpressionTypes.VIEW,name:u.ImpressionNames.USER_REGISTRATION,properties:{impression_group:u.ImpressionGroups.USER_REGISTRATION_FLOW,step:a}},{},[a]),(0,s.jsx)(eo,{onChangeStep:e=>o(e),registrationCopyExperimentConfig:A.Z.getCurrentConfig({location:"0ba758_2"},{autoTrackExposure:!1}),uniqueUsernameRegistrationConfig:n,usernameSuggestion:r,...e,...t})}function ec(e){let t,{username:n,suggestion:r,globalName:i,livecheckEnabled:a,isUsernameFocused:o,onClickSuggestion:l}=e,u=(0,j.a)(n,a,!0),d=a&&n.length>0;return t=d?(0,c.EQ)(u).with({type:w.K.ERROR,message:c.P.select()},e=>(0,s.jsx)(_.Text,{className:en.messageNegative,variant:"text-sm/normal",children:e})).with({type:w.K.AVAILABLE,message:c.P.select()},e=>(0,s.jsx)(_.Text,{className:en.messagePositive,variant:"text-sm/normal",children:e})).otherwise(()=>(0,s.jsx)(_.Text,{variant:"text-sm/normal",color:"text-normal",children:et.Z.Messages.POMELO_EXISTING_FLOW_ERROR_INVALID})):null!=r&&r.length>0&&i.length>0?(0,s.jsx)(_.Text,{variant:"text-sm/normal",color:"text-normal",children:et.Z.Messages.UU_REGISTER_SUGGESTION.format({suggestion:r,nameOnClick:l})}):(0,s.jsx)(_.Text,{variant:"text-sm/normal",color:"text-normal",children:et.Z.Messages.POMELO_EXISTING_FLOW_ERROR_INVALID}),(0,s.jsx)(k.Z,{show:d&&(null==u?void 0:u.type)===w.K.ERROR||o,top:-12,bottom:20,children:t})}es(eo,"defaultProps",{giftCodeResolved:!1,transitionTo:e=>n.g.location.assign(e)})},937154:function(e,t,n){n.d(t,{Z:function(){return i}}),n(47120);var r=n(470079);function s(){return"undefined"==typeof document||"visible"===document.visibilityState}function i(){let[e,t]=(0,r.useState)(s());return(0,r.useEffect)(()=>{function e(){t(s())}return window.addEventListener("visibilitychange",e),()=>{window.removeEventListener("visibilitychange",e)}},[t]),e}},126399:function(e,t,n){n(47120);var r=n(544891),s=n(570140),i=n(893776),a=n(899742),o=n(743142),l=n(117240),c=n(626135),u=n(317770),d=n(981631);function h(e,t){c.default.track(d.rMx.BROWSER_HANDOFF_SUCCEEDED,{authenticated:e,handoff_source:t})}class _ extends u.Z{_initialize(){s.Z.subscribe("BROWSER_HANDOFF_END",this.handleEnd),s.Z.subscribe("BROWSER_HANDOFF_FROM_APP",this.handleHandoff)}_terminate(){s.Z.unsubscribe("BROWSER_HANDOFF_END",this.handleEnd),s.Z.unsubscribe("BROWSER_HANDOFF_FROM_APP",this.handleHandoff)}handleHandoff(e){let{handoffKey:t,handoffToken:n,fingerprint:s,handoffSource:l}=e;null!=n?r.tn.post({url:d.ANM.HANDOFF_EXCHANGE,body:{key:t,handoff_token:n}}).then(e=>{let{body:t}=e;(0,a.Vb)(t.user),i.Z.loginToken(t.token,!1),h(!0,l)},e=>{if(null!=s&&h(!1,l),i.Z.setFingerprint(s),(0,a.lx)(),l===o.F.ROLE_SUBSCRIPTION){var t;c.default.track(d.rMx.MOBILE_WEB_HANDOFF_FAILURE,{reason:null!==(t=e.message)&&void 0!==t?t:e.text,handoff_source:l})}}):null!=s?(i.Z.setFingerprint(s),h(!1,l),(0,a.lx)()):(i.Z.setFingerprint(s),(0,a.by)())}constructor(...e){var t,n,r;super(...e),t=this,n="handleEnd",r=e=>{let{handoffToken:t,fingerprint:n}=e,r=l.Z.key;null!=r&&l.Z.isHandoffAvailable()?this.handleHandoff({handoffKey:r,handoffToken:t,fingerprint:n,handoffSource:void 0}):(i.Z.setFingerprint(null),(0,a.by)())},n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}}t.Z=new _},605782:function(e,t,n){var r=n(735250),s=n(470079),i=n(266067),a=n(215569);class o extends s.Component{render(){let{children:e,location:t,history:n,staticContext:o,match:l,...c}=this.props,u=null,d=null;return s.Children.forEach(e,e=>{if(null==u&&s.isValidElement(e)){let{component:r,render:a,...l}=e.props,c=l.path||l.from;if(null!=(u=null!=c?(0,i.LX)(t.pathname,{...l,path:c}):null))l={...l,key:c,location:t,match:u,history:n,staticContext:o},null!=r?d=s.createElement(r,l):null!=a&&(d=a(l))}}),(0,r.jsx)(a.W,{...c,children:d})}}t.Z=(0,i.EN)(o)},771308:function(e,t,n){n.d(t,{Av:function(){return c},hp:function(){return d},wE:function(){return u}});var r=n(544891),s=n(570140),i=n(959776),a=n(626135),o=n(723359),l=n(981631);function c(e,t){return(0,i.Z)(e,t),a.default.track(l.rMx.AGE_GATE_ACTION,{source:t,action:o.Al.AGE_GATE_SUBMITTED}),r.tn.patch({url:l.ANM.ME,oldFormErrors:!0,body:{date_of_birth:e.format("YYYY-MM-DD")}}).then(e=>{let n=e.body;s.Z.dispatch({type:"CURRENT_USER_UPDATE",user:n}),a.default.track(l.rMx.AGE_GATE_ACTION,{source:t,action:o.Al.AGE_GATE_SUCCESS})})}function u(e){s.Z.dispatch({type:"AGE_GATE_PREVENT_UNDERAGE_REGISTRATION"}),a.default.track(l.rMx.AGE_GATE_ACTION,{source:e,action:o.Al.AGE_GATE_PREVENT_UNDERAGE_REGISTRATION})}function d(e){s.Z.dispatch({type:"AGE_GATE_LOGOUT_UNDERAGE_NEW_USER"}),a.default.track(l.rMx.AGE_GATE_ACTION,{source:e,action:o.Al.AGE_GATE_LOGOUT_UNDERAGE_NEW_USER})}},899370:function(e,t,n){var r,s,i,a,o=n(973361),l=n(442837),c=n(570140),u=n(358085),d=n(723359);let h=null,_="underage";class p extends(a=l.ZP.Store){isUnderageAnonymous(){if(u.isPlatformEmbedded){if(null!=h&&h+d.k0>Date.now())return!0}else return null!=o.parse(document.cookie)[_];return!1}}i="AgeGateStore",(s="displayName")in(r=p)?Object.defineProperty(r,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[s]=i,t.Z=new p(c.Z,{AGE_GATE_PREVENT_UNDERAGE_REGISTRATION:function(){h=Date.now();document.cookie="".concat(_,"=1;path=/")},LOGIN_SUCCESS:function(){h=null;document.cookie="".concat(_,"=1;path=/;max-age=0")}})},224841:function(e,t,n){var r=n(735250);n(470079);var s=n(481060),i=n(388905),a=n(703656),o=n(63063),l=n(981631),c=n(689938),u=n(644089);let d=()=>(0,a.uL)(l.Z5c.LOGIN);t.Z=e=>{let{authBoxClassName:t,underageMessage:a}=e;return(0,r.jsxs)(i.ZP,{className:t,children:[(0,r.jsx)("img",{alt:"",src:n(231443),className:u.img}),(0,r.jsx)(i.Dx,{className:u.title,children:c.Z.Messages.AGE_GATE_UNDERAGE_HEADER}),(0,r.jsx)(i.DK,{className:u.subtitle,children:c.Z.Messages.AGE_GATE_UNDERAGE_BODY.format({underageMessage:null!=a?a:c.Z.Messages.AGE_GATE_UNDERAGE_BODY_DEFAULT_REG_MESSAGE,helpURL:o.Z.getArticleURL(l.BhN.AGE_GATE)})}),(0,r.jsx)(s.Button,{fullWidth:!0,onClick:d,children:c.Z.Messages.AGE_GATE_UNDERAGE_BACK_TO_LOGIN})]})}},13430:function(e,t,n){n(47120),n(653041);var r=n(735250),s=n(470079),i=n(120356),a=n.n(i),o=n(913527),l=n.n(o),c=n(481060),u=n(987134),d=n(689938),h=n(967794);let _=l()().localeData().months(),p=Array.from(Array(31).keys()).map(e=>({value:e+1,label:"".concat(e+1)})),f=Array.from(Array(12).keys()).map(e=>({value:e+1,label:_[e]})),g=/[a-zA-Z0-9]/;function E(e){let{options:t,selectOption:n,children:i}=e,[a,o]=s.useState("");s.useEffect(()=>{if(""!==a){let e=setTimeout(()=>o(""),1e3);return()=>clearTimeout(e)}},[a,o]);let l=s.useCallback(e=>{if(g.test(e.key)){let r="".concat(a).concat(e.key.toLowerCase()),s=t.find(e=>e.label.toLowerCase().startsWith(r));null!=s&&n(s.value),o(r)}},[n,o,a,t]);return(0,r.jsx)("div",{onKeyDown:l,children:i})}function m(){let e=l()().localeData().longDateFormat("L"),t=e.indexOf("D"),n=e.indexOf("M"),r=e.indexOf("Y");return(-1===t||-1===n||-1===r)&&(t=0,n=1,r=2),[{index:t,type:"day"},{index:n,type:"month"},{index:r,type:"year"}].sort((e,t)=>e.index<t.index?-1:1)}let I=s.forwardRef(function(e,t){let{value:n,wrapperClassName:i,onChange:o,onPopulated:_,error:g,autoFocus:I,required:A}=e,{day:N,setDay:C,month:T,setMonth:R,year:x,setYear:S}=function(e){let t=null,n=null,r=null;null!=e&&(t=e.date(),n=e.month()+1,r=e.year());let[i,a]=s.useState(t),[o,l]=s.useState(n),[c,u]=s.useState(r);return{day:i,setDay:a,month:o,setMonth:l,year:c,setYear:u}}(n),b=s.useMemo(()=>null!=N&&null!=T&&null!=x?l()("".concat(N,"/").concat(T,"/").concat(x),"DD/MM/YYYY"):null,[N,T,x]);s.useEffect(()=>{o((null==b?void 0:b.isValid())?b:null)},[b,o]);let v=g;null!=b&&!b.isValid()&&(v=d.Z.Messages.AGE_GATE_INVALID_BIRTHDAY);let O=function(){let e=new Date().getFullYear(),t=s.useRef(Array.from(Array(150).keys()).map(t=>({value:e-t-3,label:"".concat(e-t-3)})));return s.useEffect(()=>{t.current=Array.from(Array(150).keys()).map(t=>({value:e-t-3,label:"".concat(e-t-3)}))},[e]),t.current}(),[L,Z]=s.useState(I?0:-1),M=s.useRef(null),y=s.useRef(null),D=s.useRef(null),w=s.useMemo(m,[]),P=s.useCallback(()=>{var e,t,n,r;switch(null===(e=w[L])||void 0===e?void 0:e.type){case"day":null===(t=M.current)||void 0===t||t.focus();break;case"month":null===(n=y.current)||void 0===n||n.focus();break;case"year":null===(r=D.current)||void 0===r||r.focus()}},[L,M,y,D,w]);s.useEffect(()=>{setTimeout(P,500)},[]),s.useEffect(()=>{if(L>=w.length){null==_||_();return}P()},[L,P]);let j=[];for(let e=0;e<3;e++){let{type:t}=w[e];switch(t){case"day":j.push({key:"day",input:(0,r.jsx)(E,{options:p,selectOption:C,children:(0,r.jsx)(u.Z,{ref:M,className:h.__invalid_inputDay,"aria-label":d.Z.Messages.AGE_GATE_DOB_DAY,menuPlacement:u.Z.MenuPlacements.TOP,placeholder:(0,r.jsx)("span",{"aria-hidden":!0,children:d.Z.Messages.AGE_GATE_DOB_DAY}),options:p,value:N,onChange:t=>{let{value:n}=t;C(n),Z(e+1)},maxMenuHeight:215})})});break;case"month":j.push({key:"month",input:(0,r.jsx)(E,{options:f,selectOption:R,children:(0,r.jsx)(u.Z,{ref:y,className:h.__invalid_inputMonth,"aria-label":d.Z.Messages.AGE_GATE_DOB_MONTH,menuPlacement:u.Z.MenuPlacements.TOP,placeholder:(0,r.jsx)("span",{"aria-hidden":!0,children:d.Z.Messages.AGE_GATE_DOB_MONTH}),options:f,value:T,onChange:t=>{let{value:n}=t;R(n),Z(e+1)},maxMenuHeight:215})})});break;case"year":j.push({key:"year",input:(0,r.jsx)(E,{options:O,selectOption:S,children:(0,r.jsx)(u.Z,{ref:D,className:h.__invalid_inputYear,"aria-label":d.Z.Messages.AGE_GATE_DOB_YEAR,menuPlacement:u.Z.MenuPlacements.TOP,placeholder:(0,r.jsx)("span",{"aria-hidden":!0,children:d.Z.Messages.AGE_GATE_DOB_YEAR}),options:O,value:x,onChange:t=>{let{value:n}=t;S(n),Z(e+1)},maxMenuHeight:215})})})}}return(0,r.jsxs)("fieldset",{className:a()(h.container,i),children:[(0,r.jsx)(c.FormTitle,{tag:"legend",required:A,error:v,children:d.Z.Messages.AGE_GATE_DATE_OF_BIRTH}),(0,r.jsx)("div",{className:h.inputs,children:j.map((e,t)=>{let{key:n,input:s}=e;return(0,r.jsx)("div",{tabIndex:t+1,className:h[n],children:s},n)})})]})});t.Z=I},743142:function(e,t,n){n.d(t,{F:function(){return s},L:function(){return l}});var r,s,i=n(754688),a=n(981631),o=n(176505);function l(e){let t=decodeURIComponent(e),n=(0,i.Qj)(t);return null!=n&&n.channelId===o.oC.ROLE_SUBSCRIPTIONS?"role_subscription":t===a.Z5c.SETTINGS(a.oAB.SUBSCRIPTIONS,"role-subscriptions")?"role_subscription_setting":void 0}(r=s||(s={})).ROLE_SUBSCRIPTION="role_subscription",r.ROLE_SUBSCRIPTION_SETTING="role_subscription_setting"},355142:function(e,t,n){var r,s,i,a;n.d(t,{E:function(){return s}}),(i=r||(r={})).VIEWED="viewed",i.SUBMITTED="submitted",i.RESEND_CODE="resend_code",i.INPUT_ERROR="input_error",i.RESPONSE_ERROR="response_error",i.SUCCESS="success",(a=s||(s={})).IDENTITY="identity",a.DISPLAY_NAME="display_name",a.ACCOUNT_INFORMATION="account_information",a.FULL="full",a.AGE_GATE="age_gate",a.INVITE="invite",a.SMS_VERIFY="sms_verify"},201207:function(e,t,n){var r=n(818083);t.Z=(0,r.B)({kind:"user",id:"2022-04_registration_copy_updates",label:"Registration Copy Updates",defaultConfig:{enableNewCopy:!1,hasCopyAboveButton:!1,hasProminentCopy:!1},treatments:[{id:1,label:"Continue / Copy Above Button / High Prominence Copy",config:{enableNewCopy:!0,hasCopyAboveButton:!0,hasProminentCopy:!0}},{id:2,label:"Continue / Copy Below Button / High Prominence Copy",config:{enableNewCopy:!0,hasCopyAboveButton:!1,hasProminentCopy:!0}},{id:3,label:"Continue / Copy Above Button / Normal Prominence Copy",config:{enableNewCopy:!0,hasCopyAboveButton:!0,hasProminentCopy:!1}}]})},959776:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(913527),s=n.n(r),i=n(626135),a=n(981631);function o(e,t){i.default.track(a.rMx.AGE_GATE_SUBMITTED,{dob:18>s()().diff(e,"years")?e.format("YYYY-MM-DD"):null,dob_day:e.date(),dob_month:e.month()+1,dob_year:e.year(),source:{section:t}})}},481230:function(e,t,n){n.d(t,{R$:function(){return g},ZP:function(){return f}});var r=n(913527),s=n.n(r),i=n(990547),a=n(570140),o=n(479531),l=n(771308),c=n(314897),u=n(626135),d=n(573261),h=n(959776),_=n(981631),p=n(723359);function f(e){let{invite:t=null,giftCodeSKUId:n=null,...r}=e;return g({...r,invite:t,giftCodeSKUId:n})}function g(e){let{email:t,phoneToken:n,username:r,globalName:f,consent:g,password:E,guildTemplateCode:m,birthday:I,invite:A=null,giftCodeSKUId:N=null,multiStep:C=!1,promoEmailConsent:T=null,usedUsernameSuggestion:R=null}=e;return a.Z.dispatch({type:"REGISTER",birthday:C?I:null}),null!=I&&((0,h.Z)(I,_.jXE.REGISTER),u.default.track(_.rMx.AGE_GATE_ACTION,{source:p.L0.REGISTER,action:p.Al.AGE_GATE_SUBMITTED}),!function(e){let t;let n=s()().diff(e,"years");!(n<13)&&(t=n>=13&&n<=17?"13-17":n>=18&&n<=22?"18-22":"23+",u.default.track(_.rMx.USER_AGE_SUBMITTED,{age_bucket:t}))}(I)),d.Z.post({url:_.ANM.REGISTER,body:{fingerprint:c.default.getFingerprint(),email:t,username:r,global_name:f,password:E,invite:A,consent:g,phone_token:n,date_of_birth:null==I?void 0:I.format("YYYY-MM-DD"),gift_code_sku_id:N,guild_template_code:m,promotional_email_opt_in:null==T?void 0:T.checked},trackedActionData:{event:i.NetworkActionNames.USER_REGISTER,properties:{invite_code:A,used_username_suggestion:R,promotional_email_opt_in:null==T?void 0:T.checked,promotional_email_pre_checked:null==T?void 0:T.preChecked,was_unique_username:!0}}}).then(e=>{a.Z.dispatch({type:"REGISTER_SUCCESS",token:e.body.token}),u.default.track(_.rMx.AGE_GATE_ACTION,{source:p.L0.REGISTER,action:p.Al.AGE_GATE_SUCCESS})},e=>{let t=new o.Z(e);throw a.Z.dispatch({type:"REGISTER_FAILURE",error:t}),null!=t.getFieldErrors("date_of_birth")&&l.wE(p.L0.REGISTER),u.default.track(_.rMx.REGISTER_SUBMIT_ERRORED,{is_unique_username_registration:!0,email_error_reason:t.getFirstFieldErrorMessage("email"),phone_error_reason:t.getFirstFieldErrorMessage("phone"),password_error_reason:t.getFirstFieldErrorMessage("password"),username_error_reason:t.getFirstFieldErrorMessage("username"),global_name_error_reason:t.getFirstFieldErrorMessage("global_name"),date_of_birth_error_reason:t.getFirstFieldErrorMessage("date_of_birth")}),e})}},853268:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(735250);n(470079);var s=n(120356),i=n.n(s),a=n(481060),o=n(285952),l=n(388905),c=n(148995),u=n(331651);function d(e){let{value:t,onChange:n,subText:s,muted:d,marginTopStyle:h}=e;return(0,r.jsx)(o.Z,{className:null!=h?h:u.marginTop20,align:o.Z.Align.CENTER,children:(0,r.jsx)(a.Checkbox,{value:t,type:a.Checkbox.Types.INVERTED,onChange:(e,t)=>n(t),className:c.checkbox,children:(0,r.jsx)(l.i_,{className:i()({[c.subText]:!d}),children:s})})})}},639946:function(e,t,n){n.d(t,{r:function(){return c}});var r=n(735250);n(470079);var s=n(481060),i=n(471445),a=n(742593),o=n(324402);function l(e){let{channel:t}=e,n=(0,i.Th)(t.type);return(0,r.jsxs)("div",{className:o.channelInfoContainer,children:[null!=n?(0,r.jsx)(n,{color:"currentColor",size:"custom",width:20,height:20}):null,(0,r.jsx)(s.Text,{className:o.channelInfoText,color:"none",variant:"text-sm/semibold",children:t.name})]})}function c(e){let{channel:t,guildScheduledEvent:n}=e;return(0,r.jsxs)("div",{className:o.container,children:[(0,r.jsx)(a.HZ,{className:o.statusContainer,guildId:n.guild_id,guildEvent:n,eventPreview:n}),(0,r.jsx)(a.Rf,{name:n.name,description:n.description,guildId:n.guild_id}),null!=t&&n.channel_id===t.id?(0,r.jsx)(l,{channel:t}):null]})}},616952:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(735250);n(470079);var s=n(882037),i=n(853268),a=n(689938),o=n(331651);function l(){let{required:e,checked:t}=(0,s.MD)();return e?(0,r.jsx)(i.Z,{value:t,subText:a.Z.Messages.PROMOTIONAL_EMAIL_OPT_IN_CONSENT,onChange:s.ZJ,marginTopStyle:o.marginTop8,muted:!0}):null}},692483:function(e,t,n){n.d(t,{K:function(){return s}});var r=n(998502);async function s(e){try{return await r.ZP.getSetting("USERNAME_PREFIX","")+e}catch(e){}return e}},970648:function(e,t,n){n(411104);var r=n(772848),s=n(544891),i=n(981631);async function a(e){let{body:{handoff_token:t}}=await s.tn.post({url:i.ANM.HANDOFF,body:{key:e},oldFormErrors:!0,retries:1});if(null!=t)return t;throw Error("Missing handoff token!")}t.Z={generateNonce:function(){return(0,r.Z)()},createHandoffToken:a}},86779:function(e,t,n){n(47120),n(315314),n(610138),n(216116),n(78328),n(815648),n(773603);var r,s,i=n(735250),a=n(470079),o=n(593473),l=n(756647),c=n(442837),u=n(544891),d=n(433517),h=n(481060),_=n(570140),p=n(893776),f=n(375964),g=n(314897),E=n(626135),m=n(70956),I=n(970648),A=n(981631),N=n(331542);let C="mweb_handoff_nonce",T="mweb_handoff_nonce_expiration",R=1*m.Z.Millis.MINUTE;(s=r||(r={})).NONCE_MISSING="nonce_missing",s.NONCE_EXPIRED="nonce_expired",s.NULL_HANDOFF_TOKEN="deep_link_failed",s.HANDOFF_EXCHANGE="handoff_exchange";let x=new Set(["nonce_missing","nonce_expired","handoff_exchange"]),S=new Set(["deep_link_failed"]),b=()=>{d.K.remove(C),d.K.remove(T)};t.Z=()=>{let e=(0,c.e7)([g.default],()=>g.default.getFingerprint()),{fingerprint:t,handoff_token:n}=(0,o.parse)(window.location.search),r=Array.isArray(t)?t.length>1?t[0]:null:t,s=null!=r?r:null!==e?e:void 0;a.useEffect(()=>{null!==r&&e!==r&&_.Z.dispatch({type:"FINGERPRINT",fingerprint:r})},[r,e]);let[m,v]=a.useState(null),O=a.useCallback(e=>{v(e),E.default.track(A.rMx.MOBILE_WEB_HANDOFF_FAILURE,{reason:e,fingerprint:(0,l.K)(s)},{fingerprint:s})},[v,s]),L=d.K.get(C);if("null"===n&&null===m&&O("deep_link_failed"),null!=n&&"null"!==n&&null==L&&null===m&&O("nonce_missing"),a.useEffect(()=>{if(null!=L){let e=d.K.get(T);(null==e||Date.now()>=e)&&(O("nonce_expired"),b())}},[L,O]),a.useEffect(()=>{null!=n&&"null"!==n&&null!=L&&null==m&&u.tn.post({url:A.ANM.HANDOFF_EXCHANGE,body:{key:L,handoff_token:n}}).then(e=>p.Z.loginToken(e.body.token,!1)).then(()=>{E.default.track(A.rMx.LOGIN_SUCCESSFUL,{source:A.uRl.MOBILE_WEB_HANDOFF,is_new_user:!1,fingerprint:(0,l.K)(s)});let e=new URL(window.location.href),t=new URLSearchParams(e.search);t.delete("handoff_token"),t.delete("fingerprint"),e.search=t.toString(),window.history.pushState(null,"",e)}).catch(()=>{O("handoff_exchange")}).finally(()=>{b()})},[n,L,m,s,O]),null==s)return null;let Z=(()=>{if(null==m)return(0,i.jsxs)(i.Fragment,{children:[f.MOBILE_WEB_HANDOFF_EXPLANATION_TEXT_LINE_1,(0,i.jsx)("br",{}),f.MOBILE_WEB_HANDOFF_EXPLANATION_TEXT_LINE_2]});if(S.has(m))return f.MOBILE_WEB_HANDOFF_ERROR_NO_TRY_AGAIN;if(x.has(m))return f.MOBILE_WEB_HANDOFF_ERROR_TRY_AGAIN})();return null!=m&&S.has(m)?(0,i.jsx)("div",{className:N.errorContainer,children:(0,i.jsx)(h.Text,{color:"interactive-normal",variant:"text-sm/semibold",children:Z})}):(0,i.jsxs)("div",{className:N.container,children:[(0,i.jsx)(h.Text,{variant:"text-sm/semibold",children:Z}),(0,i.jsx)(h.Button,{color:h.Button.Colors.BRAND_INVERTED,onClick:()=>{let e=I.Z.generateNonce();d.K.set(C,e),d.K.set(T,Date.now()+R);let t=new URL(A.x0X),n=new URLSearchParams(window.location.search);n.delete("fingerprint"),n.delete("handoff_token");let r=new URLSearchParams;r.set("redirect",encodeURIComponent(window.location.pathname+n.toString())),r.set("key",e),r.set("fingerprint",s),t.search=r.toString(),E.default.track(A.rMx.DEEP_LINK_CLICKED,{fingerprint:(0,l.K)(s),source:"mobile_web_handoff",destination:A.x0X},{fingerprint:s,flush:!0}),window.location.href=t.toString()},children:(0,i.jsx)(h.Text,{className:N.buttonText,variant:"text-sm/semibold",children:f.MOBILE_WEB_HANDOFF_BUTTON_TEXT})})]})}},480387:function(e,t,n){n.d(t,{HJ:function(){return h},Zd:function(){return p},yD:function(){return _}});var r=n(213919),s=n(544891),i=n(570140),a=n(893776),o=n(710845),l=n(314897),c=n(726745),u=n(981631);let d=new o.Z("MultiAccountActionCreators");function h(){let e=l.default.getId();c.Z.getUsers().forEach(async t=>{let n,{id:a}=t,o=r.getToken(a);if(null==o||""===o){i.Z.dispatch({type:"MULTI_ACCOUNT_VALIDATE_TOKEN_FAILURE",userId:a});return}i.Z.dispatch({type:"MULTI_ACCOUNT_VALIDATE_TOKEN_REQUEST",userId:a});try{n=await s.tn.get({url:u.ANM.ME,headers:{authorization:o},retries:3})}catch(t){let e=(null==t?void 0:t.status)===401||(null==t?void 0:t.status)===403;i.Z.dispatch({type:e?"MULTI_ACCOUNT_VALIDATE_TOKEN_FAILURE":"MULTI_ACCOUNT_VALIDATE_TOKEN_SUCCESS",userId:a});return}i.Z.dispatch({type:e===a?"CURRENT_USER_UPDATE":"USER_UPDATE",user:n.body}),i.Z.dispatch({type:"MULTI_ACCOUNT_VALIDATE_TOKEN_SUCCESS",userId:a})})}function _(e,t){d.log("Switching account to ".concat(e),{switchSynchronously:t});let n=r.getToken(e);return null==n?(d.log("Switching accounts failed because there was no token"),i.Z.dispatch({type:"MULTI_ACCOUNT_VALIDATE_TOKEN_FAILURE",userId:e}),Promise.resolve()):a.Z.switchAccountToken(n,t)}function p(e){i.Z.dispatch({type:"MULTI_ACCOUNT_REMOVE_ACCOUNT",userId:e})}},251423:function(e,t,n){n.d(t,{L:function(){return l}});var r=n(470079),s=n(442837),i=n(570140),a=n(480387),o=n(726745);function l(){let e=(0,s.cj)([o.Z],()=>({isLoading:o.Z.getIsValidatingUsers(),multiAccountUsers:o.Z.getUsers()}));return r.useEffect(()=>{i.Z.wait(()=>{a.HJ()})},[]),e}},913583:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(735250);n(470079);var s=n(990547),i=n(481060),a=n(213609),o=n(388905),l=n(760213),c=n(689938),u=n(251568);function d(e){let{onDismiss:t}=e;return(0,a.Z)({type:s.ImpressionTypes.MODAL,name:s.ImpressionNames.MULTI_ACCOUNT_SWITCH_LANDING}),(0,r.jsxs)(o.ZP,{className:u.chooseAccountAuthBox,children:[(0,r.jsx)(o.Dx,{children:c.Z.Messages.SWITCH_ACCOUNTS_CHOOSE_ACCOUNT}),(0,r.jsx)(i.Text,{className:u.chooseAccountHelpText,variant:"text-md/normal",color:"header-secondary",children:c.Z.Messages.SWITCH_ACCOUNTS_CHOOSE_ACCOUNT_HELPER}),(0,r.jsx)(l.Z,{actionText:c.Z.Messages.SWITCH_ACCOUNTS_ACTION_LOG_IN,onAction:e=>{e===l.W.LOGIN_REQUIRED&&t()}}),(0,r.jsx)("div",{className:u.actions,children:(0,r.jsx)(i.Button,{className:u.__invalid_chooseAccountButton,look:i.Button.Looks.LINK,color:i.Button.Colors.PRIMARY,onClick:t,size:i.Button.Sizes.MEDIUM,children:(0,r.jsx)(i.Text,{variant:"text-sm/normal",children:c.Z.Messages.SWITCH_ACCOUNTS_ADD_AN_ACCOUNT_BUTTON})})})]})}},929809:function(e,t,n){n.d(t,{H:function(){return i},c:function(){return s}});var r=n(570140);function s(e){r.Z.wait(()=>r.Z.dispatch({type:"NUF_NEW_USER",newUserType:e}))}function i(){r.Z.wait(()=>r.Z.dispatch({type:"NUF_COMPLETE"}))}},701476:function(e,t,n){var r,s;n.d(t,{M5:function(){return r}}),(s=r||(r={}))[s.MARKETING_UNCLAIMED=0]="MARKETING_UNCLAIMED",s[s.INVITE_UNCLAIMED=1]="INVITE_UNCLAIMED",s[s.ORGANIC_REGISTERED=2]="ORGANIC_REGISTERED",s[s.ORGANIC_REGISTERED_GUILD_TEMPLATE=3]="ORGANIC_REGISTERED_GUILD_TEMPLATE"},541692:function(e,t,n){let r;var s,i=n(442837),a=n(570140),o=n(133080);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let c=(0,o.K4)();function u(e){var t;let{countryCode:n}=e;if(null!=n)c=null!==(t=(0,o.Zz)(n))&&void 0!==t?t:(0,o.K4)()}class d extends(s=i.ZP.DeviceSettingsStore){initialize(e){if(null!=e)r=e.selectedCountryCode}getUserAgnosticState(){return{selectedCountryCode:r}}getCountryCode(){return null!=r?r:c}}l(d,"displayName","PhoneStore"),l(d,"persistKey","PhoneStore"),t.Z=new d(a.Z,{PHONE_SET_COUNTRY_CODE:function(e){let{countryCode:t}=e;r=t},CONNECTION_OPEN:u,SET_LOCATION_METADATA:u})},277390:function(e,t,n){n.d(t,{c2:function(){return f},cK:function(){return s}});var r,s,i,a,o=n(735250),l=n(470079),c=n(253483),u=n(655481);function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(r=s||(s={})).SIZE_40="SIZE_40",r.SIZE_60="SIZE_60";let h=Object.freeze({SIZE_40:"size-40",SIZE_60:"size-60"}),_=n(515695);class p extends(i=l.PureComponent){render(){let{className:e,text:t,...n}=this.props;return(0,o.jsx)("div",{style:{padding:8,borderRadius:4,width:n.size,height:n.size,backgroundColor:n.bgColor},className:e,children:(0,o.jsx)(c.default,{value:t,level:"M",...n})})}}d(p,"defaultProps",{size:128,bgColor:"#ffffff",fgColor:"#000000"});class f extends(a=l.PureComponent){render(){let{overlaySize:e}=this.props,t=h[null!=e?e:"SIZE_40"];return(0,o.jsxs)("div",{className:u.qrCodeContainer,children:[(0,o.jsx)(p,{...this.props}),(0,o.jsx)("div",{className:u.qrCodeOverlay,children:(0,o.jsx)("img",{className:u[t],src:_,alt:""})})]})}}d(f,"defaultProps",{size:144,bgColor:"#ffffff",fgColor:"#000000"}),t.ZP=p},987134:function(e,t,n){n.d(t,{Z:function(){return E},v:function(){return g}}),n(47120);var r,s,i,a=n(735250),o=n(470079),l=n(120356),c=n.n(l),u=n(536640),d=n(481060),h=n(981631),_=n(689938),p=n(362004);function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(i=r||(r={})).TOP="top",i.BOTTOM="bottom";let g={container:(e,t)=>{let{isDisabled:n}=t;return{...e,cursor:n?"not-allowed":void 0,pointerEvents:void 0,fontSize:16,fontWeight:500,width:"100%"}},control:(e,t)=>{let{isDisabled:n,menuIsOpen:r}=t;return{...e,backgroundColor:"var(--input-background)",borderColor:"var(--input-background)",opacity:n?.6:1,boxShadow:void 0,borderRadius:r?"4px 4px 0 0":"4px",minHeight:40,transition:"border 0.15s ease",cursor:n?"not-allowed":void 0,pointerEvents:n?"none":void 0,"&:hover":{borderColor:"var(--input-background)"}}},singleValue:(e,t)=>{let{isDisabled:n}=t;return{...e,color:"var(--interactive-normal)",opacity:n?.5:1}},input:e=>({...e,color:"var(--interactive-normal)"}),menu:e=>({...e,backgroundColor:"var(--background-secondary)",border:"1px solid var(--background-tertiary)",borderRadius:"0 0 4px 4px",color:"var(--interactive-normal)",marginTop:-1,marginBottom:-1}),clearIndicator:(e,t)=>{let{isDisabled:n}=t;return{...e,color:"var(--interactive-normal)",cursor:n?void 0:"pointer",opacity:.3,padding:"8px 0",transform:"scale(0.8)",":hover":{color:"var(--text-danger)",opacity:1}}},indicatorsContainer:e=>({...e,alignItems:"flex-start"}),dropdownIndicator:(e,t)=>{let{isDisabled:n}=t;return{...e,color:"var(--interactive-normal)",cursor:n?void 0:"pointer",opacity:n?.3:1,padding:"8px 8px 8px 0",":hover":{color:"var(--interactive-hover)",opacity:n?.3:1}}},menuList:e=>({...e,padding:0,"&::-webkit-scrollbar":{width:8,padding:"0px 2px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"var(--scrollbar-thin-thumb)",border:"2px solid transparent",backgroundClip:"padding-box",borderRadius:4},"&::-webkit-scrollbar-track-piece":{backgroundColor:"transparent",borderColor:"transparent"}}),option:(e,t)=>{let{isSelected:n,isFocused:r}=t;return{...e,...n?{backgroundColor:"var(--background-modifier-selected)",color:"var(--interactive-active)"}:r?{backgroundColor:"var(--background-modifier-hover)",color:"var(--interactive-hover)"}:{backgroundColor:"transparent",color:"var(--interactive-normal)"},cursor:"pointer",display:"flex",padding:12,alignItems:"center",minHeight:40,"&:active":{backgroundColor:"var(--background-modifier-selected)",color:"var(--interactive-active)"}}},placeholder:e=>({...e,color:"var(--text-muted)"})};class E extends(s=o.Component){focus(){var e;null===(e=this._selectRef.current)||void 0===e||e.focus()}render(){let e;let{className:t,selectClassName:n,error:r,valueRenderer:s,optionRenderer:i,multiValueRenderer:o,options:l,value:h,autofocus:f,disabled:E,clearable:m,searchable:I,styleOverrides:A,isMulti:N,placeholder:C,filterOption:T,closeMenuOnSelect:R=!0,...x}=this.props,S={...x};null!=f&&(S.autoFocus=f),null!=E&&(S.isDisabled=E),null!=m&&(S.isClearable=m),null!=I&&(S.isSearchable=I);let b={IndicatorSeparator:()=>null};null!=i&&(b.Option=e=>(0,a.jsx)(u.wx.Option,{...e,children:i(e.data)})),null!=s&&(b.SingleValue=e=>(0,a.jsx)(u.wx.SingleValue,{...e,children:s(e.data)})),null!=o&&(b.MultiValue=e=>o(e.data));if(N&&Array.isArray(h)){let t={};l.forEach(e=>{t[String(e.value)]=e}),e=h.map(e=>t[String(e)])}else e=null!=h?l.find(e=>e.value===h):null;return(0,a.jsx)(d.FocusRing,{focused:this.state.isFocused&&!this.state.isOpen,ringTarget:this._containerRef,children:(0,a.jsxs)("div",{className:c()(p.select,t,{[p.error]:null!=r}),ref:this._containerRef,children:[(0,a.jsx)(u.ZP,{...S,className:n,ref:this._selectRef,isMulti:N,components:b,options:l,styles:null!=A?A:g,onFocus:this.handleFocus,onBlur:this.handleBlur,onMenuOpen:this.handleMenuOpen,onMenuClose:this.handleMenuClose,closeMenuOnSelect:R,value:e,onKeyDown:this.handleKeyDown,placeholder:null!=C?C:_.Z.Messages.SELECT,noOptionsMessage:()=>_.Z.Messages.NO_RESULTS_FOUND,filterOption:T}),null!=r?(0,a.jsx)("div",{className:p.errorMessage,children:r}):null]})})}constructor(...e){super(...e),f(this,"_selectRef",o.createRef()),f(this,"_containerRef",o.createRef()),f(this,"state",{isFocused:!1,isOpen:!1}),f(this,"handleFocus",e=>{var t,n;this.setState({isFocused:!0}),null===(t=(n=this.props).onFocus)||void 0===t||t.call(n,e)}),f(this,"handleBlur",e=>{var t,n;this.setState({isFocused:!1}),null===(t=(n=this.props).onBlur)||void 0===t||t.call(n,e)}),f(this,"handleKeyDown",e=>{e.which===h.yXg.ESCAPE&&this.state.isOpen&&e.stopPropagation()}),f(this,"handleMenuOpen",()=>{this.setState({isOpen:!0})}),f(this,"handleMenuClose",()=>{this.setState({isOpen:!1})})}}f(E,"MenuPlacements",r)},172517:function(e,t,n){n.d(t,{FW:function(){return _},Pk:function(){return l},Rq:function(){return f},W_:function(){return a},dK:function(){return o},qd:function(){return p}}),n(518263),n(970173),n(520712),n(268111),n(941497),n(32026),n(480839),n(744285),n(492257),n(873817),n(642549),n(47120),n(757143),n(863942),n(411104);var r=n(512722),s=n.n(r),i=n(598077);function a(){return window.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["decrypt"])}async function o(e){return s()(null!=e.publicKey,"public key cannot be null"),btoa(String.fromCharCode(...new Uint8Array(await window.crypto.subtle.exportKey("spki",e.publicKey))))}async function l(e){return s()(null!=e.publicKey,"public key cannot be null"),d(await window.crypto.subtle.exportKey("spki",e.publicKey))}function c(e){return btoa(String.fromCharCode(...new Uint8Array(e))).replace(/\//g,"_").replace(/\+/g,"-").replace(/={1,2}$/,"")}function u(e){return Uint8Array.from(atob(e),e=>e.charCodeAt(0))}async function d(e){return c(await window.crypto.subtle.digest({name:"SHA-256"},e))}function h(e,t){return s()(null!=e.privateKey,"private key cannot be null"),window.crypto.subtle.decrypt({name:"RSA-OAEP",hash:"SHA-256"},e.privateKey,t)}async function _(e,t){let n=new TextDecoder,r=await h(e,u(t));return n.decode(r)}async function p(e,t){return c(await h(e,u(t)))}async function f(e,t){t=await _(e,t);let n=t.match(/^(\d+):(\d{1,4}):([a-zA-Z0-9_]+):(.*)$/);if(null==n)throw Error("Invalid encoded user record.");let[,r,s,a,o]=n;return new i.Z({id:r,discriminator:s,avatar:"0"===a?null:a,username:o})}},983155:function(e,t,n){e.exports={wrapper:"wrapper_ed5275"}},453931:function(e,t,n){e.exports={characterBackground:"characterBackground_bdd070",artwork:"artwork_bdd070",logoWithText:"logoWithText_bdd070",logo:"logo_bdd070"}},293377:function(e,t,n){e.exports={applicationIcon:"applicationIcon_db6d88",seasonalIcon:"seasonalIcon_db6d88"}},53154:function(e,t,n){e.exports={container:"container_f9c402",guildBadge:"guildBadge_f9c402",appIcon:"appIcon_f9c402",appIconSize:"appIconSize_f9c402",avatar:"avatar_f9c402",guildIcon:"guildIcon_f9c402",compactAvatar:"compactAvatar_f9c402",inviteResolvingGuildName:"inviteResolvingGuildName_f9c402",title:"title_f9c402",directInviteSubTitle:"directInviteSubTitle_f9c402",activityCount:"activityCount_f9c402",guildContainer:"guildContainer_f9c402",appIn:"appIn_f9c402",appGuildName:"appGuildName_f9c402",icon:"icon_f9c402"}},686557:function(e,t,n){e.exports={header:"header_d58f04",horizontalAuthBox:"horizontalAuthBox_d58f04",needAccount:"needAccount_d58f04",smallRegisterLink:"smallRegisterLink_d58f04",mainLoginContainer:"mainLoginContainer_d58f04",mobile:"mobile_d58f04",goBackButton:"goBackButton_d58f04",content:"content_d58f04",caret:"caret_d58f04"}},397195:function(e,t,n){e.exports={qrLogin:"qrLogin_c6cd4b",qrLoginInner:"qrLoginInner_c6cd4b",qrCode:"qrCode_c6cd4b",qrCodeContainer:"qrCodeContainer_c6cd4b",qrCodeOverlay:"qrCodeOverlay_c6cd4b",qrAvatar:"qrAvatar_c6cd4b",startOverButton:"startOverButton_c6cd4b",verticalSeparator:"verticalSeparator_c6cd4b"}},835234:function(e,t,n){e.exports={column:"column_ef5bab",container:"container_ef5bab",content:"content_ef5bab"}},182428:function(e,t,n){e.exports={errorMessage:"errorMessage_ee1c42",createAccountTemplateHeader:"createAccountTemplateHeader_ee1c42",horizontalAuthBox:"horizontalAuthBox_ee1c42",flex:"flex_ee1c42",divider:"divider_ee1c42",goBackButton:"goBackButton_ee1c42",content:"content_ee1c42",caret:"caret_ee1c42",messageNegative:"messageNegative_ee1c42",messagePositive:"messagePositive_ee1c42"}},644089:function(e,t,n){e.exports={title:"title_da258e",subtitle:"subtitle_da258e",img:"img_da258e"}},967794:function(e,t,n){n.r(e.exports={container:"container_a57e6a",title:"title_a57e6a",inputs:"inputs_a57e6a",day:"day_a57e6a",month:"month_a57e6a",year:"year_a57e6a",errors:"errors_a57e6a"})},562910:function(e,t,n){e.exports={discordLogo:"discordLogo_b83a05",authBox:"authBox_b83a05",authBoxExpanded:"authBoxExpanded_b83a05 authBox_b83a05",centeringWrapper:"centeringWrapper_b83a05",title:"title_b83a05",subText:"subText_b83a05",pill:"pill_b83a05",pillOnline:"pillOnline_b83a05",pillMessage:"pillMessage_b83a05",pillIconTotal:"pillIconTotal_b83a05 pillIcon_b83a05",pillIconOnline:"pillIconOnline_b83a05 pillIcon_b83a05",pillFlat:"pillFlat_b83a05",joiningAs:"joiningAs_b83a05",joiningAsAvatar:"joiningAsAvatar_b83a05",joiningAsUsername:"joiningAsUsername_b83a05",spinnerVideo:"spinnerVideo_b83a05",image:"image_b83a05",block:"block_b83a05",button:"button_b83a05",linkButton:"linkButton_b83a05",inviteIcon:"inviteIcon_b83a05",inviteLargeIcon:"inviteLargeIcon_b83a05 inviteIcon_b83a05",downloadButtonSubtext:"downloadButtonSubtext_b83a05",inputError:"inputError_b83a05",description:"description_b83a05"}},148995:function(e,t,n){e.exports={checkbox:"checkbox_bc87ef",subText:"subText_bc87ef"}},324402:function(e,t,n){e.exports={container:"container_d69c1e",statusContainer:"statusContainer_d69c1e",channelInfoContainer:"channelInfoContainer_d69c1e",channelInfoText:"channelInfoText_d69c1e"}},232862:function(e,t,n){e.exports={error:"error_c39a71",subTitle:"subTitle_c39a71",button:"button_c39a71",codeInput:"codeInput_c39a71"}},709101:function(e,t,n){e.exports={flex:"flex_e690b8",header:"header_e690b8",embed:"embed_e690b8",listeners:"listeners_e690b8",live:"live_e690b8",speakers:"speakers_e690b8",members:"members_e690b8",speaker:"speaker_e690b8",joinButton:"joinButton_e690b8",background:"background_e690b8",icon:"icon_e690b8",guild:"guild_e690b8",guildInfo:"guildInfo_e690b8",dot:"dot_e690b8",alignStart:"alignStart_e690b8",avatar:"avatar_e690b8",username:"username_e690b8"}},942463:function(e,t,n){e.exports={descriptionText:"descriptionText_f4ba67",truncate:"truncate_f4ba67"}},966820:function(e,t,n){e.exports={container:"container_f87f77"}},858625:function(e,t,n){e.exports={container:"container_a4ec62",eventName:"eventName_a4ec62",description:"description_a4ec62",descriptionWithThumbnail:"descriptionWithThumbnail_a4ec62",spacer:"spacer_a4ec62",rsvpCount:"rsvpCount_a4ec62",rsvpIcon:"rsvpIcon_a4ec62",creator:"creator_a4ec62",eventInfoStatusContainer:"eventInfoStatusContainer_a4ec62",statusContainer:"statusContainer_a4ec62",withThumbnail:"withThumbnail_a4ec62",thumbnailContainer:"thumbnailContainer_a4ec62",thumbnail:"thumbnail_a4ec62"}},642790:function(e,t,n){e.exports={eventStatusContainer:"eventStatusContainer_d6a475",isRecurring:"isRecurring_d6a475",eventStatusLabel:"eventStatusLabel_d6a475",liveEventEndTime:"liveEventEndTime_d6a475",newBadge:"newBadge_d6a475",newBadgeText:"newBadgeText_d6a475"}},627590:function(e,t,n){e.exports={image:"image_be5c11",header:"header_be5c11",usagePill:"usagePill_be5c11"}},275020:function(e,t,n){e.exports={container:"container_de67e1",title:"title_de67e1",subtitle:"subtitle_de67e1",userText:"userText_de67e1",usagePill:"usagePill_de67e1",verifiedNameContainer:"verifiedNameContainer_de67e1",verifiedIcon:"verifiedIcon_de67e1",verifiedCheckContainer:"verifiedCheckContainer_de67e1",verifiedCheck:"verifiedCheck_de67e1"}},602226:function(e,t,n){e.exports={header:"header_c03fd3",subtitle:"subtitle_c03fd3",closeButton:"closeButton_c03fd3",content:"content_c03fd3",smsInputContainer:"smsInputContainer_c03fd3",smsInput:"smsInput_c03fd3",error:"error_c03fd3",footer:"footer_c03fd3",listItemContainer:"listItemContainer_c03fd3",listItemText:"listItemText_c03fd3",listItemArrow:"listItemArrow_c03fd3"}},331542:function(e,t,n){e.exports={container:"container_b252f6",errorContainer:"errorContainer_b252f6 container_b252f6",buttonText:"buttonText_b252f6"}},251568:function(e,t,n){e.exports={chooseAccountAuthBox:"chooseAccountAuthBox_b4df52",chooseAccountHelpText:"chooseAccountHelpText_b4df52",actions:"actions_b4df52"}},941439:function(e,t,n){e.exports={list:"list_f20a46",accountCard:"accountCard_f20a46",separator:"separator_f20a46",userDetails:"userDetails_f20a46",usernameSection:"usernameSection_f20a46",hasActionMaxWidth:"hasActionMaxWidth_f20a46",username:"username_f20a46",userActions:"userActions_f20a46",userActionMenu:"userActionMenu_f20a46",overflowMenuIcon:"overflowMenuIcon_f20a46",textOverflow:"textOverflow_f20a46",hintText:"hintText_f20a46"}},410248:function(e,t,n){e.exports={outerContainer:"outerContainer_a0cb3d",container:"container_a0cb3d",innerContainer:"innerContainer_a0cb3d",countryCode:"countryCode_a0cb3d",separator:"separator_a0cb3d",popout:"popout_a0cb3d",hidden:"hidden_a0cb3d"}},489686:function(e,t,n){e.exports={input:"input_cc6ddd",inputWrapper:"inputWrapper_cc6ddd",inputField:"inputField_cc6ddd"}},655481:function(e,t,n){n.r(e.exports={qrCodeOverlay:"qrCodeOverlay_d2a6d1","size-40":"size-40_d2a6d1","size-60":"size-60_d2a6d1",qrCodeContainer:"qrCodeContainer_d2a6d1"})},362004:function(e,t,n){e.exports={select:"select_fb76b2",error:"error_fb76b2",errorMessage:"errorMessage_fb76b2"}},615231:function(e,t,n){function r(e){let t="==".slice(0,(4-e.length%4)%4),n=atob(e.replace(/-/g,"+").replace(/_/g,"/")+t),r=new ArrayBuffer(n.length),s=new Uint8Array(r);for(let e=0;e<n.length;e++)s[e]=n.charCodeAt(e);return r}function s(e){let t=new Uint8Array(e),n="";for(let e of t)n+=String.fromCharCode(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}n.d(t,{U2:function(){return E},wz:function(){return g}});var i="copy",a="convert";function o(e,t,n){if(t===i)return n;if(t===a)return e(n);if(t instanceof Array)return n.map(n=>o(e,t[0],n));if(t instanceof Object){let r={};for(let[s,i]of Object.entries(t)){if(i.derive){let e=i.derive(n);void 0!==e&&(n[s]=e)}if(!(s in n)){if(i.required)throw Error(`Missing key: ${s}`);continue}if(null==n[s]){r[s]=null;continue}r[s]=o(e,i.schema,n[s])}return r}}function l(e,t){return{required:!0,schema:e,derive:t}}function c(e){return{required:!0,schema:e}}function u(e){return{required:!1,schema:e}}var d={type:c(i),id:c(a),transports:u(i)},h={appid:u(i),appidExclude:u(i),credProps:u(i)},_={appid:u(i),appidExclude:u(i),credProps:u(i)};c({rp:c(i),user:c({id:c(a),name:c(i),displayName:c(i)}),challenge:c(a),pubKeyCredParams:c(i),timeout:u(i),excludeCredentials:u([d]),authenticatorSelection:u(i),attestation:u(i),extensions:u(h)}),u(i),c(i),c(i),c(a),u(i),c({clientDataJSON:c(a),attestationObject:c(a),transports:l(i,e=>{var t;return(null==(t=e.getTransports)?void 0:t.call(e))||[]})}),l(_,e=>e.getClientExtensionResults());var p={mediation:u(i),publicKey:c({challenge:c(a),timeout:u(i),rpId:u(i),allowCredentials:u([d]),userVerification:u(i),extensions:u(h)}),signal:u(i)},f={type:c(i),id:c(i),rawId:c(a),authenticatorAttachment:u(i),response:c({clientDataJSON:c(a),authenticatorData:c(a),signature:c(a),userHandle:c(a)}),clientExtensionResults:l(_,e=>e.getClientExtensionResults())};function g(e){return o(r,p,e)}async function E(e){let t=await navigator.credentials.get(e);return t.toJSON=()=>o(s,f,t),t}}}]);
//# sourceMappingURL=39227.7d2b4a4231dbdf4db41e.js.map