"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["80026"],{419851:function(e,s,n){e.exports=n.p+"9a36afa0add142038863.svg"},296507:function(e,s,n){e.exports=n.p+"8447e4e321cc04bd6a4c.svg"},866402:function(e,s,n){e.exports=n.p+"9d5696b9d1f0b77fd074.svg"},246403:function(e,s,n){e.exports=n.p+"76e4f80d3efc36d1f1fc.svg"},866319:function(e,s,n){n.d(s,{G:function(){return o},b:function(){return d}});var l=n(442837),t=n(430824),i=n(594174),r=n(944163),a=n(981631);function o(e){let{guildId:s}=e,n=(0,l.e7)([r.Z],()=>r.Z.get(s)),i=null==n?void 0:n.guild;return(0,l.e7)([t.Z],()=>{var e;let n=null===(e=t.Z.getGuild(s))||void 0===e?void 0:e.verificationLevel,l=null==i?void 0:i.verification_level;return(null!=n?n:l)===a.sFg.VERY_HIGH},[s,i])}function d(e){let{guildId:s}=e,n=(0,l.e7)([i.default],()=>i.default.getCurrentUser()),t=o({guildId:s}),r=(null==n?void 0:n.isPhoneVerified())||(null==n?void 0:n.isStaff()),a=(null==n?void 0:n.verified)||r;return{isPhoneVerificationLevel:t,isCurrentUserVerified:!!(t?r:a)}}},200305:function(e,s,n){n.d(s,{Y:function(){return D}}),n(47120);var l,t,i=n(735250),r=n(470079),a=n(120356),o=n.n(a),d=n(442837),u=n(481060),c=n(893776),I=n(809206),E=n(607070),M=n(339085),m=n(601964),_=n(650774),N=n(271383),x=n(430824),R=n(594174),f=n(285952),g=n(346656),h=n(626135),C=n(768581),T=n(863249),v=n(944163),A=n(246364),O=n(983736),F=n(266395),j=n(990488),Z=n(592286),L=n(981631),p=n(689938),B=n(640380),V=n(419851),S=n(296507),b=n(866402),P=n(246403);(t=l||(l={}))[t.CLAIM_ACCOUNT=0]="CLAIM_ACCOUNT",t[t.EMAIL_CONFIRMATION=1]="EMAIL_CONFIRMATION",t[t.VERIFICATION_FORM=2]="VERIFICATION_FORM";let y=e=>{let{headerId:s,email:n,password:l,setEmail:t,setPassword:r,emailError:a,passwordError:o}=e;return(0,i.jsxs)("div",{className:B.content,children:[(0,i.jsx)("div",{className:B.applicationIconContainer,children:(0,i.jsx)("img",{alt:p.Z.Messages.MEMBER_VERIFICATION_CLAIM_ACCOUNT_ICON,src:V,className:B.applicationIcon})}),(0,i.jsx)(u.Heading,{id:s,variant:"heading-xl/semibold",className:B.header,children:p.Z.Messages.MEMBER_VERIFICATION_CLAIM_ACCOUNT_TITLE}),(0,i.jsx)(u.Text,{variant:"text-sm/normal",color:"header-secondary",children:p.Z.Messages.MEMBER_VERIFICATION_CLAIM_ACCOUNT_SUBTITLE}),(0,i.jsx)("hr",{className:B.divider}),(0,i.jsx)(u.FormItem,{title:p.Z.Messages.FORM_LABEL_EMAIL,className:B.formItem,children:(0,i.jsx)(u.TextInput,{value:n,error:a,onChange:t,autoFocus:!0})}),(0,i.jsx)(u.FormItem,{title:p.Z.Messages.FORM_LABEL_PASSWORD,className:B.formItem,children:(0,i.jsx)(u.TextInput,{type:"password",value:l,error:o,onChange:r})})]})},U=e=>{let{headerId:s,email:n}=e;return(0,i.jsxs)("div",{className:B.content,children:[(0,i.jsx)("img",{alt:p.Z.Messages.MEMBER_VERIFICATION_VERIFY_EMAIL_ICON,src:P,className:B.applicationIcon}),(0,i.jsx)(u.Heading,{id:s,variant:"heading-xl/semibold",className:B.header,children:p.Z.Messages.MEMBER_VERIFICATION_EMAIL_CONFIRMATION_TITLE.format({email:n})}),(0,i.jsx)(u.Text,{variant:"text-sm/normal",color:"header-secondary",children:p.Z.Messages.MEMBER_VERIFICATION_EMAIL_CONFIRMATION_SUBTITLE}),(0,i.jsx)(u.Button,{className:B.resendButton,size:u.Button.Sizes.NONE,look:u.Button.Looks.LINK,onClick:()=>c.Z.verifyResend(),children:p.Z.Messages.MEMBER_VERIFICATION_EMAIL_RESEND})]})},D=e=>{var s;let{guildId:n,formState:l,updateFormState:t,isPreview:r=!1}=e,a=(0,d.e7)([v.Z],()=>v.Z.get(n));if(null==a)return null;let o=null!==(s=null!=l?l:null==a?void 0:a.formFields)&&void 0!==s?s:[],u=r?j.W:j.r;return(0,i.jsx)(u,{guildId:n,formFields:o,updateFormFields:t})},k=()=>n.e("26176").then(n.t.bind(n,737848,19)).then(e=>{let{default:s}=e;return s}),w=e=>{let{headerId:s,guildId:n,formState:l,updateFormState:t,useReducedMotion:r,isPreview:a=!1}=e;return(0,i.jsxs)("div",{className:B.content,children:[(0,i.jsxs)("div",{className:B.animationAndSparklesContainer,children:[(0,i.jsx)("img",{alt:p.Z.Messages.MEMBER_VERIFICATION_VERIFICATION_ICON,src:b,className:o()(B.sparkleIcon,B.sparkleBottom)}),(0,i.jsx)(u.LottieAnimation,{importData:k,shouldAnimate:!r,className:B.animation}),(0,i.jsx)("img",{alt:p.Z.Messages.MEMBER_VERIFICATION_VERIFICATION_ICON,src:S,className:o()(B.sparkleIcon,B.sparkleTop)})]}),(0,i.jsx)(u.Heading,{id:s,variant:"heading-xl/semibold",className:B.header,children:p.Z.Messages.MEMBER_VERIFICATION_MODAL_TITLE}),(0,i.jsx)(u.Text,{variant:"text-sm/normal",color:"header-secondary",className:B.subheader,children:p.Z.Messages.MEMBER_VERIFICATION_MODAL_SUBTITLE}),(0,i.jsx)("hr",{className:B.divider}),(0,i.jsx)(D,{guildId:n,formState:l,updateFormState:t,isPreview:a})]})};s.Z=e=>{var s,n;let{headerId:l,guildId:t,onClose:a,onComplete:c,inviteCode:j,isPreview:V=!1}=e,S=(0,F.rb)(e=>e.hasUnsubmittedChanges),b=(0,d.e7)([x.Z],()=>x.Z.getGuild(t)),P=(0,d.e7)([v.Z],()=>v.Z.get(t)),D=null==P?void 0:P.formFields.some(e=>e.field_type!==A.QJ.TERMS),k=(0,d.e7)([R.default],()=>R.default.getCurrentUser()),G=!(null==k?void 0:k.isClaimed()),H=null==k?void 0:k.verified,Y=null==k?void 0:k.isPhoneVerified(),z=(0,d.e7)([M.Z],()=>M.Z.getGuildEmoji(t)),{storeMemberCount:J,storeOnlineCount:Q}=(0,d.cj)([_.Z],()=>({storeMemberCount:_.Z.getMemberCount(t),storeOnlineCount:_.Z.getOnlineCount(t)})),[q,W]=r.useState(null!==(s=null==P?void 0:P.formFields)&&void 0!==s?s:[]),[X,K]=r.useState(!1),[$,ee]=r.useState(null),[es,en]=r.useState(G?0:2),[el,et]=r.useState(""),[ei,er]=r.useState(""),[ea,eo]=r.useState(null),[ed,eu]=r.useState(null),ec=null==P?void 0:P.guild,eI=r.useMemo(()=>null!=b?b:null!=ec?new m.ZP(ec):null,[b,ec]),eE=null!==(n=null==eI?void 0:eI.hasFeature(L.oNc.CLAN))&&void 0!==n&&n,{emojisToRender:eM,remainingEmojis:em,numGuildEmoji:e_}=r.useMemo(()=>{var e;let s=[...null!==(e=0===z.length?null==ec?void 0:ec.emojis:z)&&void 0!==e?e:[]].reverse(),n=0,l=s.length;return l>12&&null!=s&&(n=Math.min(l-(s=s.slice(0,11)).length,99)),{emojisToRender:s,remainingEmojis:n,numGuildEmoji:l}},[ec,z]),eN=null!=J?J:null==ec?void 0:ec.approximate_member_count,ex=null!=Q?Q:null==ec?void 0:ec.approximate_presence_count;r.useEffect(()=>((0,F.a5)(!1),()=>{(0,F.a5)(!1)}),[]),r.useEffect(()=>{T.Z.fetchVerificationForm(t,j)},[t,j]),r.useEffect(()=>{null!=P&&W(P.formFields)},[P]),r.useEffect(()=>{null!=k&&k.isClaimed()&&en(2)},[k]),r.useEffect(()=>{1===es&&H&&en(2)},[es,H]),r.useEffect(()=>{null!=t&&h.default.track(L.rMx.OPEN_MODAL,{type:Z.N4,guild_id:t})},[t]),r.useEffect(()=>{let e=q.some(e=>e.field_type!==A.QJ.TERMS&&(0,O.OA)(e));e&&!S?(0,F.a5)(!0):!e&&S&&(0,F.a5)(!1)},[q,S]);let eR=r.useMemo(()=>!(((null==eI?void 0:eI.verificationLevel)!==L.sFg.VERY_HIGH||(null==k?void 0:k.isStaff()))&&H||Y)||q.some(e=>!(0,O.OA)(e)),[q,eI,Y,H,k]),ef=(0,d.e7)([E.Z],()=>E.Z.useReducedMotion);if(null==eI)return null;let eg=async()=>{K(!0),eo(null),eu(null);try{await (0,I.S2)({email:el,password:ei}),K(!1),en(1)}catch(n){var e,s;eo(null==n?void 0:null===(e=n.body)||void 0===e?void 0:e.email),eu(null==n?void 0:null===(s=n.body)||void 0===s?void 0:s.password)}finally{K(!1)}},eh=async()=>{K(!0),ee(null);let e=null!=k?N.ZP.getMember(t,k.id):null;if(null!=e&&!e.isPending){null==a||a(!0);return}try{await (null==c?void 0:c({...null!=P?P:v.t,formFields:q})),null==a||a(!0)}catch(l){var s,n;let e=null==l?void 0:l.body;(null==e?void 0:null===(s=e.errors)||void 0===s?void 0:s.version)!=null||(null==e?void 0:null===(n=e.errors)||void 0===n?void 0:n.form_fields)!=null?ee(p.Z.Messages.MEMBER_VERIFICATION_VERSION_MISMATCH_ERROR):ee(null==e?void 0:e.message)}finally{K(!1)}};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(f.Z,{direction:f.Z.Direction.VERTICAL,justify:f.Z.Justify.BETWEEN,className:B.guildSidebar,shrink:0,children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(g.Z,{guild:eI,active:!0,className:o()(B.guildIcon,{[B.guildIconNoIcon]:null==eI.icon})}),(0,i.jsx)(u.Heading,{variant:"heading-lg/semibold",className:B.guildName,children:null==eI?void 0:eI.name}),(0,i.jsx)(u.Text,{className:B.guildDescription,variant:"text-sm/normal",color:"header-secondary",children:null==P?void 0:P.description}),null!=eM&&eM.length>0?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("hr",{className:B.divider}),(0,i.jsx)(u.FormTitle,{children:p.Z.Messages.MEMBER_VERIFICATION_NUM_EMOJIS.format({emojis:e_})}),(0,i.jsxs)("div",{className:B.emojisContainer,children:[eM.map(e=>{let s=C.ZP.getEmojiURL({id:e.id,animated:!1,size:24});return(0,i.jsx)(u.Tooltip,{text:":".concat(e.name,":"),children:e=>(0,i.jsx)("img",{...e,width:24,height:24,src:s,className:B.emoji,alt:""})},e.id)}),null!=em&&em>0?(0,i.jsx)(u.Heading,{variant:"heading-deprecated-12/semibold",className:B.emoji,color:"header-secondary",children:"+".concat(em)}):null]})]}):null]}),(0,i.jsxs)("div",{children:[null!=ex&&(0,i.jsxs)(f.Z,{align:f.Z.Align.CENTER,className:B.onlineCount,children:[(0,i.jsx)("div",{className:B.dotOnline}),(0,i.jsx)(u.Text,{variant:"text-sm/normal",children:p.Z.Messages.MEMBER_VERIFICATION_NUM_ONLINE.format({membersOnline:ex})})]}),null!=eN&&(0,i.jsxs)(f.Z,{align:f.Z.Align.CENTER,children:[(0,i.jsx)("div",{className:B.dotMembers}),(0,i.jsx)(u.Text,{variant:"text-sm/normal",children:p.Z.Messages.MEMBER_VERIFICATION_NUM_MEMBERS.format({members:eN})})]})]})]}),(0,i.jsxs)("div",{className:B.modal,children:[(0,i.jsx)(u.ModalContent,{className:B.modalContent,children:(0,i.jsx)(u.Sequencer,{className:o()(B.sequencer,{[B.centerContent]:2!==es}),steps:[0,1,2],step:es,children:(()=>{switch(es){case 0:return(0,i.jsx)(y,{headerId:l,email:el,password:ei,setEmail:et,setPassword:er,emailError:ea,passwordError:ed});case 1:return(0,i.jsx)(U,{headerId:l,email:el});case 2:return(0,i.jsx)(w,{headerId:l,guildId:t,formState:q,updateFormState:W,isPreview:V,useReducedMotion:ef})}})()})}),(()=>{switch(es){case 0:return(0,i.jsxs)(u.ModalFooter,{className:B.footer,children:[(0,i.jsx)(u.Button,{className:B.submitButton,type:"submit",submitting:X,onClick:eg,disabled:0===el.length||0===ei.length,children:p.Z.Messages.NEXT}),(0,i.jsx)(u.Text,{variant:"text-xs/normal",color:"header-secondary",children:p.Z.Messages.MEMBER_VERIFICATION_CLAIM_ACCOUNT_INFO})]});case 1:return null;case 2:return(0,i.jsxs)(u.ModalFooter,{className:B.footer,children:[(0,i.jsx)(u.Button,{className:B.submitButton,type:"submit",submitting:X,onClick:eh,color:u.Button.Colors.GREEN,disabled:null==c||eR,children:p.Z.Messages.SUBMIT}),null!=$&&(0,i.jsx)(u.Text,{variant:"text-xs/normal",color:"text-danger",children:$}),null==$&&D&&(0,i.jsxs)("div",{className:B.disclaimerFooter,children:[(0,i.jsx)(u.Text,{color:"header-secondary",variant:"text-xs/normal",children:p.Z.Messages.MEMBER_VERIFICATION_WARNING}),eE&&(0,i.jsx)(u.Text,{color:"header-secondary",variant:"text-xs/normal",children:p.Z.Messages.CLAN_APPLICATION_GDM_CONSENT})]})]})}})()]})]})}},118346:function(e,s,n){n.d(s,{B:function(){return I},b:function(){return c}}),n(47120);var l=n(735250),t=n(470079),i=n(481060),r=n(893776),a=n(489813),o=n(689938),d=n(953136);function u(){let[e,s]=t.useState(!1),[n,a]=t.useState(!1),[u,c]=t.useState(!1);t.useEffect(()=>{let e;return n&&(e=setTimeout(()=>{a(!1)},2e3)),()=>{null!=e&&clearTimeout(e)}},[n]);let I=async()=>{if(!e){s(!0);try{await r.Z.verifyResend(),a(!0),c(!0)}catch(e){}finally{s(!1)}}};return n?(0,l.jsx)(i.Text,{className:d.verifyConfirmText,variant:"text-sm/normal",color:"text-positive",children:o.Z.Messages.MEMBER_VERIFICATION_EMAIL_VERIFICATION_EMAIL_SENT}):(0,l.jsx)(i.Button,{size:i.Button.Sizes.SMALL,submitting:e,onClick:I,children:u?o.Z.Messages.RESEND_EMAIL_SHORT:o.Z.Messages.VERIFY})}function c(){return(0,l.jsx)(a.PU,{icon:i.EnvelopeIcon,text:o.Z.Messages.MEMBER_VERIFICATION_FORM_ITEM_EMAIL_VERIFICATION_LABEL,footnote:o.Z.Messages.MEMBER_VERIFICATION_MODAL_PRIVACY_DESCRIPTION,meetsRequirement:!1,children:(0,l.jsx)(i.Tooltip,{text:o.Z.Messages.MEMBER_VERIFICATION_VERIFICATION_FIELD_SETTINGS_TOOLTIP,children:e=>(0,l.jsx)(i.Button,{...e,size:i.Button.Sizes.SMALL,disabled:!0,children:o.Z.Messages.VERIFY})})})}function I(e){let{isUserVerified:s}=e,n=s?o.Z.Messages.MEMBER_VERIFICATION_EMAIL_VERIFIED:o.Z.Messages.MEMBER_VERIFICATION_FORM_ITEM_EMAIL_VERIFICATION_LABEL;return(0,l.jsx)(a.PU,{icon:i.EnvelopeIcon,text:n,footnote:o.Z.Messages.MEMBER_VERIFICATION_MODAL_PRIVACY_DESCRIPTION,meetsRequirement:s,children:(0,l.jsx)(u,{})})}},276486:function(e,s,n){n.d(s,{l:function(){return d},v:function(){return u}});var l=n(735250);n(470079);var t=n(481060),i=n(144114),r=n(489813),a=n(815660),o=n(689938);function d(){return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(r.PU,{icon:t.MobilePhoneIcon,text:o.Z.Messages.MEMBER_VERIFICATION_FORM_ITEM_PHONE_VERIFICATION_LABEL,footnote:o.Z.Messages.MEMBER_VERIFICATION_MODAL_PRIVACY_DESCRIPTION,meetsRequirement:!1,children:(0,l.jsx)(t.Tooltip,{text:o.Z.Messages.MEMBER_VERIFICATION_VERIFICATION_FIELD_SETTINGS_TOOLTIP,children:e=>(0,l.jsx)(t.Button,{...e,size:t.Button.Sizes.SMALL,disabled:!0,children:o.Z.Messages.VERIFY})})})})}function u(e){let{isUserVerified:s}=e,d=s?o.Z.Messages.MEMBER_VERIFICATION_PHONE_VERIFIED:o.Z.Messages.MEMBER_VERIFICATION_FORM_ITEM_PHONE_VERIFICATION_LABEL;return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(r.PU,{icon:t.MobilePhoneIcon,text:d,footnote:o.Z.Messages.MEMBER_VERIFICATION_MODAL_PRIVACY_DESCRIPTION,meetsRequirement:s,children:(0,l.jsx)(t.Button,{size:t.Button.Sizes.SMALL,onClick:()=>{(0,t.openModalLazy)(async()=>{let{default:e}=await Promise.all([n.e("76540"),n.e("7418")]).then(n.bind(n,607018));return s=>(0,l.jsx)(e,{reason:i.L.GUILD_PHONE_REQUIRED,...s})},{modalKey:a.M})},children:o.Z.Messages.VERIFY})})})}},990488:function(e,s,n){n.d(s,{W:function(){return x},r:function(){return R}}),n(47120);var l=n(735250),t=n(470079),i=n(442837),r=n(430824),a=n(594174),o=n(246364),d=n(866319),u=n(118346),c=n(186078),I=n(73880),E=n(276486),M=n(196345),m=n(707592),_=n(981631);function N(e){let{guildId:s,formFields:n,updateFormFields:t}=e,a=(0,i.e7)([r.Z],()=>{var e;return null===(e=r.Z.getGuild(s))||void 0===e?void 0:e.rulesChannelId}),d=(e,s)=>{let l=n[e];t([...n.slice(0,e),{...l,response:s},...n.slice(e+1)])},u=(e,s)=>{let l=n[e];t([...n.slice(0,e),{...l,response:s},...n.slice(e+1)])},E=(e,s)=>{let{value:l}=s,i=n[e];t([...n.slice(0,e),{...i,response:l},...n.slice(e+1)])},_=(e,s)=>{switch(e.field_type){case o.QJ.TERMS:return(0,l.jsx)(M.dd,{channelId:a,formField:e,onChange:(e,n)=>d(s,n)},s);case o.QJ.TEXT_INPUT:return(0,l.jsx)(m.zY,{formField:e,autofocus:0===s,onChange:e=>u(s,e)},s);case o.QJ.PARAGRAPH:return(0,l.jsx)(I.lX,{formField:e,autofocus:0===s,onChange:e=>u(s,e)},s);case o.QJ.MULTIPLE_CHOICE:return(0,l.jsx)(c.sp,{formField:e,onChange:e=>E(s,e)},s)}};return(0,l.jsx)(l.Fragment,{children:n.map((e,s)=>_(e,s))})}function x(e){let{guildId:s,formFields:n,updateFormFields:t}=e,o=(0,i.e7)([r.Z],()=>r.Z.getGuild(s)),c=(0,i.e7)([a.default],()=>a.default.getCurrentUser()),I=(0,d.G)({guildId:s})?E.l:u.b,M=null==o?void 0:o.hasFeature(_.oNc.COMMUNITY);return null==c?null:(0,l.jsxs)(l.Fragment,{children:[M&&(0,l.jsx)(I,{}),(0,l.jsx)(N,{guildId:s,formFields:n,updateFormFields:t})]})}function R(e){let{guildId:s,formFields:n,updateFormFields:o}=e,c=(0,i.e7)([r.Z],()=>r.Z.getGuild(s)),I=(0,i.e7)([a.default],()=>a.default.getCurrentUser()),{isPhoneVerificationLevel:M,isCurrentUserVerified:m}=(0,d.b)({guildId:s}),x=t.useRef(m),R=M?E.v:u.B,f=(null==c?void 0:c.hasFeature(_.oNc.COMMUNITY))&&!x.current;return null==I?null:(0,l.jsxs)(l.Fragment,{children:[f&&(0,l.jsx)(R,{isUserVerified:m}),(0,l.jsx)(N,{guildId:s,formFields:n,updateFormFields:o})]})}}}]);
//# sourceMappingURL=e32c8d7a79bd1692f3f5.js.map