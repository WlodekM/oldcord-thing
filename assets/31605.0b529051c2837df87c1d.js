"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["31605"],{365627:function(e,n,t){e.exports=t.p+"a398fdf7cebb1a429957.svg"},753260:function(e,n,t){e.exports=t.p+"2c64af033af4ea637189.svg"},987209:function(e,n,t){t.d(n,{KB:function(){return N},wD:function(){return h}}),t(47120);var r=t(735250),l=t(470079),i=t(479446),s=t(646476),a=t(975104),o=t(669079),u=t(598),c=t(474936),d=t(689938);let m=c.Cj.STANDARD_BOX,f=void 0,[x,h,C]=(0,a.Z)();function N(e){let{isGift:n=!1,giftRecipient:t,giftMessage:a,children:h}=e,{selectedSkuId:C}=(0,u.usePaymentContext)(),[N,v]=l.useState(t),[p,j]=l.useState(),[I,S]=l.useState(!1),E=(0,o.pO)(N),g=(0,s.rK)(),{enabled:A}=s.ZP.useExperiment({location:"PaymentContextProvider"},{autoTrackExposure:E&&g}),[O,P]=l.useState(E?A&&g?c.Cj.SEASONAL_STANDARD_BOX:m:f),[T,y]=l.useState(n&&(0,o.MY)(N)===o.xr.CUSTOM_MESSAGE_EMOJI_SOUNDBOARD?d.Z.Messages.DEFAULT_CUSTOM_GIFT_MESSAGE:a),[M,B]=l.useState(void 0),[R,L]=l.useState(void 0),k=(0,o.E5)(C,n),[U,_]=l.useState(!1),[b,Z]=l.useState(!1),[D,G]=l.useState(),H=l.useCallback(e=>{let{onSubscriptionConfirmation:n}=e;return Z(!0),(0,i.Y)(N,k).then(()=>{Z(!1),null==n||n(),_(!0)}).catch(e=>{Z(!1),G(e),_(!0)})},[N,k,Z,_,G]);return(0,r.jsx)(x.Provider,{value:{isGift:n,giftCode:k,giftMessage:a,giftRecipient:N,setGiftRecipient:v,giftRecipientError:p,setGiftRecipientError:j,validatingGiftRecipient:I,setValidatingGiftRecipient:S,soundEffect:M,setSoundEffect:B,emojiConfetti:R,setEmojiConfetti:L,customGiftMessage:T,setCustomGiftMessage:y,selectedGiftStyle:O,setSelectedGiftStyle:P,sendGiftMessage:H,hasSentMessage:U,isSendingMessage:b,giftMessageError:D},children:h})}},586585:function(e,n,t){t.d(n,{g:function(){return l}});var r,l,i=t(735250);t(470079);var s=t(481060),a=t(285952),o=t(612853),u=t(689938),c=t(568071);(r=l||(l={}))[r.CONTINUE=0]="CONTINUE",r[r.UPGRADE=1]="UPGRADE",r[r.PURCHASE=2]="PURCHASE";let d=e=>{let{onBack:n,backText:t,primaryIcon:r,primaryCTA:l,primaryType:d,primaryText:m,primaryTooltip:f,primaryDisabled:x,primarySubmitting:h,onPrimary:C,secondaryText:N,onSecondary:v}=e;return(0,i.jsxs)(s.ModalFooter,{justify:a.Z.Justify.BETWEEN,align:a.Z.Align.CENTER,children:[(()=>{if(null==l||null==m)return null;let e=2===l?s.ShinyButton:s.Button,n={innerClassName:c.button,type:d,disabled:x,submitting:h,color:0===l?s.Button.Colors.BRAND:s.Button.Colors.GREEN,onClick:C};return null!=f?(0,i.jsx)(s.Tooltip,{text:f,children:t=>(0,i.jsxs)(e,{...t,...n,children:[null==r?null:(0,i.jsx)(r,{color:"currentColor",className:c.primaryIcon}),m]})}):(0,i.jsxs)(e,{...n,children:[null==r?null:(0,i.jsx)(r,{color:"currentColor",className:c.primaryIcon}),m]})})(),null==N?null:(0,i.jsx)(s.Button,{color:s.Button.Colors.PRIMARY,look:s.Button.Looks.LINK,onClick:v,children:N}),(0,i.jsx)(o.Z,{}),null==n?null:(0,i.jsx)(s.Button,{className:c.back,color:s.Button.Colors.PRIMARY,look:s.Button.Looks.LINK,onClick:n,children:null!=t?t:u.Z.Messages.BACK})]})};d.CTAType=l,n.Z=d},612853:function(e,n,t){t.d(n,{Z:function(){return c}});var r=t(735250);t(470079);var l=t(120356),i=t.n(l),s=t(481060),a=t(689938),o=t(520410),u=t(83922);function c(){return(0,r.jsxs)("div",{className:i()(o.paymentModalLockIcon,u.flex,u.alignCenter),children:[(0,r.jsx)(s.LockIcon,{size:"sm",color:"currentColor",className:o.lockIcon}),(0,r.jsx)(s.Text,{variant:"text-sm/medium",children:a.Z.Messages.BILLING_SECURE})]})}},614277:function(e,n,t){t.d(n,{C3:function(){return x},O3:function(){return h},ZP:function(){return f}});var r=t(735250),l=t(470079),i=t(120356),s=t.n(i),a=t(512722),o=t.n(a),u=t(699581),c=t(481060),d=t(598),m=t(229828);function f(e){var n,t,i,a,u,f;let{header:x,isLargeModal:h,stepProps:C}=function(e){let{header:n,isLargeModal:t,...r}=e;return{header:n,isLargeModal:t,stepProps:r}}(e),{step:N,stepConfigs:v,setBodyNode:p,setFooterNode:j,setModalOverlayNode:I,setReadySlideId:S}=(0,d.usePaymentContext)(),E=v.find(e=>e.key===N);l.useEffect(()=>{I(null)},[N,I]),o()(null!=E,"Unknown step for current payment flow.");let g=null!==(u=null==E?void 0:null===(n=E.options)||void 0===n?void 0:n.hideSlider)&&void 0!==u&&u,A=null==E?void 0:null===(t=E.options)||void 0===t?void 0:t.bodyClassName,O=void 0!==h&&h?m.sliderBodyLarge:null==E?void 0:null===(i=E.options)||void 0===i?void 0:i.sliderBodyClassName;return(0,r.jsxs)(r.Fragment,{children:[null===(f=null==E?void 0:null===(a=E.options)||void 0===a?void 0:a.renderHeader)||void 0===f||f?x:null,E.renderStep(C),null==N||g?null:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.ModalContent,{className:s()(m.body,A),children:(0,r.jsx)(c.Slides,{activeSlide:N,centered:!1,onSlideReady:e=>S(e),children:v.filter(e=>null!=e.key).map(e=>(0,r.jsx)(c.Slide,{id:e.key,children:(0,r.jsx)("form",{className:s()(m.sliderBody,O),ref:e=>p(e),onSubmit:e=>e.preventDefault()})},e.key))})}),(0,r.jsx)("div",{ref:e=>j(e)}),(0,r.jsx)("div",{ref:e=>I(e)})]})]})}function x(e){let{children:n}=e,{bodyNode:t}=(0,d.usePaymentContext)();return null==t?null:u.createPortal(n,t)}function h(e){let{children:n}=e,{footerNode:t}=(0,d.usePaymentContext)();return null==t?null:u.createPortal(n,t)}},479446:function(e,n,t){t.d(n,{S:function(){return r},Y:function(){return m}}),t(411104);var r,l,i=t(512722),s=t.n(i),a=t(493683),o=t(904245),u=t(957730),c=t(592125),d=t(669079);(l=r||(r={})).ACTION="action",l.LOOP="loop",l.IDLE="idle";let m=async(e,n)=>{if(null==n)throw Error("giftCode must be defined");if(null==e)throw Error("Recipient must be defined");let t=await a.Z.openPrivateChannel(e.id).then(e=>{let n=c.Z.getChannel(e);if(s()(null!=n,"PrivateChannel is null"),null==n)throw Error("Channel must be defined");return n}),r=(0,d.Nz)(n);return o.Z.sendMessage(t.id,u.ZP.parse(t,r),void 0,{isGiftLinkSentOnBehalfOfUser:!0})}},750143:function(e,n,t){t.d(n,{X:function(){return l},i:function(){return r}});let r="(max-width: 485px)",l="(max-height: 450px)"},225715:function(e,n,t){t.d(n,{CW:function(){return c},G9:function(){return x},K9:function(){return f},q$:function(){return h},r0:function(){return d},s$:function(){return m}});var r=t(735250);t(470079);var l=t(120356),i=t.n(l),s=t(481060),a=t(41959),o=t(245561),u=t(620890);let c=e=>{let{application:n,asset:t,className:l,...i}=e;return(0,r.jsx)(a.Z,{application:n,size:a.H.MEDIUM,asset:t,className:l,...i})},d=e=>{let{children:n,className:t,id:l,...a}=e;return(0,r.jsx)(s.Heading,{className:i()(u.header,t),variant:"heading-xl/extrabold",id:l,...a,children:n})};function m(){return(0,r.jsx)("hr",{className:u.divider})}let f=e=>{let{className:n,title:t,description:l,...i}=e;return(0,r.jsxs)("div",{className:n,...i,children:[(0,r.jsx)(s.Heading,{variant:"heading-md/bold",color:"header-primary",children:t}),(0,r.jsx)(s.Heading,{variant:"heading-sm/normal",color:"header-secondary",children:l})]})},x=e=>{let{applicationId:n,storeListingBenefits:t,skuBenefits:l,className:s,...a}=e;return(0,r.jsx)("div",{className:i()(u.benefitsContainer,s),...a,children:(0,r.jsx)(o.GU,{applicationId:n,storeListingBenefits:t,skuBenefits:l,className:u.benefit})})},h=e=>{let{children:n,className:t,...l}=e;return(0,r.jsx)("div",{className:i()(u.container,t),...l,children:n})}},41959:function(e,n,t){t.d(n,{H:function(){return l}});var r,l,i=t(735250);t(470079);var s=t(120356),a=t.n(s),o=t(768581),u=t(73346),c=t(341274);(r=l||(l={}))[r.SMALL=40]="SMALL",r[r.MEDIUM=66]="MEDIUM";let d={40:c.small,66:c.medium};n.Z=e=>{let n,{application:t,size:r,asset:l,className:s}=e;return n=null!=l?(0,u._W)(t.id,l,r):o.ZP.getApplicationIconURL({id:t.id,icon:t.icon,size:r}),(0,i.jsx)("img",{alt:"",src:n,className:a()(c.icon,d[r],s)})}},689011:function(e,n,t){t.d(n,{Oc:function(){return C},t:function(){return h},xe:function(){return N}});var r=t(735250);t(470079);var l=t(481060),i=t(131388),s=t(409813),a=t(586585),o=t(614277),u=t(225715),c=t(750143),d=t(689938),m=t(141427),f=t(365627),x=t(753260);let h=e=>{let{step:n,onClose:t}=e,a=(0,i.Z)(c.X);return n===s.h8.CONFIRM||n===s.h8.BENEFITS?(0,r.jsx)("div",{}):(0,r.jsxs)("div",{className:m.headerContainer,children:[!a&&(0,r.jsx)("div",{className:m.headerImageContainer,"aria-hidden":"true",children:(0,r.jsx)("img",{src:x,alt:"",className:m.headerImage})}),(0,r.jsx)(l.Clickable,{className:m.closeContainer,onClick:()=>t(),"aria-label":d.Z.Messages.CLOSE,children:(0,r.jsx)(l.CloseSmallIcon,{size:"md",color:"currentColor",className:m.closeIcon})})]})},C=e=>{let{icon:n,storeListingBenefits:t,skuBenefits:l,application:i,title:s,subtitle:a,description:o}=e;return null==i?null:(0,r.jsx)("div",{className:m.confirmationContainer,children:(0,r.jsxs)(u.q$,{children:[(0,r.jsx)(u.CW,{application:i,asset:n}),(0,r.jsx)(u.r0,{children:s}),(0,r.jsx)(u.s$,{}),(0,r.jsx)(u.K9,{title:a,description:o}),(0,r.jsx)(u.G9,{applicationId:i.id,storeListingBenefits:t,skuBenefits:l})]})})};function N(e){let{tierName:n,onConfirm:t,subscription:i}=e;return(0,r.jsxs)("div",{className:m.purchaseConfirmation,children:[(0,r.jsx)("img",{src:f,alt:"",width:300,height:126}),(0,r.jsx)(l.Heading,{className:m.confirmationTitle,variant:"heading-xl/extrabold",color:"header-primary",children:d.Z.Messages.APPLICATION_SUBSCRIPTION_PURCHASE_CONFIRMATION_TITLE.format({tier:n})}),(0,r.jsx)(l.Text,{className:m.confirmationSubtitle,variant:"text-md/medium",color:"header-secondary",children:d.Z.Messages.APPLICATION_SUBSCRIPTION_PURCHASE_CONFIRMATION_SUBTITLE.format({timestamp:null==i?void 0:i.currentPeriodEnd})}),(0,r.jsx)(o.O3,{children:(0,r.jsx)(a.Z,{onPrimary:t,primaryCTA:a.g.CONTINUE,primaryText:d.Z.Messages.APPLICATION_SUBSCRIPTION_PURCHASE_MODAL_CONFIRMATION_DONE_BUTTON})})]})}}}]);
//# sourceMappingURL=31605.0b529051c2837df87c1d.js.map