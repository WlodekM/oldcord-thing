"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["95468"],{216019:function(e,t,n){e.exports=n.p+"48340e291a1e5f7e391d.svg"},524094:function(e,t,n){e.exports=n.p+"422277d5d38b9aad604e.svg"},802670:function(e,t,n){e.exports=n.p+"32a122be9f6977df7c96.svg"},17754:function(e,t,n){e.exports=n.p+"9181bb55a843090db30d.svg"},231239:function(e,t,n){var s=n(990547),a=n(283693),l=n(570140),i=n(573261),r=n(981631);t.Z={signup:(e,t)=>i.Z.post({url:r.ANM.HUB_WAITLIST_SIGNUP,body:{email:e,school:t},trackedActionData:{event:s.NetworkActionNames.HUB_WAITLIST_SIGNUP,properties:e=>{var t;let n=!1,s=null==e?void 0:null===(t=e.body)||void 0===t?void 0:t.email_domain;return null!=s&&(n=-1!==s.split(".").indexOf("edu")),(0,a.iG)({is_edu_email:n})}}}),sendVerificationEmail:async(e,t,n)=>(await i.Z.post({url:r.ANM.HUB_EMAIL_VERIFY_SEND,body:{email:e,guild_id:n,allow_multiple_guilds:t,use_verification_code:!0},trackedActionData:{event:s.NetworkActionNames.HUB_EMAIL_VERIFY_SEND,properties:e=>{var t;let n=null==e?void 0:null===(t=e.body)||void 0===t?void 0:t.has_matching_guild;return(0,a.iG)({has_matching_guild:n})}}})).body,async verify(e){if(null!=e)try{var t;let n=await i.Z.post({url:r.ANM.HUB_EMAIL_VERIFY,body:{token:e},trackedActionData:{event:s.NetworkActionNames.HUB_EMAIL_VERIFY}}),a=null===(t=n.body.guild)||void 0===t?void 0:t.id;l.Z.dispatch({type:"HUB_VERIFY_EMAIL_SUCCESS",guildId:a})}catch(e){l.Z.dispatch({type:"HUB_VERIFY_EMAIL_FAILURE",errors:e.body})}},async verifyCode(e,t,n){if(null!=e)try{var a;let o=await i.Z.post({url:r.ANM.HUB_EMAIL_VERIFY_CODE,body:{code:e,guild_id:t,email:n},trackedActionData:{event:s.NetworkActionNames.HUB_EMAIL_VERIFY}}),c=null===(a=o.body.guild)||void 0===a?void 0:a.id;return l.Z.dispatch({type:"HUB_VERIFY_EMAIL_SUCCESS",guildId:c}),o.body}catch(e){throw l.Z.dispatch({type:"HUB_VERIFY_EMAIL_FAILURE",errors:e.body}),e}}}},951716:function(e,t,n){n.d(t,{Z:function(){return l}});var s=n(344532),a=n(23434);function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.Z,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.Z;return null!=t.getAction()||Object.keys(e.getState()).length>0}},645792:function(e,t,n){n.d(t,{b:function(){return a}});let s=(0,n(818083).B)({kind:"user",id:"2022-08_back_to_school",label:"Back to School Event",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Back to School experience enabled",config:{enabled:!0}}]});function a(){return s.getCurrentConfig({location:"68acbb_1"},{autoTrackExposure:!1}).enabled}t.Z=s},495784:function(e,t,n){var s=n(913527),a=n.n(s),l=n(704215),i=n(951716),r=n(605236),o=n(972830),c=n(430824),d=n(594174),u=n(374023),_=n(709054),N=n(645792),E=n(981631),m=n(921944);t.Z={init(e){let{hasModalOpen:t,openModal:n}=e;if(!u.s.isDisallowPopupsSet())(0,o.h)(()=>{if((0,i.Z)())return;let e=d.default.getCurrentUser(),s=null!=e&&7>a()().diff(a()(_.default.extractTimestamp(e.id)),"days"),o=null!=Object.values(c.Z.getGuilds()).find(e=>e.hasFeature(E.oNc.HUB)),u=!(0,r.un)(l.z.HUB_BACK_TO_SCHOOL_UPSELL);!(s||t()||o||!u)&&(0,N.b)()&&(N.Z.trackExposure({location:"8b792a_1"}),n(),(0,r.kk)(l.z.HUB_BACK_TO_SCHOOL_UPSELL))})},hideHubUpsell(){(0,r.EW)(l.z.HUB_BACK_TO_SCHOOL_UPSELL,{dismissAction:m.L.AUTO})}}},994640:function(e,t,n){n(47120);var s=n(735250),a=n(470079),l=n(120356),i=n.n(l),r=n(481060),o=n(231239),c=n(881052),d=n(592125),u=n(153124),_=n(888592),N=n(981631),E=n(689938),m=n(782664);let I=(0,u.hQ)();t.Z=e=>{let{setStep:t,setGuildsInfo:n,email:l,setEmail:u,setGuildId:C,invite:T,onClose:h,isNUXFlow:x}=e,[g,v]=a.useState(null),[S,A]=a.useState(!1),f=async e=>{e.preventDefault(),v(null),A(!0);try{var s,a,i,r,u;let e=null!==(u=null!==(r=null==T?void 0:null===(s=T.guild)||void 0===s?void 0:s.id)&&void 0!==r?r:null===(a=d.Z.getChannel(null==T?void 0:null===(i=T.channel)||void 0===i?void 0:i.id))||void 0===a?void 0:a.getGuildId())&&void 0!==u?u:void 0;e===_.fQ&&(e=void 0);let c=await o.Z.sendVerificationEmail(l,!0,e),N=c.guilds_info;c.has_matching_guild?(C(e),t(_.tF.VERIFY_PIN)):0===N.length?t(_.tF.SUBMIT_SCHOOL):1===N.length?(C(N[0].id),await o.Z.sendVerificationEmail(l,!0,N[0].id),t(_.tF.VERIFY_PIN)):(n(N),t(_.tF.SELECT_SCHOOL))}catch(e){v(new c.Hx(e))}finally{A(!1)}},p=E.Z.Messages.HUB_EMAIL_CONNECTION_CONTENT_HEADER,O=E.Z.Messages.HUB_EMAIL_CONNECTION_CONTENT_DESCRIPTION;if(x)p=E.Z.Messages.HUB_EMAIL_CONNECTION_NUX_HEADER,O=E.Z.Messages.HUB_EMAIL_CONNECTION_NUX_CONTENT_DESCRIPTION;else if((null==T?void 0:T.guild)!=null&&T.guild.id!==_.fQ&&(null==T?void 0:T.approximate_member_count)!=null){let{name:e}=T.guild;p=E.Z.Messages.HUB_EMAIL_CONNECTION_INVITE_HEADER.format({guildName:e,count:T.approximate_member_count})}return(0,s.jsxs)("div",{className:m.container,children:[(0,s.jsx)("div",{className:m.topImage}),(0,s.jsx)(r.Heading,{className:i()(m.centerText,m.header),variant:"heading-xl/semibold",children:p}),(0,s.jsx)("div",{className:m.descriptionWidth,children:(0,s.jsx)(r.Text,{className:m.centerText,variant:"text-sm/normal",color:"header-secondary",children:O})}),(0,s.jsxs)("form",{className:m.formContent,onSubmit:f,children:[(0,s.jsxs)(r.FormItem,{children:[(0,s.jsx)(r.FormTitle,{id:I,children:E.Z.Messages.HUB_EMAIL_CONNECTION_CONTENT_INPUT_HEADER}),(0,s.jsx)(r.TextInput,{placeholder:E.Z.Messages.HUB_EMAIL_CONNECTION_CONTENT_INPUT_PLACEHOLDER,onChange:e=>{u(e)},error:null==g?void 0:g.getAnyErrorMessage(),"aria-labelledby":I})]}),(0,s.jsx)(r.Text,{color:"header-secondary",className:m.formDescription,variant:"text-sm/normal",children:E.Z.Messages.HUB_EMAIL_CONNECTION_CONTENT_INPUT_DESCRIPTION}),(0,s.jsx)(r.Button,{type:"submit",size:r.Button.Sizes.LARGE,color:r.Button.Colors.BRAND,className:m.submitButton,submitting:S,children:E.Z.Messages.HUB_EMAIL_CONNECTION_CONTENT_BUTTON}),(0,s.jsx)(r.Text,{className:m.termsPhrase,color:"header-secondary",variant:"text-xs/normal",children:E.Z.Messages.HUB_EMAIL_CONNECTION_CONTENT_TOS_AND_PP.format({termsURL:N.EYA.TERMS,privacyURL:N.EYA.PRIVACY})}),x&&(0,s.jsx)(r.Button,{look:r.Button.Looks.LINK,onClick:h,className:m.cancelButton,children:E.Z.Messages.HUB_EMAIL_CONNECTION_CANCEL})]})]})}},950012:function(e,t,n){n(47120);var s=n(735250),a=n(470079),l=n(994640),i=n(247007),r=n(999464),o=n(503406),c=n(463115),d=n(888592);t.Z=e=>{let{onClose:t,invite:n,forceGuildScrollHeight:u=!0,isNUXFlow:_}=e,[N,E]=a.useState([d.tF.VERIFY_EMAIL]),[m,I]=a.useState(""),[C,T]=a.useState(""),[h,x]=a.useState(void 0),[g,v]=a.useState([]),S=e=>{E(N.concat(e).slice(-4))};switch(N[N.length-1]){case d.tF.VERIFY_EMAIL:return(0,s.jsx)(l.Z,{setGuildsInfo:v,setStep:S,email:m,setEmail:I,setGuildId:x,invite:n,onClose:t,isNUXFlow:_});case d.tF.SELECT_SCHOOL:return(0,s.jsx)(i.Z,{guildsInfo:g,setStep:S,email:m,setGuildId:x,forceGuildScrollHeight:u});case d.tF.SUBMIT_SCHOOL:return(0,s.jsx)(r.Z,{onBack:()=>{N.length>1&&E(N.slice(0,-1).slice(-4))},setStep:S,email:m,school:C,setSchool:T});case d.tF.VERIFY_PIN:return(0,s.jsx)(o.Z,{email:m,onClose:t,guildId:h});case d.tF.EMAIL_WAITLIST:return(0,s.jsx)(c.Z,{setStep:S,school:C});default:return null}}},247007:function(e,t,n){n(47120);var s=n(735250),a=n(470079),l=n(120356),i=n.n(l),r=n(658722),o=n.n(r),c=n(481060),d=n(231239),u=n(881052),_=n(601964),N=n(346656),E=n(806519),m=n(768581),I=n(888592),C=n(689938),T=n(618036),h=n(216019);function x(e){var t;let{guildInfo:n,onClick:a,submitting:l}=e,i=null!==(t=m.ZP.getGuildIconURL({id:n.id,icon:n.icon,size:40}))&&void 0!==t?t:void 0;return(0,s.jsxs)(c.Clickable,{className:T.clickableGuildInfoRow,onClick:a,children:[(0,s.jsx)(E.ZP,{mask:E.ZP.Masks.AVATAR_DEFAULT,width:40,height:40,children:(0,s.jsx)(N.Z,{className:T.guildIcon,iconSrc:i,guild:new _.ZP(n),size:N.Z.Sizes.MEDIUM})}),(0,s.jsx)(c.Text,{className:T.guildName,variant:"text-md/semibold",children:n.name}),l?(0,s.jsx)(c.Spinner,{type:c.Spinner.Type.PULSING_ELLIPSIS}):(0,s.jsx)("img",{className:T.__invalid_arrow,alt:"",src:h})]})}t.Z=e=>{let{setStep:t,email:n,guildsInfo:l,setGuildId:r,forceGuildScrollHeight:_}=e,[N,E]=a.useState(null),[m,h]=a.useState(void 0),[g,v]=a.useState(null),S=e=>async()=>{E(null),r(e),v(e);try{await d.Z.sendVerificationEmail(n,!0,e),t(I.tF.VERIFY_PIN)}catch(e){E(new u.Hx(e))}finally{v(null)}},A=()=>t(I.tF.SUBMIT_SCHOOL),f=l;return null!=m&&""!==m&&(f=l.filter(e=>o()(m.toLowerCase(),e.name.toLowerCase()))),(0,s.jsxs)("div",{className:T.container,children:[(0,s.jsx)(c.Heading,{className:i()(T.centerText,T.header),variant:"heading-xl/semibold",children:C.Z.Messages.HUB_EMAIL_CONNECTION_GUILD_SELECT_HEADER}),(0,s.jsx)("div",{className:T.description,children:(0,s.jsx)(c.Text,{className:T.centerText,variant:"text-sm/normal",color:"header-secondary",children:C.Z.Messages.HUB_EMAIL_CONNECTION_GUILD_SELECT_SUBHEADER.format({onJoinWaitlist:A})})}),(0,s.jsxs)("div",{className:i()(T.guildList,{[T.forcedHeight]:_}),children:[(0,s.jsxs)("div",{className:T.searchContainer,children:[(0,s.jsx)(c.SearchBox,{placeholder:C.Z.Messages.SEARCH,className:T.searchBox,inputClassName:T.searchBoxInput,searchIconClassName:T.searchBoxIcon,closeIconClassName:T.searchBoxIcon,onChange:e=>{h(e)},label:C.Z.Messages.SEARCH,searchTerm:m,onClear:()=>{h(void 0)}}),(0,s.jsx)(c.Text,{color:"text-danger",variant:"text-xs/normal",children:null==N?void 0:N.getAnyErrorMessage()})]}),f.length>0?(0,s.jsx)(c.ScrollerThin,{className:T.scroller,children:f.map(e=>void 0===e?null:(0,s.jsx)(x,{guildInfo:e,onClick:S(e.id),submitting:g===e.id},e.id))}):(0,s.jsx)("div",{className:T.noResultsContainer,children:(0,s.jsxs)("div",{className:T.noResultsContent,children:[(0,s.jsx)("div",{className:T.noResultsImage}),(0,s.jsx)(c.Heading,{className:i()(T.centerText,T.header),variant:"heading-xl/semibold",children:C.Z.Messages.HUB_EMAIL_CONNECTION_GUILD_SELECT_NO_RESULTS_HEADER}),(0,s.jsx)(c.Text,{className:T.centerText,variant:"text-md/normal",children:C.Z.Messages.HUB_EMAIL_CONNECTION_GUILD_SELECT_NO_RESULTS_SUBHEADER.format({onJoinWaitlist:A})})]})})]})]})}},650233:function(e,t,n){n.r(t),n.d(t,{HubEmailConnectionModalView:function(){return m},default:function(){return E}});var s=n(735250),a=n(470079),l=n(990547),i=n(481060),r=n(390885),o=n(495784),c=n(950012),d=n(161836),u=n(630724),_=n(689938),N=n(781426);function E(e){let{transitionState:t,onClose:n,isNUXFlow:E}=e;return a.useEffect(()=>{o.Z.hideHubUpsell(),E&&r.Z.flowStep(u.MK.ORGANIC,u.EW.HUB_CONNECTION)},[E]),(0,s.jsx)(i.ModalRoot,{className:N.modalRoot,transitionState:t,"aria-label":_.Z.Messages.HUB_WAITLIST_MODAL_JOIN_HEADER,impression:{impressionName:l.ImpressionNames.HUB_EMAIL_SIGNUP},children:(0,s.jsx)(i.ModalContent,{style:{overflow:"hidden",paddingRight:"0px"},paddingFix:!1,className:N.modalContent,children:(0,s.jsxs)("div",{className:N.container,children:[(0,s.jsx)("div",{className:N.sidebarContainer,children:(0,s.jsx)(d.Z,{})}),(0,s.jsxs)("div",{className:N.contentContainer,children:[(0,s.jsx)(i.ModalCloseButton,{onClick:n,className:N.closeButton}),(0,s.jsx)(c.Z,{isNUXFlow:E,onClose:n})]})]})})})}let m=e=>{let{invite:t}=e;return(0,s.jsxs)("div",{className:N.container,children:[(0,s.jsx)("div",{className:N.sidebarContainer,children:(0,s.jsx)(d.Z,{})}),(0,s.jsx)("div",{className:N.contentContainer,children:(0,s.jsx)(c.Z,{invite:t})})]})}},161836:function(e,t,n){var s=n(735250);n(470079);var a=n(481060),l=n(689938),i=n(855445);t.Z=()=>(0,s.jsxs)("div",{className:i.container,children:[(0,s.jsx)("div",{className:i.iconContainer,children:(0,s.jsx)("div",{className:i.icon})}),(0,s.jsx)(a.Text,{color:"header-primary",variant:"text-lg/semibold",className:i.header,children:l.Z.Messages.HUB_EMAIL_CONNECTION_SIDEBAR_HEADER}),(0,s.jsx)(a.Text,{color:"header-secondary",variant:"text-sm/normal",className:i.description,children:l.Z.Messages.HUB_EMAIL_CONNECTION_SIDEBAR_DESCRIPTION.format()})]})},999464:function(e,t,n){n(47120);var s=n(735250),a=n(470079),l=n(120356),i=n.n(l),r=n(481060),o=n(231239),c=n(881052),d=n(153124),u=n(888592),_=n(981631),N=n(689938),E=n(541261);let m=(0,d.hQ)();t.Z=e=>{let{email:t,setStep:n,onBack:l,school:d,setSchool:I}=e,[C,T]=a.useState(null),[h,x]=a.useState(!1),g=async()=>{T(null),x(!0);try{await o.Z.signup(t,d),n(u.tF.EMAIL_WAITLIST)}catch(e){T(new c.Hx(e))}finally{x(!1)}},v=async e=>{null!=d&&""!==d&&e.charCode===_.yXg.ENTER&&await g()};return(0,s.jsxs)("div",{className:E.container,children:[(0,s.jsx)("div",{className:E.__invalid_topImage}),(0,s.jsx)(r.Heading,{className:i()(E.centerText,E.header),variant:"heading-xl/semibold",children:N.Z.Messages.HUB_EMAIL_CONNECTION_SCHOOL_SUBMIT_HEADER}),(0,s.jsx)("div",{className:E.descriptionWidth,children:(0,s.jsx)(r.Text,{className:E.centerText,variant:"text-sm/normal",color:"header-secondary",children:N.Z.Messages.HUB_EMAIL_CONNECTION_SCHOOL_SUBMIT_DESCRIPTION})}),(0,s.jsxs)(r.FormItem,{className:E.formItem,children:[(0,s.jsx)(r.FormTitle,{id:m,children:N.Z.Messages.HUB_EMAIL_CONNECTION_SCHOOL_SUBMIT_INPUT_HEADER}),(0,s.jsx)(r.TextInput,{onKeyPress:v,placeholder:N.Z.Messages.HUB_EMAIL_CONNECTION_SCHOOL_SUBMIT_INPUT_PLACEHOLDER,onChange:e=>{I(e)},error:null==C?void 0:C.getAnyErrorMessage(),"aria-labelledby":m})]}),(0,s.jsxs)("div",{className:E.footer,children:[(0,s.jsx)(r.Button,{className:E.backButton,onClick:l,look:r.Button.Looks.LINK,size:r.Button.Sizes.NONE,color:r.Button.Colors.PRIMARY,children:N.Z.Messages.BACK}),(0,s.jsx)(r.Button,{onClick:g,size:r.Button.Sizes.MEDIUM,color:r.Button.Colors.BRAND,className:E.__invalid_submitButton,submitting:h,children:N.Z.Messages.JOIN_WAITLIST})]})]})}},503406:function(e,t,n){n(47120);var s=n(735250),a=n(470079),l=n(120356),i=n.n(l),r=n(392711),o=n.n(r),c=n(481060),d=n(231239),u=n(881052),_=n(703656),N=n(153124),E=n(981631),m=n(689938),I=n(192690);let C=(0,N.hQ)();t.Z=e=>{let{email:t,guildId:n,onClose:l}=e,[r,N]=a.useState(""),[T,h]=a.useState(null),x=a.useCallback(async()=>{if(null!=n)try{let e=await d.Z.verifyCode(r,n,t);e.guild&&(null==l||l(),(0,_.uL)(E.Z5c.CHANNEL(e.guild.id)))}catch(e){h(new u.Hx(e))}},[r,t,n,l]),g=o().throttle(()=>{d.Z.sendVerificationEmail(t,!0,n)},1e3),v=async e=>{null!=r&&""!==r&&e.charCode===E.yXg.ENTER&&await x()};return(0,s.jsxs)("div",{className:I.container,children:[(0,s.jsx)("div",{className:I.topImage}),(0,s.jsx)(c.Heading,{className:i()(I.centerText,I.header),variant:"heading-xl/semibold",children:m.Z.Messages.HUB_VERIFY_EMAIL_ADDRESS}),(0,s.jsx)("div",{className:I.descriptionWidth,children:(0,s.jsx)(c.Text,{className:I.centerText,variant:"text-sm/normal",color:"header-secondary",children:m.Z.Messages.HUB_PIN_DESCRIPTION.format({email:t,onClick:g})})}),(0,s.jsxs)(c.FormItem,{className:I.formItem,children:[(0,s.jsx)(c.FormTitle,{id:C,children:m.Z.Messages.HUB_ENTER_PIN}),(0,s.jsx)(c.TextInput,{onKeyPress:v,onChange:e=>{null!=e&&""!==e&&N(e)},error:null==T?void 0:T.getAnyErrorMessage(),"aria-labelledby":C})]}),(0,s.jsx)(c.Button,{fullWidth:!0,onClick:x,size:c.Button.Sizes.LARGE,color:c.Button.Colors.BRAND,children:(0,s.jsx)(c.Text,{className:I.submitText,variant:"text-sm/normal",children:m.Z.Messages.SUBMIT})})]})}},463115:function(e,t,n){var s=n(735250);n(470079);var a=n(120356),l=n.n(a),i=n(481060),r=n(888592),o=n(689938),c=n(782664);t.Z=e=>{let{school:t,setStep:n}=e;return(0,s.jsxs)("div",{className:c.container,children:[(0,s.jsx)("div",{className:c.topImage}),(0,s.jsx)(i.Heading,{className:l()(c.centerText,c.header),variant:"heading-xl/semibold",children:o.Z.Messages.HUB_WAITLIST_MODAL_JOINED_HEADER}),(0,s.jsx)("div",{className:c.descriptionWidth,children:(0,s.jsx)(i.Text,{className:c.centerText,variant:"text-sm/normal",color:"header-secondary",children:o.Z.Messages.HUB_WAITLIST_MODAL_JOINED_DESCRIPTION.format({school:t})})}),(0,s.jsx)(i.Button,{look:i.Button.Looks.LINK,size:i.Button.Sizes.SMALL,color:i.Button.Colors.LINK,onClick:()=>{n(r.tF.VERIFY_EMAIL)},className:c.__invalid_resendLink,children:o.Z.Messages.HUB_EMAIL_CONFIRMATION_DIFFERENT_EMAIL})]})}},630724:function(e,t,n){var s,a,l,i,r,o,c,d,u,_;n.d(t,{EW:function(){return r},FF:function(){return a},MK:function(){return s},X2:function(){return i},mx:function(){return l}}),(o=s||(s={})).UNKNOWN="unknown",o.ANY="any",o.INVITE="invite",o.ORGANIC="organic_registration",o.ORGANIC_MARKETING="organic_marketing",o.ORGANIC_GUILD_TEMPLATES="organic_guild_template",o.CREATE_GUILD="create_guild",(c=a||(a={})).AGE_GATE="age_gate",c.AGE_GATE_UNDERAGE="age_gate_underage",(d=l||(l={})).CLAIM_ACCOUNT="claim_account",d.CLAIM_ACCOUNT_SUCCESS="claim_account_success",(u=i||(i={})).GUILD_TEMPLATES="guild_templates",u.GUILD_CREATE="guild_create",u.CREATION_INTENT="creation_intent",u.CHANNEL_PROMPT="channel_prompt",u.JOIN_GUILD="join_guild",u.SUCCESS="create_success",(_=r||(r={})).NUF_STARTED="nuf_started",_.AGE_GATE="age_gate",_.NUF_COMPLETE="nuf_complete",_.HUB_CONNECTION="hub_connection"},390885:function(e,t,n){var s=n(652874),a=n(433517),l=n(710845),i=n(626135),r=n(630724),o=n(981631);let c="UserFlowAnalyticsStore_current",d="UserFlowAnalyticsStore";function u(e){if(e===r.MK.UNKNOWN)return null;let t=a.K.get("".concat(d,"-").concat(e));if(null==t)return null;let{version:n,...s}=t;return 1!==n?null:s}new l.Z("UserFlowAnalytics");let _=(0,s.Z)((e,t)=>({flows:{},currentFlow:null,activeFlow:()=>{var e;let n=null!==(e=t().currentFlow)&&void 0!==e?e:a.K.get(c);if(null==n)return null;let{[n]:s}=t().flows,l=null!=s?s:u(n);return(null==l?void 0:l.currentStep)!=null?n:null}}));function N(e,t){let{[e]:n,...s}=_.getState().flows,a=null!=n?n:u(e);if((null==a?void 0:a.currentStep)==null||a.currentStep!==t)_.setState({flows:{...s,[e]:{type:e,lastStep:null,lastTimestamp:null,currentStep:t,currentTimestamp:new Date,skipped:!1}},currentFlow:e})}function E(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=e;if(e===r.MK.ANY){var a;s=null!==(a=_.getState().activeFlow())&&void 0!==a?a:r.MK.UNKNOWN}let{[s]:l,...i}=_.getState().flows,o=null!=l?l:u(s);if(null!=o&&null!=o.currentStep&&o.currentStep!==t)_.setState({flows:{...i,[s]:{...o,lastStep:o.currentStep,lastTimestamp:o.currentTimestamp,currentStep:t,currentTimestamp:new Date,ended:n}},currentFlow:s})}_.subscribe(e=>{var t;if(null!=e){if(!function(e){if(e.type===r.MK.UNKNOWN)return;let t="".concat(d,"-").concat(e.type);e.ended?(a.K.remove(t),a.K.remove(c)):(a.K.set("".concat(d,"-").concat(e.type),{...e,version:1}),a.K.set(c,e.type))}(e),i.default.track(o.rMx.NUO_TRANSITION,{flow_type:e.type,from_step:e.lastStep,to_step:e.currentStep,seconds_on_from_step:"function"!=typeof(null===(t=e.lastTimestamp)||void 0===t?void 0:t.getTime)?0:(e.currentTimestamp.getTime()-e.lastTimestamp.getTime())/1e3},{flush:!0}),e.ended){let t={..._.getState().flows};delete t[e.type],_.setState({flows:t,currentFlow:null})}}},e=>null!=e.currentFlow?e.flows[e.currentFlow]:void 0);function m(){return null!=_.getState().activeFlow()}t.Z={flowStart:N,flowStepOrStart:function(e,t){m()?E(e,t):N(e,t)},flowStep:E,hasActiveFlow:m}}}]);
//# sourceMappingURL=8a46b1cb69093421f11b.js.map