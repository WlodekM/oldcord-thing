"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["93669"],{379760:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(735250);n(470079);var s=n(481060),i=n(985513),o=n(285952),a=n(388905),l=n(689938),c=n(232862),u=n(331651);function d(e){let{title:t,subtitle:n,error:d,onSubmit:h,onCancel:p}=e;return(0,r.jsxs)(o.Z,{direction:o.Z.Direction.VERTICAL,children:[(0,r.jsx)(a.Dx,{className:u.marginBottom8,children:t}),(0,r.jsx)(a.DK,{className:c.subTitle,children:n}),(0,r.jsxs)("div",{children:[(0,r.jsx)(i.Z,{inputClassName:c.codeInput,onSubmit:h}),null!=d?(0,r.jsx)(s.Text,{className:c.error,variant:"text-sm/normal",children:d}):null]}),null!=p&&(0,r.jsx)(s.Button,{className:c.button,onClick:p,color:s.Button.Colors.PRIMARY,children:l.Z.Messages.CANCEL})]})}},760213:function(e,t,n){n.d(t,{W:function(){return r},Z:function(){return I}}),n(773603);var r,s,i=n(735250),o=n(470079),a=n(120356),l=n.n(a),c=n(442837),u=n(481060),d=n(893776),h=n(239091),p=n(598077),C=n(314897),f=n(246946),m=n(594174),x=n(626135),N=n(51144),g=n(480387),v=n(726745),y=n(251423),j=n(981631),A=n(689938),E=n(941439);function T(e){let{actionText:t,user:n,onAction:r}=e,{currentUser:s,hidePrivateData:o,isAuthenticated:a}=(0,c.cj)([m.default,f.Z,C.default],()=>({currentUser:m.default.getCurrentUser(),hidePrivateData:f.Z.hidePersonalInformation,isAuthenticated:C.default.isAuthenticated()})),y=new p.Z(n),T=a&&(null==s?void 0:s.id)===y.id,I=n.tokenStatus===v.q.INVALID,_=o||y.isPomelo()?null:"#".concat(y.discriminator),w=null;return T?w=(0,i.jsx)(u.Text,{variant:"text-sm/semibold",className:E.hintText,color:"text-positive",children:A.Z.Messages.SWITCH_ACCOUNTS_ACTIVE_ACCOUNT}):I&&(w=(0,i.jsx)(u.Text,{variant:"text-sm/semibold",className:E.hintText,color:"text-danger",children:A.Z.Messages.SWITCH_ACCOUNTS_INVALID_TOKEN})),(0,i.jsx)("div",{className:E.accountCard,children:(0,i.jsxs)("div",{className:E.userDetails,children:[(0,i.jsx)(u.Avatar,{src:y.getAvatarURL(void 0,40),size:u.AvatarSizes.SIZE_40,"aria-label":n.username}),(0,i.jsxs)("div",{className:l()(E.usernameSection,{[E.hasActionMaxWidth]:!T}),children:[(0,i.jsxs)("div",{className:E.username,children:[(0,i.jsx)(u.Text,{variant:"text-md/semibold",color:"header-primary",className:E.textOverflow,children:N.ZP.getUserTag(y,{mode:"username",identifiable:o?"never":"always"})}),(0,i.jsx)(u.Text,{color:"header-secondary",variant:"text-sm/normal",children:_})]}),w]}),(0,i.jsxs)("div",{className:E.userActions,children:[!T&&(0,i.jsx)(u.Button,{onClick:function(){if(I){r(0,n.id);return}x.default.track(j.rMx.MULTI_ACCOUNT_SWITCH_ATTEMPT,{location:{section:j.jXE.MANAGE_ACCOUNTS_MODAL}}),g.yD(n.id),r(1,n.id)},color:u.Button.Colors.PRIMARY,children:I?A.Z.Messages.SWITCH_ACCOUNTS_ACTION_LOG_IN:t}),(0,i.jsx)(u.Button,{className:E.userActionMenu,onClick:function(e){(0,h.vq)(e,e=>{let{onSelect:t}=e;return(0,i.jsx)(u.Menu,{"aria-label":A.Z.Messages.SWITCH_ACCOUNTS_MANAGE_ACCOUNT,navId:"manage-multi-account",onClose:h.Zy,onSelect:t,children:(0,i.jsx)(u.MenuItem,{id:"remove-account",label:A.Z.Messages.SWITCH_ACCOUNTS_REMOVE_ACCOUNT,action:()=>{!function(){d.Z.logout(null,n.id).finally(()=>{g.Zd(n.id)});let e={};null!=s?e.section=j.jXE.MANAGE_ACCOUNTS_MODAL:e.page=j.Usc.LOGIN,x.default.track(j.rMx.MULTI_ACCOUNT_ACCOUNT_REMOVE,{location:e}),r(2,n.id)}(),null!=t&&t()},color:"danger"})})})},size:u.Button.Sizes.ICON,look:u.Button.Looks.BLANK,color:u.Button.Colors.WHITE,"aria-label":A.Z.Messages.MORE_OPTIONS,children:(0,i.jsx)(u.MoreHorizontalIcon,{size:"md",color:"currentColor",className:E.overflowMenuIcon})})]})]})})}function I(e){let{actionText:t,onAction:n}=e,{isLoading:r,multiAccountUsers:s}=(0,y.L)();return(0,i.jsx)("div",{className:E.list,children:r?(0,i.jsx)(u.Spinner,{}):s.map((e,r)=>(0,i.jsxs)(o.Fragment,{children:[(0,i.jsx)(T,{user:e,actionText:t,onAction:n},e.id),s.length-1!==r&&(0,i.jsx)("div",{role:"separator",className:E.separator})]},e.id))})}(s=r||(r={}))[s.LOGIN_REQUIRED=0]="LOGIN_REQUIRED",s[s.SWITCHED=1]="SWITCHED",s[s.REMOVED=2]="REMOVED"},742458:function(e,t,n){var r,s;n.d(t,{Nz:function(){return r},o9:function(){return a}}),(s=r||(r={})).PHONE="phone",s.EMAIL="email";let i=/^[-() \d]+$/,o=e=>e.startsWith("+");function a(e,t){return"phone"===e?!o(t):"email"!==e&&!(t.length<3)&&i.test(t)}},766650:function(e,t,n){n.d(t,{Z:function(){return C}}),n(47120);var r=n(735250),s=n(470079),i=n(120356),o=n.n(i),a=n(920906),l=n(442837),c=n(481060),u=n(607070),d=n(144114),h=n(317175),p=n(410248);function C(e){let{show:t,alpha2:n,countryCode:i}=e,C=(0,l.e7)([u.Z],()=>u.Z.useReducedMotion),f=s.useRef(null),[m,x]=s.useState(0),[N,g]=s.useState(!1);s.useEffect(()=>{function e(){var e,n;x(t&&null!==(n=null===(e=f.current)||void 0===e?void 0:e.getBoundingClientRect().width)&&void 0!==n?n:0)}return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[t,n,i]);let v=(0,a.useSpring)({width:"".concat(m,"px"),immediate:C,onStart:()=>{g(!0)},onRest:()=>{g(!1)}}),y=e=>{d.Z.setCountryCode(e)};return(0,r.jsx)(c.Popout,{position:"top",renderPopout:e=>(0,r.jsx)(h.Z,{className:p.popout,onClick:t=>{y(t),e.closePopout()}}),children:e=>(0,r.jsx)("div",{className:o()(p.outerContainer,{[p.hidden]:!(t||N)}),children:(0,r.jsx)(a.animated.div,{className:p.container,style:v,children:(0,r.jsxs)("div",{className:p.innerContainer,ref:f,children:[(0,r.jsxs)(c.Clickable,{...e,className:p.countryCode,children:[n," ",i]}),(0,r.jsx)("div",{className:p.separator})]})})})})}},317175:function(e,t,n){n.d(t,{Z:function(){return g}}),n(390547);var r=n(735250),s=n(470079),i=n(120356),o=n.n(i),a=n(658722),l=n.n(a),c=n(392711),u=n.n(c),d=n(217986),h=n(481060),p=n(133080),C=n(285952),f=n(689938),m=n(138792),x=n(972667);function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class g extends s.PureComponent{renderItems(){let{query:e}=this.state,t=d.Z.flatMap((e,t)=>{let{alpha2:n,phoneCountryCodes:s,name:i}=e,o=(0,p.q9)(n);return s.map(e=>({key:"".concat(t,"-").concat(e),name:i,translatedName:o,countryData:{name:i,alpha2:n,code:e},children:(0,r.jsxs)(C.Z,{className:m.countryItem,justify:C.Z.Justify.CENTER,align:C.Z.Align.CENTER,children:[(0,r.jsx)(C.Z.Child,{className:m.countryName,children:o}),(0,r.jsx)(C.Z.Child,{className:m.countryCode,grow:0,shrink:0,children:e})]})}))}),n=u()(t).filter(t=>0===e.length||l()(e.toLowerCase(),t.name.toLowerCase())||l()(e.toLowerCase(),t.translatedName.toLowerCase())).map(e=>(0,s.createElement)(h.PopoutList.Item,{...e,key:e.key,onClick:()=>this.onClick(e.countryData)})).value();return 0===n.length?(0,r.jsx)(h.PopoutList.Empty,{children:f.Z.Messages.NONE}):(0,r.jsx)(h.ScrollerAuto,{className:m.phoneFieldScroller,children:n})}render(){let{className:e}=this.props;return(0,r.jsxs)(h.PopoutList,{className:o()(m.phoneFieldPopout,x.elevationBorderLow,e),children:[(0,r.jsx)(h.PopoutList.SearchBar,{query:this.state.query,placeholder:f.Z.Messages.SEARCH_COUNTRY,onChange:this.onChangeQuery,onClear:this.onClearQuery,autoComplete:"off"}),(0,r.jsx)(h.PopoutList.Divider,{}),this.renderItems()]})}constructor(e){super(e),N(this,"onChangeQuery",e=>{this.setState({query:e})}),N(this,"onClearQuery",()=>{this.setState({query:""})}),N(this,"onClick",e=>{var t,n;null===(t=(n=this.props).onClick)||void 0===t||t.call(n,e)}),this.state={query:""}}}},952802:function(e,t,n){n.d(t,{Z:function(){return p}}),n(47120);var r=n(735250),s=n(470079),i=n(120356),o=n.n(i),a=n(481060),l=n(153124),c=n(742458),u=n(766650),d=n(489686),h=n(838009);function p(e){let{alpha2:t,countryCode:n,forceMode:i,label:p,error:C,className:f,required:m,value:x,setRef:N,placeholder:g,autoFocus:v,maxLength:y,spellCheck:j,autoComplete:A,autoCapitalize:E,autoCorrect:T,onChange:I,inputClassName:_}=e,w=(0,l.Dt)(),[O,R]=s.useState(!1),Z=(0,c.o9)(i,x);return(0,r.jsx)(a.FormItem,{title:p,error:C,className:f,required:m,tag:"label",htmlFor:w,children:(0,r.jsxs)("div",{className:o()(h.input,d.input,_,{[h.error]:null!=C,[h.focused]:O}),children:[(0,r.jsx)(u.Z,{show:Z,alpha2:t,countryCode:n}),(0,r.jsx)(a.TextInput,{id:w,name:"email",type:i===c.Nz.EMAIL?"email":"text",value:x,inputRef:N,placeholder:g,"aria-label":p,required:m,onChange:function(e){let t=(0,c.o9)(i,e)?n:"";I(e,t)},autoComplete:A,autoCapitalize:E,autoCorrect:T,autoFocus:v,maxLength:y,spellCheck:j,className:d.inputWrapper,inputClassName:d.inputField,onFocus:()=>R(!0),onBlur:()=>R(!1)})]})})}},985513:function(e,t,n){n(47120),n(653041);var r,s,i=n(735250),o=n(470079),a=n(120356),l=n.n(a),c=n(285952),u=n(286290);function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class h extends(r=o.PureComponent){render(){let{className:e}=this.props;return(0,i.jsx)("input",{ref:this.setCodeBlockRef,className:l()(u.input,e),maxLength:1,value:null!=this.props.code?this.props.code:void 0,autoFocus:this.props.autoFocus,onKeyDown:this.handleKeyDown,onChange:this.handleChange})}focus(){var e;null===(e=this._codeBlockRef)||void 0===e||e.focus()}blur(){var e;null===(e=this._codeBlockRef)||void 0===e||e.blur()}constructor(...e){super(...e),d(this,"_codeBlockRef",void 0),d(this,"setCodeBlockRef",e=>{this._codeBlockRef=e}),d(this,"handleKeyDown",e=>{let t=8===e.which||37===e.which||39===e.which,n=e.which>=48&&e.which<=57||e.keyCode>=96&&e.keyCode<=105;!t&&!n&&e.preventDefault();let{onKeyDown:r}=this.props;null==r||r(e)}),d(this,"handleChange",e=>{let{onChange:t}=this.props;null==t||t(e.currentTarget.value)})}}d(h,"defaultProps",{autoFocus:!1});class p extends(s=o.PureComponent){render(){let{className:e,inputClassName:t}=this.props,{codes:n}=this.state,r=[];for(let e=0;e<n.length;e++)e===n.length/2&&r.push((0,i.jsx)("div",{className:u.spacer},"spacer")),r.push((0,i.jsx)(h,{ref:t=>this.setCodeBlockRef(e,t),code:n[e],autoFocus:0===e,onChange:t=>this.handleChange(e,t),onKeyDown:t=>this.handleKeyDown(e,t),className:t},e));return(0,i.jsx)(c.Z,{align:c.Z.Align.CENTER,justify:c.Z.Justify.CENTER,className:e,children:r})}setCodeBlockRef(e,t){this._codeBlockRefs[e]=t}handleChange(e,t){this.state.codes[e]=t;let n=this.getCodeOrFirstEmptyIndex();if("string"==typeof n)this.submit(n);else{let e=this._codeBlockRefs[n];null==e||e.focus()}}handleKeyDown(e,t){let{codes:n}=this.state;if(8===t.which&&e>0&&(null==n[e]||0===n[e].length)){let t=e-1;n[t]="";let r=this._codeBlockRefs[t];null==r||r.focus()}}getCodeOrFirstEmptyIndex(){let{codes:e}=this.state,t="";for(let n=0;n<e.length;n++){if(isNaN(parseInt(e[n])))return n;t+=e[n]}return t}submit(e){let{onSubmit:t}=this.props;null==t||t(e)}constructor(e){super(e),d(this,"_codeBlockRefs",Array(this.props.count)),this.state={codes:Array(e.count)}}}d(p,"defaultProps",{count:6}),t.Z=p},849055:function(e,t,n){function r(e){let t="==".slice(0,(4-e.length%4)%4),n=atob(e.replace(/-/g,"+").replace(/_/g,"/")+t),r=new ArrayBuffer(n.length),s=new Uint8Array(r);for(let e=0;e<n.length;e++)s[e]=n.charCodeAt(e);return r}function s(e){let t=new Uint8Array(e),n="";for(let e of t)n+=String.fromCharCode(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}n.d(t,{U2:function(){return g},Ue:function(){return N}});var i="copy",o="convert";function a(e,t,n){if(t===i)return n;if(t===o)return e(n);if(t instanceof Array)return n.map(n=>a(e,t[0],n));if(t instanceof Object){let r={};for(let[s,i]of Object.entries(t)){if(i.derive){let e=i.derive(n);void 0!==e&&(n[s]=e)}if(!(s in n)){if(i.required)throw Error(`Missing key: ${s}`);continue}if(null==n[s]){r[s]=null;continue}r[s]=a(e,i.schema,n[s])}return r}}function l(e,t){return{required:!0,schema:e,derive:t}}function c(e){return{required:!0,schema:e}}function u(e){return{required:!1,schema:e}}var d={type:c(i),id:c(o),transports:u(i)},h={appid:u(i),appidExclude:u(i),credProps:u(i)},p={appid:u(i),appidExclude:u(i),credProps:u(i)},C={publicKey:c({rp:c(i),user:c({id:c(o),name:c(i),displayName:c(i)}),challenge:c(o),pubKeyCredParams:c(i),timeout:u(i),excludeCredentials:u([d]),authenticatorSelection:u(i),attestation:u(i),extensions:u(h)}),signal:u(i)},f={type:c(i),id:c(i),rawId:c(o),authenticatorAttachment:u(i),response:c({clientDataJSON:c(o),attestationObject:c(o),transports:l(i,e=>{var t;return(null==(t=e.getTransports)?void 0:t.call(e))||[]})}),clientExtensionResults:l(p,e=>e.getClientExtensionResults())},m={mediation:u(i),publicKey:c({challenge:c(o),timeout:u(i),rpId:u(i),allowCredentials:u([d]),userVerification:u(i),extensions:u(h)}),signal:u(i)},x={type:c(i),id:c(i),rawId:c(o),authenticatorAttachment:u(i),response:c({clientDataJSON:c(o),authenticatorData:c(o),signature:c(o),userHandle:c(o)}),clientExtensionResults:l(p,e=>e.getClientExtensionResults())};async function N(e){let t=await navigator.credentials.create(a(r,C,e));return a(s,f,t)}async function g(e){let t=await navigator.credentials.get(a(r,m,e));return a(s,x,t)}}}]);
//# sourceMappingURL=93669.afe7bb7829a10436b564.js.map